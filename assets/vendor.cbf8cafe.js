var ol=Object.defineProperty,ll=Object.defineProperties;var hl=Object.getOwnPropertyDescriptors;var is=Object.getOwnPropertySymbols;var dl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable;var rs=(e,t,i)=>t in e?ol(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ki=(e,t)=>{for(var i in t||(t={}))dl.call(t,i)&&rs(e,i,t[i]);if(is)for(var i of is(t))fl.call(t,i)&&rs(e,i,t[i]);return e},Oi=(e,t)=>ll(e,hl(t));function mn(e,t){const i=Object.create(null),r=e.split(",");for(let n=0;n<r.length;n++)i[r[n]]=!0;return t?n=>!!i[n.toLowerCase()]:n=>!!i[n]}const ul="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cl=mn(ul);function sa(e){return!!e||e===""}function gr(e){if(Q(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=St(r)?vl(r):gr(r);if(n)for(const s in n)t[s]=n[s]}return t}else{if(St(e))return e;if(yt(e))return e}}const gl=/;(?![^(]*\))/g,pl=/:(.+)/;function vl(e){const t={};return e.split(gl).forEach(i=>{if(i){const r=i.split(pl);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Nt(e){let t="";if(St(e))t=e;else if(Q(e))for(let i=0;i<e.length;i++){const r=Nt(e[i]);r&&(t+=r+" ")}else if(yt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function ml(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=nr(e[r],t[r]);return i}function nr(e,t){if(e===t)return!0;let i=ns(e),r=ns(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=Q(e),r=Q(t),i||r)return i&&r?ml(e,t):!1;if(i=yt(e),r=yt(t),i||r){if(!i||!r)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!nr(e[a],t[a]))return!1}}return String(e)===String(t)}const aa=e=>St(e)?e:e==null?"":Q(e)||yt(e)&&(e.toString===da||!Z(e.toString))?JSON.stringify(e,oa,2):String(e),oa=(e,t)=>t&&t.__v_isRef?oa(e,t.value):Ve(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n])=>(i[`${r} =>`]=n,i),{})}:la(t)?{[`Set(${t.size})`]:[...t.values()]}:yt(t)&&!Q(t)&&!fa(t)?String(t):t,ft={},Xe=[],zt=()=>{},_l=()=>!1,bl=/^on[^a-z]/,pr=e=>bl.test(e),_n=e=>e.startsWith("onUpdate:"),Pt=Object.assign,bn=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},yl=Object.prototype.hasOwnProperty,it=(e,t)=>yl.call(e,t),Q=Array.isArray,Ve=e=>vr(e)==="[object Map]",la=e=>vr(e)==="[object Set]",ns=e=>e instanceof Date,Z=e=>typeof e=="function",St=e=>typeof e=="string",yn=e=>typeof e=="symbol",yt=e=>e!==null&&typeof e=="object",ha=e=>yt(e)&&Z(e.then)&&Z(e.catch),da=Object.prototype.toString,vr=e=>da.call(e),Sl=e=>vr(e).slice(8,-1),fa=e=>vr(e)==="[object Object]",Sn=e=>St(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ji=mn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mr=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Cl=/-(\w)/g,Je=mr(e=>e.replace(Cl,(t,i)=>i?i.toUpperCase():"")),wl=/\B([A-Z])/g,Oe=mr(e=>e.replace(wl,"-$1").toLowerCase()),ua=mr(e=>e.charAt(0).toUpperCase()+e.slice(1)),kr=mr(e=>e?`on${ua(e)}`:""),Ci=(e,t)=>!Object.is(e,t),Qi=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},sr=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},xl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ss;const El=()=>ss||(ss=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ee;class Tl{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ee&&(this.parent=ee,this.index=(ee.scopes||(ee.scopes=[])).push(this)-1)}run(t){if(this.active)try{return ee=this,t()}finally{ee=this.parent}}on(){ee=this}off(){ee=this.parent}stop(t){if(this.active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Pl(e,t=ee){t&&t.active&&t.effects.push(e)}const Cn=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ca=e=>(e.w&_e)>0,ga=e=>(e.n&_e)>0,Al=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=_e},Ml=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const n=t[r];ca(n)&&!ga(n)?n.delete(e):t[i++]=n,n.w&=~_e,n.n&=~_e}t.length=i}},$r=new WeakMap;let hi=0,_e=1;const Xr=30;let Jt;const Me=Symbol(""),Vr=Symbol("");class wn{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Pl(this,r)}run(){if(!this.active)return this.fn();let t=Jt,i=me;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Jt,Jt=this,me=!0,_e=1<<++hi,hi<=Xr?Al(this):as(this),this.fn()}finally{hi<=Xr&&Ml(this),_e=1<<--hi,Jt=this.parent,me=i,this.parent=void 0}}stop(){this.active&&(as(this),this.onStop&&this.onStop(),this.active=!1)}}function as(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let me=!0;const pa=[];function Ie(){pa.push(me),me=!1}function Le(){const e=pa.pop();me=e===void 0?!0:e}function Lt(e,t,i){if(me&&Jt){let r=$r.get(e);r||$r.set(e,r=new Map);let n=r.get(i);n||r.set(i,n=Cn()),va(n)}}function va(e,t){let i=!1;hi<=Xr?ga(e)||(e.n|=_e,i=!ca(e)):i=!e.has(Jt),i&&(e.add(Jt),Jt.deps.push(e))}function ae(e,t,i,r,n,s){const a=$r.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(i==="length"&&Q(e))a.forEach((l,h)=>{(h==="length"||h>=r)&&o.push(l)});else switch(i!==void 0&&o.push(a.get(i)),t){case"add":Q(e)?Sn(i)&&o.push(a.get("length")):(o.push(a.get(Me)),Ve(e)&&o.push(a.get(Vr)));break;case"delete":Q(e)||(o.push(a.get(Me)),Ve(e)&&o.push(a.get(Vr)));break;case"set":Ve(e)&&o.push(a.get(Me));break}if(o.length===1)o[0]&&Kr(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);Kr(Cn(l))}}function Kr(e,t){for(const i of Q(e)?e:[...e])(i!==Jt||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Rl=mn("__proto__,__v_isRef,__isVue"),ma=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(yn)),kl=xn(),Ol=xn(!1,!0),Il=xn(!0),os=Ll();function Ll(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=nt(this);for(let s=0,a=this.length;s<a;s++)Lt(r,"get",s+"");const n=r[t](...i);return n===-1||n===!1?r[t](...i.map(nt)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){Ie();const r=nt(this)[t].apply(this,i);return Le(),r}}),e}function xn(e=!1,t=!1){return function(r,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?ql:Ca:t?Sa:ya).get(r))return r;const a=Q(r);if(!e&&a&&it(os,n))return Reflect.get(os,n,s);const o=Reflect.get(r,n,s);return(yn(n)?ma.has(n):Rl(n))||(e||Lt(r,"get",n),t)?o:Ct(o)?!a||!Sn(n)?o.value:o:yt(o)?e?wa(o):br(o):o}}const Gl=_a(),Dl=_a(!0);function _a(e=!1){return function(i,r,n,s){let a=i[r];if(wi(a)&&Ct(a)&&!Ct(n))return!1;if(!e&&!wi(n)&&(xa(n)||(n=nt(n),a=nt(a)),!Q(i)&&Ct(a)&&!Ct(n)))return a.value=n,!0;const o=Q(i)&&Sn(r)?Number(r)<i.length:it(i,r),l=Reflect.set(i,r,n,s);return i===nt(s)&&(o?Ci(n,a)&&ae(i,"set",r,n):ae(i,"add",r,n)),l}}function Nl(e,t){const i=it(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&ae(e,"delete",t,void 0),r}function Fl(e,t){const i=Reflect.has(e,t);return(!yn(t)||!ma.has(t))&&Lt(e,"has",t),i}function Bl(e){return Lt(e,"iterate",Q(e)?"length":Me),Reflect.ownKeys(e)}const ba={get:kl,set:Gl,deleteProperty:Nl,has:Fl,ownKeys:Bl},Hl={get:Il,set(e,t){return!0},deleteProperty(e,t){return!0}},zl=Pt({},ba,{get:Ol,set:Dl}),En=e=>e,_r=e=>Reflect.getPrototypeOf(e);function Ii(e,t,i=!1,r=!1){e=e.__v_raw;const n=nt(e),s=nt(t);t!==s&&!i&&Lt(n,"get",t),!i&&Lt(n,"get",s);const{has:a}=_r(n),o=r?En:i?An:xi;if(a.call(n,t))return o(e.get(t));if(a.call(n,s))return o(e.get(s));e!==n&&e.get(t)}function Li(e,t=!1){const i=this.__v_raw,r=nt(i),n=nt(e);return e!==n&&!t&&Lt(r,"has",e),!t&&Lt(r,"has",n),e===n?i.has(e):i.has(e)||i.has(n)}function Gi(e,t=!1){return e=e.__v_raw,!t&&Lt(nt(e),"iterate",Me),Reflect.get(e,"size",e)}function ls(e){e=nt(e);const t=nt(this);return _r(t).has.call(t,e)||(t.add(e),ae(t,"add",e,e)),this}function hs(e,t){t=nt(t);const i=nt(this),{has:r,get:n}=_r(i);let s=r.call(i,e);s||(e=nt(e),s=r.call(i,e));const a=n.call(i,e);return i.set(e,t),s?Ci(t,a)&&ae(i,"set",e,t):ae(i,"add",e,t),this}function ds(e){const t=nt(this),{has:i,get:r}=_r(t);let n=i.call(t,e);n||(e=nt(e),n=i.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return n&&ae(t,"delete",e,void 0),s}function fs(){const e=nt(this),t=e.size!==0,i=e.clear();return t&&ae(e,"clear",void 0,void 0),i}function Di(e,t){return function(r,n){const s=this,a=s.__v_raw,o=nt(a),l=t?En:e?An:xi;return!e&&Lt(o,"iterate",Me),a.forEach((h,d)=>r.call(n,l(h),l(d),s))}}function Ni(e,t,i){return function(...r){const n=this.__v_raw,s=nt(n),a=Ve(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=n[e](...r),d=i?En:t?An:xi;return!t&&Lt(s,"iterate",l?Vr:Me),{next(){const{value:f,done:u}=h.next();return u?{value:f,done:u}:{value:o?[d(f[0]),d(f[1])]:d(f),done:u}},[Symbol.iterator](){return this}}}}function ue(e){return function(...t){return e==="delete"?!1:this}}function Wl(){const e={get(s){return Ii(this,s)},get size(){return Gi(this)},has:Li,add:ls,set:hs,delete:ds,clear:fs,forEach:Di(!1,!1)},t={get(s){return Ii(this,s,!1,!0)},get size(){return Gi(this)},has:Li,add:ls,set:hs,delete:ds,clear:fs,forEach:Di(!1,!0)},i={get(s){return Ii(this,s,!0)},get size(){return Gi(this,!0)},has(s){return Li.call(this,s,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:Di(!0,!1)},r={get(s){return Ii(this,s,!0,!0)},get size(){return Gi(this,!0)},has(s){return Li.call(this,s,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:Di(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Ni(s,!1,!1),i[s]=Ni(s,!0,!1),t[s]=Ni(s,!1,!0),r[s]=Ni(s,!0,!0)}),[e,i,t,r]}const[Ul,Yl,$l,Xl]=Wl();function Tn(e,t){const i=t?e?Xl:$l:e?Yl:Ul;return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(it(i,n)&&n in r?i:r,n,s)}const Vl={get:Tn(!1,!1)},Kl={get:Tn(!1,!0)},jl={get:Tn(!0,!1)},ya=new WeakMap,Sa=new WeakMap,Ca=new WeakMap,ql=new WeakMap;function Jl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ql(e){return e.__v_skip||!Object.isExtensible(e)?0:Jl(Sl(e))}function br(e){return wi(e)?e:Pn(e,!1,ba,Vl,ya)}function Zl(e){return Pn(e,!1,zl,Kl,Sa)}function wa(e){return Pn(e,!0,Hl,jl,Ca)}function Pn(e,t,i,r,n){if(!yt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=Ql(e);if(a===0)return e;const o=new Proxy(e,a===2?r:i);return n.set(e,o),o}function Ke(e){return wi(e)?Ke(e.__v_raw):!!(e&&e.__v_isReactive)}function wi(e){return!!(e&&e.__v_isReadonly)}function xa(e){return!!(e&&e.__v_isShallow)}function Ea(e){return Ke(e)||wi(e)}function nt(e){const t=e&&e.__v_raw;return t?nt(t):e}function Ta(e){return sr(e,"__v_skip",!0),e}const xi=e=>yt(e)?br(e):e,An=e=>yt(e)?wa(e):e;function Pa(e){me&&Jt&&(e=nt(e),va(e.dep||(e.dep=Cn())))}function Aa(e,t){e=nt(e),e.dep&&Kr(e.dep)}function Ct(e){return!!(e&&e.__v_isRef===!0)}function Ei(e){return th(e,!1)}function th(e,t){return Ct(e)?e:new eh(e,t)}class eh{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:nt(t),this._value=i?t:xi(t)}get value(){return Pa(this),this._value}set value(t){t=this.__v_isShallow?t:nt(t),Ci(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:xi(t),Aa(this))}}function jt(e){return Ct(e)?e.value:e}const ih={get:(e,t,i)=>jt(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return Ct(n)&&!Ct(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function Ma(e){return Ke(e)?e:new Proxy(e,ih)}function rh(e){const t=Q(e)?new Array(e.length):{};for(const i in e)t[i]=sh(e,i);return t}class nh{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function sh(e,t,i){const r=e[t];return Ct(r)?r:new nh(e,t,i)}class ah{constructor(t,i,r,n){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new wn(t,()=>{this._dirty||(this._dirty=!0,Aa(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const t=nt(this);return Pa(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function oh(e,t,i=!1){let r,n;const s=Z(e);return s?(r=e,n=zt):(r=e.get,n=e.set),new ah(r,n,s||!n,i)}Promise.resolve();const pi=[];function lh(e,...t){Ie();const i=pi.length?pi[pi.length-1].component:null,r=i&&i.appContext.config.warnHandler,n=hh();if(r)ne(r,i,11,[e+t.join(""),i&&i.proxy,n.map(({vnode:s})=>`at <${ho(i,s.type)}>`).join(`
`),n]);else{const s=[`[Vue warn]: ${e}`,...t];n.length&&s.push(`
`,...dh(n)),console.warn(...s)}Le()}function hh(){let e=pi[pi.length-1];if(!e)return[];const t=[];for(;e;){const i=t[0];i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function dh(e){const t=[];return e.forEach((i,r)=>{t.push(...r===0?[]:[`
`],...fh(i))}),t}function fh({vnode:e,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,n=` at <${ho(e.component,e.type,r)}`,s=">"+i;return e.props?[n,...uh(e.props),s]:[n+s]}function uh(e){const t=[],i=Object.keys(e);return i.slice(0,3).forEach(r=>{t.push(...Ra(r,e[r]))}),i.length>3&&t.push(" ..."),t}function Ra(e,t,i){return St(t)?(t=JSON.stringify(t),i?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${e}=${t}`]:Ct(t)?(t=Ra(e,nt(t.value),!0),i?t:[`${e}=Ref<`,t,">"]):Z(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=nt(t),i?t:[`${e}=`,t])}function ne(e,t,i,r){let n;try{n=r?e(...r):e()}catch(s){yr(s,t,i)}return n}function Wt(e,t,i,r){if(Z(e)){const s=ne(e,t,i,r);return s&&ha(s)&&s.catch(a=>{yr(a,t,i)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(Wt(e[s],t,i,r));return n}function yr(e,t,i,r=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=i;for(;s;){const h=s.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){ne(l,null,10,[e,a,o]);return}}ch(e,i,n,r)}function ch(e,t,i,r=!0){console.error(e)}let ar=!1,jr=!1;const kt=[];let re=0;const vi=[];let di=null,Ue=0;const mi=[];let ce=null,Ye=0;const ka=Promise.resolve();let Mn=null,qr=null;function Rn(e){const t=Mn||ka;return e?t.then(this?e.bind(this):e):t}function gh(e){let t=re+1,i=kt.length;for(;t<i;){const r=t+i>>>1;Ti(kt[r])<e?t=r+1:i=r}return t}function Oa(e){(!kt.length||!kt.includes(e,ar&&e.allowRecurse?re+1:re))&&e!==qr&&(e.id==null?kt.push(e):kt.splice(gh(e.id),0,e),Ia())}function Ia(){!ar&&!jr&&(jr=!0,Mn=ka.then(Da))}function ph(e){const t=kt.indexOf(e);t>re&&kt.splice(t,1)}function La(e,t,i,r){Q(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&i.push(e),Ia()}function vh(e){La(e,di,vi,Ue)}function mh(e){La(e,ce,mi,Ye)}function kn(e,t=null){if(vi.length){for(qr=t,di=[...new Set(vi)],vi.length=0,Ue=0;Ue<di.length;Ue++)di[Ue]();di=null,Ue=0,qr=null,kn(e,t)}}function Ga(e){if(mi.length){const t=[...new Set(mi)];if(mi.length=0,ce){ce.push(...t);return}for(ce=t,ce.sort((i,r)=>Ti(i)-Ti(r)),Ye=0;Ye<ce.length;Ye++)ce[Ye]();ce=null,Ye=0}}const Ti=e=>e.id==null?1/0:e.id;function Da(e){jr=!1,ar=!0,kn(e),kt.sort((i,r)=>Ti(i)-Ti(r));const t=zt;try{for(re=0;re<kt.length;re++){const i=kt[re];i&&i.active!==!1&&ne(i,null,14)}}finally{re=0,kt.length=0,Ga(),ar=!1,Mn=null,(kt.length||vi.length||mi.length)&&Da(e)}}function _h(e,t,...i){const r=e.vnode.props||ft;let n=i;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:u}=r[d]||ft;u?n=i.map(g=>g.trim()):f&&(n=i.map(xl))}let o,l=r[o=kr(t)]||r[o=kr(Je(t))];!l&&s&&(l=r[o=kr(Oe(t))]),l&&Wt(l,e,6,n);const h=r[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Wt(h,e,6,n)}}function Na(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!Z(e)){const l=h=>{const d=Na(h,t,!0);d&&(o=!0,Pt(a,d))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(r.set(e,null),null):(Q(s)?s.forEach(l=>a[l]=null):Pt(a,s),r.set(e,a),a)}function On(e,t){return!e||!pr(t)?!1:(t=t.slice(2).replace(/Once$/,""),it(e,t[0].toLowerCase()+t.slice(1))||it(e,Oe(t))||it(e,t))}let Ht=null,Fa=null;function or(e){const t=Ht;return Ht=e,Fa=e&&e.type.__scopeId||null,t}function bh(e,t=Ht,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&Ss(-1);const s=or(t),a=e(...n);return or(s),r._d&&Ss(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function Or(e){const{type:t,vnode:i,proxy:r,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:d,renderCache:f,data:u,setupState:g,ctx:c,inheritAttrs:y}=e;let m,C;const x=or(e);try{if(i.shapeFlag&4){const E=n||r;m=qt(d.call(E,E,f,s,g,u,c)),C=l}else{const E=t;m=qt(E.length>1?E(s,{attrs:l,slots:o,emit:h}):E(s,null)),C=t.props?l:yh(l)}}catch(E){_i.length=0,yr(E,e,1),m=se(oe)}let w=m;if(C&&y!==!1){const E=Object.keys(C),{shapeFlag:F}=w;E.length&&F&7&&(a&&E.some(_n)&&(C=Sh(C,a)),w=Qe(w,C))}return i.dirs&&(w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&(w.transition=i.transition),m=w,or(x),m}const yh=e=>{let t;for(const i in e)(i==="class"||i==="style"||pr(i))&&((t||(t={}))[i]=e[i]);return t},Sh=(e,t)=>{const i={};for(const r in e)(!_n(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function Ch(e,t,i){const{props:r,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?us(r,a,h):!!a;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const u=d[f];if(a[u]!==r[u]&&!On(h,u))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?us(r,a,h):!0:!!a;return!1}function us(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!On(i,s))return!0}return!1}function wh({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const xh=e=>e.__isSuspense;function Eh(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):mh(e)}function Ba(e,t){if(Tt){let i=Tt.provides;const r=Tt.parent&&Tt.parent.provides;r===i&&(i=Tt.provides=Object.create(r)),i[e]=t}}function Qt(e,t,i=!1){const r=Tt||Ht;if(r){const n=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return i&&Z(t)?t.call(r.proxy):t}}const cs={};function Zi(e,t,i){return Ha(e,t,i)}function Ha(e,t,{immediate:i,deep:r,flush:n,onTrack:s,onTrigger:a}=ft){const o=Tt;let l,h=!1,d=!1;if(Ct(e)?(l=()=>e.value,h=xa(e)):Ke(e)?(l=()=>e,r=!0):Q(e)?(d=!0,h=e.some(Ke),l=()=>e.map(C=>{if(Ct(C))return C.value;if(Ke(C))return Ae(C);if(Z(C))return ne(C,o,2)})):Z(e)?t?l=()=>ne(e,o,2):l=()=>{if(!(o&&o.isUnmounted))return f&&f(),Wt(e,o,3,[u])}:l=zt,t&&r){const C=l;l=()=>Ae(C())}let f,u=C=>{f=m.onStop=()=>{ne(C,o,4)}};if(Pi)return u=zt,t?i&&Wt(t,o,3,[l(),d?[]:void 0,u]):l(),zt;let g=d?[]:cs;const c=()=>{if(!!m.active)if(t){const C=m.run();(r||h||(d?C.some((x,w)=>Ci(x,g[w])):Ci(C,g)))&&(f&&f(),Wt(t,o,3,[C,g===cs?void 0:g,u]),g=C)}else m.run()};c.allowRecurse=!!t;let y;n==="sync"?y=c:n==="post"?y=()=>Mt(c,o&&o.suspense):y=()=>{!o||o.isMounted?vh(c):c()};const m=new wn(l,y);return t?i?c():g=m.run():n==="post"?Mt(m.run.bind(m),o&&o.suspense):m.run(),()=>{m.stop(),o&&o.scope&&bn(o.scope.effects,m)}}function Th(e,t,i){const r=this.proxy,n=St(e)?e.includes(".")?za(r,e):()=>r[e]:e.bind(r,r);let s;Z(t)?s=t:(s=t.handler,i=t);const a=Tt;Ze(this);const o=Ha(n,s.bind(r),i);return a?Ze(a):ke(),o}function za(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}function Ae(e,t){if(!yt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ct(e))Ae(e.value,t);else if(Q(e))for(let i=0;i<e.length;i++)Ae(e[i],t);else if(la(e)||Ve(e))e.forEach(i=>{Ae(i,t)});else if(fa(e))for(const i in e)Ae(e[i],t);return e}function Ph(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ln(()=>{e.isMounted=!0}),$a(()=>{e.isUnmounting=!0}),e}const Gt=[Function,Array],Ah={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gt,onEnter:Gt,onAfterEnter:Gt,onEnterCancelled:Gt,onBeforeLeave:Gt,onLeave:Gt,onAfterLeave:Gt,onLeaveCancelled:Gt,onBeforeAppear:Gt,onAppear:Gt,onAfterAppear:Gt,onAppearCancelled:Gt},setup(e,{slots:t}){const i=zn(),r=Ph();let n;return()=>{const s=t.default&&Ua(t.default(),!0);if(!s||!s.length)return;const a=nt(e),{mode:o}=a,l=s[0];if(r.isLeaving)return Ir(l);const h=gs(l);if(!h)return Ir(l);const d=Jr(h,a,r,i);Qr(h,d);const f=i.subTree,u=f&&gs(f);let g=!1;const{getTransitionKey:c}=h.type;if(c){const y=c();n===void 0?n=y:y!==n&&(n=y,g=!0)}if(u&&u.type!==oe&&(!Te(h,u)||g)){const y=Jr(u,a,r,i);if(Qr(u,y),o==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,i.update()},Ir(l);o==="in-out"&&h.type!==oe&&(y.delayLeave=(m,C,x)=>{const w=Wa(r,u);w[String(u.key)]=u,m._leaveCb=()=>{C(),m._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=x})}return l}}},Mh=Ah;function Wa(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function Jr(e,t,i,r){const{appear:n,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:u,onAfterLeave:g,onLeaveCancelled:c,onBeforeAppear:y,onAppear:m,onAfterAppear:C,onAppearCancelled:x}=t,w=String(e.key),E=Wa(i,e),F=(I,D)=>{I&&Wt(I,r,9,D)},G={mode:s,persisted:a,beforeEnter(I){let D=o;if(!i.isMounted)if(n)D=y||o;else return;I._leaveCb&&I._leaveCb(!0);const B=E[w];B&&Te(e,B)&&B.el._leaveCb&&B.el._leaveCb(),F(D,[I])},enter(I){let D=l,B=h,W=d;if(!i.isMounted)if(n)D=m||l,B=C||h,W=x||d;else return;let z=!1;const K=I._enterCb=$=>{z||(z=!0,$?F(W,[I]):F(B,[I]),G.delayedLeave&&G.delayedLeave(),I._enterCb=void 0)};D?(D(I,K),D.length<=1&&K()):K()},leave(I,D){const B=String(e.key);if(I._enterCb&&I._enterCb(!0),i.isUnmounting)return D();F(f,[I]);let W=!1;const z=I._leaveCb=K=>{W||(W=!0,D(),K?F(c,[I]):F(g,[I]),I._leaveCb=void 0,E[B]===e&&delete E[B])};E[B]=e,u?(u(I,z),u.length<=1&&z()):z()},clone(I){return Jr(I,t,i,r)}};return G}function Ir(e){if(Sr(e))return e=Qe(e),e.children=null,e}function gs(e){return Sr(e)?e.children?e.children[0]:void 0:e}function Qr(e,t){e.shapeFlag&6&&e.component?Qr(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ua(e,t=!1){let i=[],r=0;for(let n=0;n<e.length;n++){const s=e[n];s.type===Dt?(s.patchFlag&128&&r++,i=i.concat(Ua(s.children,t))):(t||s.type!==oe)&&i.push(s)}if(r>1)for(let n=0;n<i.length;n++)i[n].patchFlag=-2;return i}function In(e){return Z(e)?{setup:e,name:e.name}:e}const Zr=e=>!!e.type.__asyncLoader,Sr=e=>e.type.__isKeepAlive;function Rh(e,t){Ya(e,"a",t)}function kh(e,t){Ya(e,"da",t)}function Ya(e,t,i=Tt){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Cr(t,r,i),i){let n=i.parent;for(;n&&n.parent;)Sr(n.parent.vnode)&&Oh(r,t,i,n),n=n.parent}}function Oh(e,t,i,r){const n=Cr(t,e,r,!0);Xa(()=>{bn(r[t],n)},i)}function Cr(e,t,i=Tt,r=!1){if(i){const n=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(i.isUnmounted)return;Ie(),Ze(i);const o=Wt(t,i,e,a);return ke(),Le(),o});return r?n.unshift(s):n.push(s),s}}const le=e=>(t,i=Tt)=>(!Pi||e==="sp")&&Cr(e,t,i),Ih=le("bm"),Ln=le("m"),Lh=le("bu"),Gh=le("u"),$a=le("bum"),Xa=le("um"),Dh=le("sp"),Nh=le("rtg"),Fh=le("rtc");function Bh(e,t=Tt){Cr("ec",e,t)}let tn=!0;function Hh(e){const t=Ka(e),i=e.proxy,r=e.ctx;tn=!1,t.beforeCreate&&ps(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:d,beforeMount:f,mounted:u,beforeUpdate:g,updated:c,activated:y,deactivated:m,beforeDestroy:C,beforeUnmount:x,destroyed:w,unmounted:E,render:F,renderTracked:G,renderTriggered:I,errorCaptured:D,serverPrefetch:B,expose:W,inheritAttrs:z,components:K,directives:$,filters:ot}=t;if(h&&zh(h,r,null,e.appContext.config.unwrapInjectedRef),a)for(const q in a){const tt=a[q];Z(tt)&&(r[q]=tt.bind(i))}if(n){const q=n.call(i,i);yt(q)&&(e.data=br(q))}if(tn=!0,s)for(const q in s){const tt=s[q],mt=Z(tt)?tt.bind(i,i):Z(tt.get)?tt.get.bind(i,i):zt,et=!Z(tt)&&Z(tt.set)?tt.set.bind(i):zt,lt=Ft({get:mt,set:et});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>lt.value,set:_t=>lt.value=_t})}if(o)for(const q in o)Va(o[q],r,i,q);if(l){const q=Z(l)?l.call(i):l;Reflect.ownKeys(q).forEach(tt=>{Ba(tt,q[tt])})}d&&ps(d,e,"c");function j(q,tt){Q(tt)?tt.forEach(mt=>q(mt.bind(i))):tt&&q(tt.bind(i))}if(j(Ih,f),j(Ln,u),j(Lh,g),j(Gh,c),j(Rh,y),j(kh,m),j(Bh,D),j(Fh,G),j(Nh,I),j($a,x),j(Xa,E),j(Dh,B),Q(W))if(W.length){const q=e.exposed||(e.exposed={});W.forEach(tt=>{Object.defineProperty(q,tt,{get:()=>i[tt],set:mt=>i[tt]=mt})})}else e.exposed||(e.exposed={});F&&e.render===zt&&(e.render=F),z!=null&&(e.inheritAttrs=z),K&&(e.components=K),$&&(e.directives=$)}function zh(e,t,i=zt,r=!1){Q(e)&&(e=en(e));for(const n in e){const s=e[n];let a;yt(s)?"default"in s?a=Qt(s.from||n,s.default,!0):a=Qt(s.from||n):a=Qt(s),Ct(a)&&r?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function ps(e,t,i){Wt(Q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function Va(e,t,i,r){const n=r.includes(".")?za(i,r):()=>i[r];if(St(e)){const s=t[e];Z(s)&&Zi(n,s)}else if(Z(e))Zi(n,e.bind(i));else if(yt(e))if(Q(e))e.forEach(s=>Va(s,t,i,r));else{const s=Z(e.handler)?e.handler.bind(i):t[e.handler];Z(s)&&Zi(n,s,e)}}function Ka(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(h=>lr(l,h,a,!0)),lr(l,t,a)),s.set(t,l),l}function lr(e,t,i,r=!1){const{mixins:n,extends:s}=t;s&&lr(e,s,i,!0),n&&n.forEach(a=>lr(e,a,i,!0));for(const a in t)if(!(r&&a==="expose")){const o=Wh[a]||i&&i[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Wh={data:vs,props:Ee,emits:Ee,methods:Ee,computed:Ee,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:Ee,directives:Ee,watch:Yh,provide:vs,inject:Uh};function vs(e,t){return t?e?function(){return Pt(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function Uh(e,t){return Ee(en(e),en(t))}function en(e){if(Q(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function At(e,t){return e?[...new Set([].concat(e,t))]:t}function Ee(e,t){return e?Pt(Pt(Object.create(null),e),t):t}function Yh(e,t){if(!e)return t;if(!t)return e;const i=Pt(Object.create(null),e);for(const r in t)i[r]=At(e[r],t[r]);return i}function $h(e,t,i,r=!1){const n={},s={};sr(s,xr,1),e.propsDefaults=Object.create(null),ja(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);i?e.props=r?n:Zl(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function Xh(e,t,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=nt(n),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let u=d[f];const g=t[u];if(l)if(it(s,u))g!==s[u]&&(s[u]=g,h=!0);else{const c=Je(u);n[c]=rn(l,o,c,g,e,!1)}else g!==s[u]&&(s[u]=g,h=!0)}}}else{ja(e,t,n,s)&&(h=!0);let d;for(const f in o)(!t||!it(t,f)&&((d=Oe(f))===f||!it(t,d)))&&(l?i&&(i[f]!==void 0||i[d]!==void 0)&&(n[f]=rn(l,o,f,void 0,e,!0)):delete n[f]);if(s!==o)for(const f in s)(!t||!it(t,f)&&!0)&&(delete s[f],h=!0)}h&&ae(e,"set","$attrs")}function ja(e,t,i,r){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Ji(l))continue;const h=t[l];let d;n&&it(n,d=Je(l))?!s||!s.includes(d)?i[d]=h:(o||(o={}))[d]=h:On(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=nt(i),h=o||ft;for(let d=0;d<s.length;d++){const f=s[d];i[f]=rn(n,l,f,h[f],e,!it(h,f))}}return a}function rn(e,t,i,r,n,s){const a=e[i];if(a!=null){const o=it(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&Z(l)){const{propsDefaults:h}=n;i in h?r=h[i]:(Ze(n),r=h[i]=l.call(null,t),ke())}else r=l}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Oe(i))&&(r=!0))}return r}function qa(e,t,i=!1){const r=t.propsCache,n=r.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!Z(e)){const d=f=>{l=!0;const[u,g]=qa(f,t,!0);Pt(a,u),g&&o.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!l)return r.set(e,Xe),Xe;if(Q(s))for(let d=0;d<s.length;d++){const f=Je(s[d]);ms(f)&&(a[f]=ft)}else if(s)for(const d in s){const f=Je(d);if(ms(f)){const u=s[d],g=a[f]=Q(u)||Z(u)?{type:u}:u;if(g){const c=ys(Boolean,g.type),y=ys(String,g.type);g[0]=c>-1,g[1]=y<0||c<y,(c>-1||it(g,"default"))&&o.push(f)}}}const h=[a,o];return r.set(e,h),h}function ms(e){return e[0]!=="$"}function _s(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function bs(e,t){return _s(e)===_s(t)}function ys(e,t){return Q(t)?t.findIndex(i=>bs(i,e)):Z(t)&&bs(t,e)?0:-1}const Ja=e=>e[0]==="_"||e==="$stable",Gn=e=>Q(e)?e.map(qt):[qt(e)],Vh=(e,t,i)=>{const r=bh((...n)=>Gn(t(...n)),i);return r._c=!1,r},Qa=(e,t,i)=>{const r=e._ctx;for(const n in e){if(Ja(n))continue;const s=e[n];if(Z(s))t[n]=Vh(n,s,r);else if(s!=null){const a=Gn(s);t[n]=()=>a}}},Za=(e,t)=>{const i=Gn(t);e.slots.default=()=>i},Kh=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=nt(t),sr(t,"_",i)):Qa(t,e.slots={})}else e.slots={},t&&Za(e,t);sr(e.slots,xr,1)},jh=(e,t,i)=>{const{vnode:r,slots:n}=e;let s=!0,a=ft;if(r.shapeFlag&32){const o=t._;o?i&&o===1?s=!1:(Pt(n,t),!i&&o===1&&delete n._):(s=!t.$stable,Qa(t,n)),a=t}else t&&(Za(e,t),a={default:1});if(s)for(const o in n)!Ja(o)&&!(o in a)&&delete n[o]};function to(e,t){const i=Ht;if(i===null)return e;const r=i.proxy,n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,l,h=ft]=t[s];Z(a)&&(a={mounted:a,updated:a}),a.deep&&Ae(o),n.push({dir:a,instance:r,value:o,oldValue:void 0,arg:l,modifiers:h})}return e}function Ce(e,t,i,r){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Ie(),Wt(l,i,8,[e.el,o,e,t]),Le())}}function eo(){return{app:null,config:{isNativeTag:_l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qh=0;function Jh(e,t){return function(r,n=null){n!=null&&!yt(n)&&(n=null);const s=eo(),a=new Set;let o=!1;const l=s.app={_uid:qh++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:yd,get config(){return s.config},set config(h){},use(h,...d){return a.has(h)||(h&&Z(h.install)?(a.add(h),h.install(l,...d)):Z(h)&&(a.add(h),h(l,...d))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,d){return d?(s.components[h]=d,l):s.components[h]},directive(h,d){return d?(s.directives[h]=d,l):s.directives[h]},mount(h,d,f){if(!o){const u=se(r,n);return u.appContext=s,d&&t?t(u,h):e(u,h,f),o=!0,l._container=h,h.__vue_app__=l,Wn(u.component)||u.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,d){return s.provides[h]=d,l}};return l}}function nn(e,t,i,r,n=!1){if(Q(e)){e.forEach((u,g)=>nn(u,t&&(Q(t)?t[g]:t),i,r,n));return}if(Zr(r)&&!n)return;const s=r.shapeFlag&4?Wn(r.component)||r.component.proxy:r.el,a=n?null:s,{i:o,r:l}=e,h=t&&t.r,d=o.refs===ft?o.refs={}:o.refs,f=o.setupState;if(h!=null&&h!==l&&(St(h)?(d[h]=null,it(f,h)&&(f[h]=null)):Ct(h)&&(h.value=null)),Z(l))ne(l,o,12,[a,d]);else{const u=St(l),g=Ct(l);if(u||g){const c=()=>{if(e.f){const y=u?d[l]:l.value;n?Q(y)&&bn(y,s):Q(y)?y.includes(s)||y.push(s):u?d[l]=[s]:(l.value=[s],e.k&&(d[e.k]=l.value))}else u?(d[l]=a,it(f,l)&&(f[l]=a)):Ct(l)&&(l.value=a,e.k&&(d[e.k]=a))};a?(c.id=-1,Mt(c,i)):c()}}}const Mt=Eh;function Qh(e){return Zh(e)}function Zh(e,t){const i=El();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:u,setScopeId:g=zt,cloneNode:c,insertStaticContent:y}=e,m=(v,_,S,P=null,T=null,L=null,H=!1,O=null,N=!!_.dynamicChildren)=>{if(v===_)return;v&&!Te(v,_)&&(P=Ri(v),Et(v,T,L,!0),v=null),_.patchFlag===-2&&(N=!1,_.dynamicChildren=null);const{type:M,ref:X,shapeFlag:Y}=_;switch(M){case Dn:C(v,_,S,P);break;case oe:x(v,_,S,P);break;case Lr:v==null&&w(_,S,P,H);break;case Dt:$(v,_,S,P,T,L,H,O,N);break;default:Y&1?G(v,_,S,P,T,L,H,O,N):Y&6?ot(v,_,S,P,T,L,H,O,N):(Y&64||Y&128)&&M.process(v,_,S,P,T,L,H,O,N,He)}X!=null&&T&&nn(X,v&&v.ref,L,_||v,!_)},C=(v,_,S,P)=>{if(v==null)r(_.el=o(_.children),S,P);else{const T=_.el=v.el;_.children!==v.children&&h(T,_.children)}},x=(v,_,S,P)=>{v==null?r(_.el=l(_.children||""),S,P):_.el=v.el},w=(v,_,S,P)=>{[v.el,v.anchor]=y(v.children,_,S,P,v.el,v.anchor)},E=({el:v,anchor:_},S,P)=>{let T;for(;v&&v!==_;)T=u(v),r(v,S,P),v=T;r(_,S,P)},F=({el:v,anchor:_})=>{let S;for(;v&&v!==_;)S=u(v),n(v),v=S;n(_)},G=(v,_,S,P,T,L,H,O,N)=>{H=H||_.type==="svg",v==null?I(_,S,P,T,L,H,O,N):W(v,_,T,L,H,O,N)},I=(v,_,S,P,T,L,H,O)=>{let N,M;const{type:X,props:Y,shapeFlag:V,transition:J,patchFlag:rt,dirs:gt}=v;if(v.el&&c!==void 0&&rt===-1)N=v.el=c(v.el);else{if(N=v.el=a(v.type,L,Y&&Y.is,Y),V&8?d(N,v.children):V&16&&B(v.children,N,null,P,T,L&&X!=="foreignObject",H,O),gt&&Ce(v,null,P,"created"),Y){for(const ct in Y)ct!=="value"&&!Ji(ct)&&s(N,ct,null,Y[ct],L,v.children,P,T,te);"value"in Y&&s(N,"value",null,Y.value),(M=Y.onVnodeBeforeMount)&&Kt(M,P,v)}D(N,v,v.scopeId,H,P)}gt&&Ce(v,null,P,"beforeMount");const dt=(!T||T&&!T.pendingBranch)&&J&&!J.persisted;dt&&J.beforeEnter(N),r(N,_,S),((M=Y&&Y.onVnodeMounted)||dt||gt)&&Mt(()=>{M&&Kt(M,P,v),dt&&J.enter(N),gt&&Ce(v,null,P,"mounted")},T)},D=(v,_,S,P,T)=>{if(S&&g(v,S),P)for(let L=0;L<P.length;L++)g(v,P[L]);if(T){let L=T.subTree;if(_===L){const H=T.vnode;D(v,H,H.scopeId,H.slotScopeIds,T.parent)}}},B=(v,_,S,P,T,L,H,O,N=0)=>{for(let M=N;M<v.length;M++){const X=v[M]=O?pe(v[M]):qt(v[M]);m(null,X,_,S,P,T,L,H,O)}},W=(v,_,S,P,T,L,H)=>{const O=_.el=v.el;let{patchFlag:N,dynamicChildren:M,dirs:X}=_;N|=v.patchFlag&16;const Y=v.props||ft,V=_.props||ft;let J;S&&we(S,!1),(J=V.onVnodeBeforeUpdate)&&Kt(J,S,_,v),X&&Ce(_,v,S,"beforeUpdate"),S&&we(S,!0);const rt=T&&_.type!=="foreignObject";if(M?z(v.dynamicChildren,M,O,S,P,rt,L):H||mt(v,_,O,null,S,P,rt,L,!1),N>0){if(N&16)K(O,_,Y,V,S,P,T);else if(N&2&&Y.class!==V.class&&s(O,"class",null,V.class,T),N&4&&s(O,"style",Y.style,V.style,T),N&8){const gt=_.dynamicProps;for(let dt=0;dt<gt.length;dt++){const ct=gt[dt],Yt=Y[ct],ze=V[ct];(ze!==Yt||ct==="value")&&s(O,ct,Yt,ze,T,v.children,S,P,te)}}N&1&&v.children!==_.children&&d(O,_.children)}else!H&&M==null&&K(O,_,Y,V,S,P,T);((J=V.onVnodeUpdated)||X)&&Mt(()=>{J&&Kt(J,S,_,v),X&&Ce(_,v,S,"updated")},P)},z=(v,_,S,P,T,L,H)=>{for(let O=0;O<_.length;O++){const N=v[O],M=_[O],X=N.el&&(N.type===Dt||!Te(N,M)||N.shapeFlag&70)?f(N.el):S;m(N,M,X,null,P,T,L,H,!0)}},K=(v,_,S,P,T,L,H)=>{if(S!==P){for(const O in P){if(Ji(O))continue;const N=P[O],M=S[O];N!==M&&O!=="value"&&s(v,O,M,N,H,_.children,T,L,te)}if(S!==ft)for(const O in S)!Ji(O)&&!(O in P)&&s(v,O,S[O],null,H,_.children,T,L,te);"value"in P&&s(v,"value",S.value,P.value)}},$=(v,_,S,P,T,L,H,O,N)=>{const M=_.el=v?v.el:o(""),X=_.anchor=v?v.anchor:o("");let{patchFlag:Y,dynamicChildren:V,slotScopeIds:J}=_;J&&(O=O?O.concat(J):J),v==null?(r(M,S,P),r(X,S,P),B(_.children,S,X,T,L,H,O,N)):Y>0&&Y&64&&V&&v.dynamicChildren?(z(v.dynamicChildren,V,S,T,L,H,O),(_.key!=null||T&&_===T.subTree)&&io(v,_,!0)):mt(v,_,S,X,T,L,H,O,N)},ot=(v,_,S,P,T,L,H,O,N)=>{_.slotScopeIds=O,v==null?_.shapeFlag&512?T.ctx.activate(_,S,P,H,N):xt(_,S,P,T,L,H,N):j(v,_,N)},xt=(v,_,S,P,T,L,H)=>{const O=v.component=fd(v,P,T);if(Sr(v)&&(O.ctx.renderer=He),ud(O),O.asyncDep){if(T&&T.registerDep(O,q),!v.el){const N=O.subTree=se(oe);x(null,N,_,S)}return}q(O,v,_,S,T,L,H)},j=(v,_,S)=>{const P=_.component=v.component;if(Ch(v,_,S))if(P.asyncDep&&!P.asyncResolved){tt(P,_,S);return}else P.next=_,ph(P.update),P.update();else _.component=v.component,_.el=v.el,P.vnode=_},q=(v,_,S,P,T,L,H)=>{const O=()=>{if(v.isMounted){let{next:X,bu:Y,u:V,parent:J,vnode:rt}=v,gt=X,dt;we(v,!1),X?(X.el=rt.el,tt(v,X,H)):X=rt,Y&&Qi(Y),(dt=X.props&&X.props.onVnodeBeforeUpdate)&&Kt(dt,J,X,rt),we(v,!0);const ct=Or(v),Yt=v.subTree;v.subTree=ct,m(Yt,ct,f(Yt.el),Ri(Yt),v,T,L),X.el=ct.el,gt===null&&wh(v,ct.el),V&&Mt(V,T),(dt=X.props&&X.props.onVnodeUpdated)&&Mt(()=>Kt(dt,J,X,rt),T)}else{let X;const{el:Y,props:V}=_,{bm:J,m:rt,parent:gt}=v,dt=Zr(_);if(we(v,!1),J&&Qi(J),!dt&&(X=V&&V.onVnodeBeforeMount)&&Kt(X,gt,_),we(v,!0),Y&&Rr){const ct=()=>{v.subTree=Or(v),Rr(Y,v.subTree,v,T,null)};dt?_.type.__asyncLoader().then(()=>!v.isUnmounted&&ct()):ct()}else{const ct=v.subTree=Or(v);m(null,ct,S,P,v,T,L),_.el=ct.el}if(rt&&Mt(rt,T),!dt&&(X=V&&V.onVnodeMounted)){const ct=_;Mt(()=>Kt(X,gt,ct),T)}_.shapeFlag&256&&v.a&&Mt(v.a,T),v.isMounted=!0,_=S=P=null}},N=v.effect=new wn(O,()=>Oa(v.update),v.scope),M=v.update=N.run.bind(N);M.id=v.uid,we(v,!0),M()},tt=(v,_,S)=>{_.component=v;const P=v.vnode.props;v.vnode=_,v.next=null,Xh(v,_.props,P,S),jh(v,_.children,S),Ie(),kn(void 0,v.update),Le()},mt=(v,_,S,P,T,L,H,O,N=!1)=>{const M=v&&v.children,X=v?v.shapeFlag:0,Y=_.children,{patchFlag:V,shapeFlag:J}=_;if(V>0){if(V&128){lt(M,Y,S,P,T,L,H,O,N);return}else if(V&256){et(M,Y,S,P,T,L,H,O,N);return}}J&8?(X&16&&te(M,T,L),Y!==M&&d(S,Y)):X&16?J&16?lt(M,Y,S,P,T,L,H,O,N):te(M,T,L,!0):(X&8&&d(S,""),J&16&&B(Y,S,P,T,L,H,O,N))},et=(v,_,S,P,T,L,H,O,N)=>{v=v||Xe,_=_||Xe;const M=v.length,X=_.length,Y=Math.min(M,X);let V;for(V=0;V<Y;V++){const J=_[V]=N?pe(_[V]):qt(_[V]);m(v[V],J,S,null,T,L,H,O,N)}M>X?te(v,T,L,!0,!1,Y):B(_,S,P,T,L,H,O,N,Y)},lt=(v,_,S,P,T,L,H,O,N)=>{let M=0;const X=_.length;let Y=v.length-1,V=X-1;for(;M<=Y&&M<=V;){const J=v[M],rt=_[M]=N?pe(_[M]):qt(_[M]);if(Te(J,rt))m(J,rt,S,null,T,L,H,O,N);else break;M++}for(;M<=Y&&M<=V;){const J=v[Y],rt=_[V]=N?pe(_[V]):qt(_[V]);if(Te(J,rt))m(J,rt,S,null,T,L,H,O,N);else break;Y--,V--}if(M>Y){if(M<=V){const J=V+1,rt=J<X?_[J].el:P;for(;M<=V;)m(null,_[M]=N?pe(_[M]):qt(_[M]),S,rt,T,L,H,O,N),M++}}else if(M>V)for(;M<=Y;)Et(v[M],T,L,!0),M++;else{const J=M,rt=M,gt=new Map;for(M=rt;M<=V;M++){const Rt=_[M]=N?pe(_[M]):qt(_[M]);Rt.key!=null&&gt.set(Rt.key,M)}let dt,ct=0;const Yt=V-rt+1;let ze=!1,Zn=0;const ri=new Array(Yt);for(M=0;M<Yt;M++)ri[M]=0;for(M=J;M<=Y;M++){const Rt=v[M];if(ct>=Yt){Et(Rt,T,L,!0);continue}let Vt;if(Rt.key!=null)Vt=gt.get(Rt.key);else for(dt=rt;dt<=V;dt++)if(ri[dt-rt]===0&&Te(Rt,_[dt])){Vt=dt;break}Vt===void 0?Et(Rt,T,L,!0):(ri[Vt-rt]=M+1,Vt>=Zn?Zn=Vt:ze=!0,m(Rt,_[Vt],S,null,T,L,H,O,N),ct++)}const ts=ze?td(ri):Xe;for(dt=ts.length-1,M=Yt-1;M>=0;M--){const Rt=rt+M,Vt=_[Rt],es=Rt+1<X?_[Rt+1].el:P;ri[M]===0?m(null,Vt,S,es,T,L,H,O,N):ze&&(dt<0||M!==ts[dt]?_t(Vt,S,es,2):dt--)}}},_t=(v,_,S,P,T=null)=>{const{el:L,type:H,transition:O,children:N,shapeFlag:M}=v;if(M&6){_t(v.component.subTree,_,S,P);return}if(M&128){v.suspense.move(_,S,P);return}if(M&64){H.move(v,_,S,He);return}if(H===Dt){r(L,_,S);for(let Y=0;Y<N.length;Y++)_t(N[Y],_,S,P);r(v.anchor,_,S);return}if(H===Lr){E(v,_,S);return}if(P!==2&&M&1&&O)if(P===0)O.beforeEnter(L),r(L,_,S),Mt(()=>O.enter(L),T);else{const{leave:Y,delayLeave:V,afterLeave:J}=O,rt=()=>r(L,_,S),gt=()=>{Y(L,()=>{rt(),J&&J()})};V?V(L,rt,gt):gt()}else r(L,_,S)},Et=(v,_,S,P=!1,T=!1)=>{const{type:L,props:H,ref:O,children:N,dynamicChildren:M,shapeFlag:X,patchFlag:Y,dirs:V}=v;if(O!=null&&nn(O,null,S,v,!0),X&256){_.ctx.deactivate(v);return}const J=X&1&&V,rt=!Zr(v);let gt;if(rt&&(gt=H&&H.onVnodeBeforeUnmount)&&Kt(gt,_,v),X&6)al(v.component,S,P);else{if(X&128){v.suspense.unmount(S,P);return}J&&Ce(v,null,_,"beforeUnmount"),X&64?v.type.remove(v,_,S,T,He,P):M&&(L!==Dt||Y>0&&Y&64)?te(M,_,S,!1,!0):(L===Dt&&Y&384||!T&&X&16)&&te(N,_,S),P&&Ut(v)}(rt&&(gt=H&&H.onVnodeUnmounted)||J)&&Mt(()=>{gt&&Kt(gt,_,v),J&&Ce(v,null,_,"unmounted")},S)},Ut=v=>{const{type:_,el:S,anchor:P,transition:T}=v;if(_===Dt){sl(S,P);return}if(_===Lr){F(v);return}const L=()=>{n(S),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(v.shapeFlag&1&&T&&!T.persisted){const{leave:H,delayLeave:O}=T,N=()=>H(S,L);O?O(v.el,L,N):N()}else L()},sl=(v,_)=>{let S;for(;v!==_;)S=u(v),n(v),v=S;n(_)},al=(v,_,S)=>{const{bum:P,scope:T,update:L,subTree:H,um:O}=v;P&&Qi(P),T.stop(),L&&(L.active=!1,Et(H,v,_,S)),O&&Mt(O,_),Mt(()=>{v.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},te=(v,_,S,P=!1,T=!1,L=0)=>{for(let H=L;H<v.length;H++)Et(v[H],_,S,P,T)},Ri=v=>v.shapeFlag&6?Ri(v.component.subTree):v.shapeFlag&128?v.suspense.next():u(v.anchor||v.el),Qn=(v,_,S)=>{v==null?_._vnode&&Et(_._vnode,null,null,!0):m(_._vnode||null,v,_,null,null,null,S),Ga(),_._vnode=v},He={p:m,um:Et,m:_t,r:Ut,mt:xt,mc:B,pc:mt,pbc:z,n:Ri,o:e};let Mr,Rr;return t&&([Mr,Rr]=t(He)),{render:Qn,hydrate:Mr,createApp:Jh(Qn,Mr)}}function we({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function io(e,t,i=!1){const r=e.children,n=t.children;if(Q(r)&&Q(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=pe(n[s]),o.el=a.el),i||io(a,o))}}function td(e){const t=e.slice(),i=[0];let r,n,s,a,o;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(n=i[i.length-1],e[n]<h){t[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,e[i[o]]<h?s=o+1:a=o;h<e[i[s]]&&(s>0&&(t[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=t[a];return i}const ed=e=>e.__isTeleport,id=Symbol(),Dt=Symbol(void 0),Dn=Symbol(void 0),oe=Symbol(void 0),Lr=Symbol(void 0),_i=[];let Re=null;function wr(e=!1){_i.push(Re=e?null:[])}function rd(){_i.pop(),Re=_i[_i.length-1]||null}let hr=1;function Ss(e){hr+=e}function ro(e){return e.dynamicChildren=hr>0?Re||Xe:null,rd(),hr>0&&Re&&Re.push(e),e}function Nn(e,t,i,r,n,s){return ro(ve(e,t,i,r,n,s,!0))}function nd(e,t,i,r,n){return ro(se(e,t,i,r,n,!0))}function no(e){return e?e.__v_isVNode===!0:!1}function Te(e,t){return e.type===t.type&&e.key===t.key}const xr="__vInternal",so=({key:e})=>e!=null?e:null,tr=({ref:e,ref_key:t,ref_for:i})=>e!=null?St(e)||Ct(e)||Z(e)?{i:Ht,r:e,k:t,f:!!i}:e:null;function ve(e,t=null,i=null,r=0,n=null,s=e===Dt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&so(t),ref:t&&tr(t),scopeId:Fa,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null};return o?(Bn(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=St(i)?8:16),hr>0&&!a&&Re&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Re.push(l),l}const se=sd;function sd(e,t=null,i=null,r=0,n=null,s=!1){if((!e||e===id)&&(e=oe),no(e)){const o=Qe(e,t,!0);return i&&Bn(o,i),o}if(bd(e)&&(e=e.__vccOpts),t){t=ad(t);let{class:o,style:l}=t;o&&!St(o)&&(t.class=Nt(o)),yt(l)&&(Ea(l)&&!Q(l)&&(l=Pt({},l)),t.style=gr(l))}const a=St(e)?1:xh(e)?128:ed(e)?64:yt(e)?4:Z(e)?2:0;return ve(e,t,i,r,n,a,s,!0)}function ad(e){return e?Ea(e)||xr in e?Pt({},e):e:null}function Qe(e,t,i=!1){const{props:r,ref:n,patchFlag:s,children:a}=e,o=t?od(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&so(o),ref:t&&t.ref?i&&n?Q(n)?n.concat(tr(t)):[n,tr(t)]:tr(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Dt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qe(e.ssContent),ssFallback:e.ssFallback&&Qe(e.ssFallback),el:e.el,anchor:e.anchor}}function Fn(e=" ",t=0){return se(Dn,null,e,t)}function qt(e){return e==null||typeof e=="boolean"?se(oe):Q(e)?se(Dt,null,e.slice()):typeof e=="object"?pe(e):se(Dn,null,String(e))}function pe(e){return e.el===null||e.memo?e:Qe(e)}function Bn(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Q(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Bn(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!(xr in t)?t._ctx=Ht:n===3&&Ht&&(Ht.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:Ht},i=32):(t=String(t),r&64?(i=16,t=[Fn(t)]):i=8);e.children=t,e.shapeFlag|=i}function od(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=Nt([t.class,r.class]));else if(n==="style")t.style=gr([t.style,r.style]);else if(pr(n)){const s=t[n],a=r[n];a&&s!==a&&!(Q(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=r[n])}return t}function Kt(e,t,i,r=null){Wt(e,t,7,[i,r])}function Hn(e,t,i={},r,n){if(Ht.isCE)return se("slot",t==="default"?null:{name:t},r&&r());let s=e[t];s&&s._c&&(s._d=!1),wr();const a=s&&ao(s(i)),o=nd(Dt,{key:i.key||`_${t}`},a||(r?r():[]),a&&e._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function ao(e){return e.some(t=>no(t)?!(t.type===oe||t.type===Dt&&!ao(t.children)):!0)?e:null}const sn=e=>e?oo(e)?Wn(e)||e.proxy:sn(e.parent):null,dr=Pt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>sn(e.parent),$root:e=>sn(e.root),$emit:e=>e.emit,$options:e=>Ka(e),$forceUpdate:e=>()=>Oa(e.update),$nextTick:e=>Rn.bind(e.proxy),$watch:e=>Th.bind(e)}),ld={get({_:e},t){const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return s[t]}else{if(r!==ft&&it(r,t))return a[t]=1,r[t];if(n!==ft&&it(n,t))return a[t]=2,n[t];if((h=e.propsOptions[0])&&it(h,t))return a[t]=3,s[t];if(i!==ft&&it(i,t))return a[t]=4,i[t];tn&&(a[t]=0)}}const d=dr[t];let f,u;if(d)return t==="$attrs"&&Lt(e,"get",t),d(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(i!==ft&&it(i,t))return a[t]=4,i[t];if(u=l.config.globalProperties,it(u,t))return u[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:s}=e;return n!==ft&&it(n,t)?(n[t]=i,!0):r!==ft&&it(r,t)?(r[t]=i,!0):it(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:s}},a){let o;return!!i[a]||e!==ft&&it(e,a)||t!==ft&&it(t,a)||(o=s[0])&&it(o,a)||it(r,a)||it(dr,a)||it(n.config.globalProperties,a)},defineProperty(e,t,i){return i.get!=null?this.set(e,t,i.get(),null):i.value!=null&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},hd=eo();let dd=0;function fd(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||hd,s={uid:dd++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Tl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qa(r,n),emitsOptions:Na(r,n),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:r.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=_h.bind(null,s),e.ce&&e.ce(s),s}let Tt=null;const zn=()=>Tt||Ht,Ze=e=>{Tt=e,e.scope.on()},ke=()=>{Tt&&Tt.scope.off(),Tt=null};function oo(e){return e.vnode.shapeFlag&4}let Pi=!1;function ud(e,t=!1){Pi=t;const{props:i,children:r}=e.vnode,n=oo(e);$h(e,i,n,t),Kh(e,r);const s=n?cd(e,t):void 0;return Pi=!1,s}function cd(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Ta(new Proxy(e.ctx,ld));const{setup:r}=i;if(r){const n=e.setupContext=r.length>1?pd(e):null;Ze(e),Ie();const s=ne(r,e,0,[e.props,n]);if(Le(),ke(),ha(s)){if(s.then(ke,ke),t)return s.then(a=>{Cs(e,a,t)}).catch(a=>{yr(a,e,0)});e.asyncDep=s}else Cs(e,s,t)}else lo(e,t)}function Cs(e,t,i){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:yt(t)&&(e.setupState=Ma(t)),lo(e,i)}let ws;function lo(e,t,i){const r=e.type;if(!e.render){if(!t&&ws&&!r.render){const n=r.template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,h=Pt(Pt({isCustomElement:s,delimiters:o},a),l);r.render=ws(n,h)}}e.render=r.render||zt}Ze(e),Ie(),Hh(e),Le(),ke()}function gd(e){return new Proxy(e.attrs,{get(t,i){return Lt(e,"get","$attrs"),t[i]}})}function pd(e){const t=r=>{e.exposed=r||{}};let i;return{get attrs(){return i||(i=gd(e))},slots:e.slots,emit:e.emit,expose:t}}function Wn(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ma(Ta(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in dr)return dr[i](e)}}))}const vd=/(?:^|[-_])(\w)/g,md=e=>e.replace(vd,t=>t.toUpperCase()).replace(/[-_]/g,"");function _d(e){return Z(e)&&e.displayName||e.name}function ho(e,t,i=!1){let r=_d(t);if(!r&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(r=n[1])}if(!r&&e&&e.parent){const n=s=>{for(const a in s)if(s[a]===t)return a};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?md(r):i?"App":"Anonymous"}function bd(e){return Z(e)&&"__vccOpts"in e}const Ft=(e,t)=>oh(e,t,Pi),yd="3.2.31",Sd="http://www.w3.org/2000/svg",Pe=typeof document!="undefined"?document:null,xs=Pe&&Pe.createElement("template"),Cd={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t?Pe.createElementNS(Sd,e):Pe.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>Pe.createTextNode(e),createComment:e=>Pe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,r,n,s){const a=i?i.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{xs.innerHTML=r?`<svg>${e}</svg>`:e;const o=xs.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function wd(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function xd(e,t,i){const r=e.style,n=St(i);if(i&&!n){for(const s in i)an(r,s,i[s]);if(t&&!St(t))for(const s in t)i[s]==null&&an(r,s,"")}else{const s=r.display;n?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const Es=/\s*!important$/;function an(e,t,i){if(Q(i))i.forEach(r=>an(e,t,r));else if(t.startsWith("--"))e.setProperty(t,i);else{const r=Ed(e,t);Es.test(i)?e.setProperty(Oe(r),i.replace(Es,""),"important"):e[r]=i}}const Ts=["Webkit","Moz","ms"],Gr={};function Ed(e,t){const i=Gr[t];if(i)return i;let r=Je(t);if(r!=="filter"&&r in e)return Gr[t]=r;r=ua(r);for(let n=0;n<Ts.length;n++){const s=Ts[n]+r;if(s in e)return Gr[t]=s}return t}const Ps="http://www.w3.org/1999/xlink";function Td(e,t,i,r,n){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Ps,t.slice(6,t.length)):e.setAttributeNS(Ps,t,i);else{const s=cl(t);i==null||s&&!sa(i)?e.removeAttribute(t):e.setAttribute(t,s?"":i)}}function Pd(e,t,i,r,n,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,n,s),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const o=i==null?"":i;(e.value!==o||e.tagName==="OPTION")&&(e.value=o),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const o=typeof e[t];if(o==="boolean"){e[t]=sa(i);return}else if(i==null&&o==="string"){e[t]="",e.removeAttribute(t);return}else if(o==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let fr=Date.now,fo=!1;if(typeof window!="undefined"){fr()>document.createEvent("Event").timeStamp&&(fr=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);fo=!!(e&&Number(e[1])<=53)}let on=0;const Ad=Promise.resolve(),Md=()=>{on=0},Rd=()=>on||(Ad.then(Md),on=fr());function uo(e,t,i,r){e.addEventListener(t,i,r)}function kd(e,t,i,r){e.removeEventListener(t,i,r)}function Od(e,t,i,r,n=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=Id(t);if(r){const h=s[t]=Ld(r,n);uo(e,o,h,l)}else a&&(kd(e,o,a,l),s[t]=void 0)}}const As=/(?:Once|Passive|Capture)$/;function Id(e){let t;if(As.test(e)){t={};let i;for(;i=e.match(As);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[Oe(e.slice(2)),t]}function Ld(e,t){const i=r=>{const n=r.timeStamp||fr();(fo||n>=i.attached-1)&&Wt(Gd(r,i.value),t,5,[r])};return i.value=e,i.attached=Rd(),i}function Gd(e,t){if(Q(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const Ms=/^on[a-z]/,Dd=(e,t,i,r,n=!1,s,a,o,l)=>{t==="class"?wd(e,r,n):t==="style"?xd(e,i,r):pr(t)?_n(t)||Od(e,t,i,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Nd(e,t,r,n))?Pd(e,t,r,s,a,o,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Td(e,t,r,n))};function Nd(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Ms.test(t)&&Z(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Ms.test(t)&&St(i)?!1:t in e}const Fd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Mh.props;const Rs=e=>{const t=e.props["onUpdate:modelValue"];return Q(t)?i=>Qi(t,i):t},co={created(e,{value:t},i){e.checked=nr(t,i.props.value),e._assign=Rs(i),uo(e,"change",()=>{e._assign(Bd(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e._assign=Rs(r),t!==i&&(e.checked=nr(t,r.props.value))}};function Bd(e){return"_value"in e?e._value:e.value}const Hd=["ctrl","shift","alt","meta"],zd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Hd.some(i=>e[`${i}Key`]&&!t.includes(i))},ur=(e,t)=>(i,...r)=>{for(let n=0;n<t.length;n++){const s=zd[t[n]];if(s&&s(i,t))return}return e(i,...r)},Wd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},go=(e,t)=>i=>{if(!("key"in i))return;const r=Oe(i.key);if(t.some(n=>n===r||Wd[n]===r))return e(i)},Ud=Pt({patchProp:Dd},Cd);let ks;function Yd(){return ks||(ks=Qh(Ud))}const Mc=(...e)=>{const t=Yd().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=$d(r);if(!n)return;const s=t._component;!Z(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=i(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function $d(e){return St(e)?document.querySelector(e):e}function Xd(e){for(var t=-1,i=e==null?0:e.length,r={};++t<i;){var n=e[t];r[n[0]]=n[1]}return r}const Os=e=>typeof e=="boolean",Is=e=>typeof e=="number",Ls=Symbol(),Gs="__elPropsReservedKey";function po(e,t){if(!yt(e)||!!e[Gs])return e;const{values:i,required:r,default:n,type:s,validator:a}=e,o=i||a?h=>{let d=!1,f=[];if(i&&(f=Array.from(i),it(e,"default")&&f.push(n),d||(d=f.includes(h))),a&&(d||(d=a(h))),!d&&f.length>0){const u=[...new Set(f)].map(g=>JSON.stringify(g)).join(", ");lh(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${u}], got value ${JSON.stringify(h)}.`)}return d}:void 0,l={type:yt(s)&&Object.getOwnPropertySymbols(s).includes(Ls)?s[Ls]:s,required:!!r,validator:o,[Gs]:!0};return it(e,"default")&&(l.default=n),l}const Er=e=>Xd(Object.entries(e).map(([t,i])=>[t,po(i,t)])),Vd=(e,t)=>{if(e.install=i=>{for(const r of[e,...Object.values(t!=null?t:{})])i.component(r.name,r)},t)for(const[i,r]of Object.entries(t))e[i]=r;return e},vo=e=>(e.install=zt,e);const Fi={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Un="update:modelValue",Kd=["default","small","large"],jd=Symbol(),Yn=Symbol("formContextKey"),mo=Symbol("formItemContextKey"),_o=Symbol("radioGroupKey"),bo=e=>{const t=zn();return Ft(()=>{var i,r;return(r=(i=t.proxy)==null?void 0:i.$props[e])!=null?r:void 0})},Ds=Ei();function yo(e,t=void 0){const i=zn()?Qt(jd,Ds):Ds;return e?Ft(()=>{var r,n;return(n=(r=i.value)==null?void 0:r[e])!=null?n:t}):i}const So=po({type:String,values:Kd,required:!1}),qd=(e,t={})=>{const i=Ei(void 0),r=t.prop?i:bo("size"),n=t.global?i:yo("size"),s=t.form?{size:void 0}:Qt(Yn,void 0),a=t.formItem?{size:void 0}:Qt(mo,void 0);return Ft(()=>r.value||jt(e)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||n.value||"default")},Jd=e=>{const t=bo("disabled"),i=Qt(Yn,void 0);return Ft(()=>t.value||jt(e)||(i==null?void 0:i.disabled)||!1)},Qd=()=>{const e=Qt(Yn,void 0),t=Qt(mo,void 0);return{form:e,formItem:t}},Zd="el",tf="is-",xe=(e,t,i,r,n)=>{let s=`${e}-${t}`;return i&&(s+=`-${i}`),r&&(s+=`__${r}`),n&&(s+=`--${n}`),s},$n=e=>{const t=yo("namespace"),i=Ft(()=>t.value||Zd);return{namespace:i,b:(f="")=>xe(jt(i),e,f,"",""),e:f=>f?xe(jt(i),e,"",f,""):"",m:f=>f?xe(jt(i),e,"","",f):"",be:(f,u)=>f&&u?xe(jt(i),e,f,u,""):"",em:(f,u)=>f&&u?xe(jt(i),e,"",f,u):"",bm:(f,u)=>f&&u?xe(jt(i),e,f,"",u):"",bem:(f,u,g)=>f&&u&&g?xe(jt(i),e,f,u,g):"",is:(f,...u)=>{const g=u.length>=1?u[0]:!0;return f&&g?`${tf}${f}`:""}}};var Xn=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i};const Co=Er({size:So,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),ef=Er(Oi(ki({},Co),{modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean})),wo={[Un]:e=>St(e)||Is(e)||Os(e),change:e=>St(e)||Is(e)||Os(e)},xo=(e,t)=>{const i=Ei(),r=Qt(_o,void 0),n=Ft(()=>!!r),s=Ft({get(){return n.value?r.modelValue:e.modelValue},set(d){n.value?r.changeEvent(d):t(Un,d),i.value.checked=e.modelValue===e.label}}),a=qd(Ft(()=>r==null?void 0:r.size)),o=Jd(Ft(()=>r==null?void 0:r.disabled)),l=Ei(!1),h=Ft(()=>o.value||n.value&&s.value!==e.label?-1:0);return{radioRef:i,isGroup:n,radioGroup:r,focus:l,size:a,disabled:o,tabIndex:h,modelValue:s}},rf=In({name:"ElRadio",props:ef,emits:wo,setup(e,{emit:t}){const i=$n("radio"),{radioRef:r,isGroup:n,focus:s,size:a,disabled:o,tabIndex:l,modelValue:h}=xo(e,t);function d(){Rn(()=>t("change",h.value))}return{ns:i,focus:s,isGroup:n,modelValue:h,tabIndex:l,size:a,disabled:o,radioRef:r,handleChange:d}}}),nf=["aria-checked","aria-disabled","tabindex"],sf=["value","name","disabled"];function af(e,t,i,r,n,s){return wr(),Nn("label",{class:Nt([e.ns.b(),e.ns.is("disabled",e.disabled),e.ns.is("focus",e.focus),e.ns.is("bordered",e.border),e.ns.is("checked",e.modelValue===e.label),e.ns.m(e.size)]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[5]||(t[5]=go(ur(a=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[ve("span",{class:Nt([e.ns.e("input"),e.ns.is("disabled",e.disabled),e.ns.is("checked",e.modelValue===e.label)])},[ve("span",{class:Nt(e.ns.e("inner"))},null,2),to(ve("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=a=>e.modelValue=a),class:Nt(e.ns.e("original")),value:e.label,type:"radio","aria-hidden":"true",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=a=>e.focus=!0),onBlur:t[2]||(t[2]=a=>e.focus=!1),onChange:t[3]||(t[3]=(...a)=>e.handleChange&&e.handleChange(...a))},null,42,sf),[[co,e.modelValue]])],2),ve("span",{class:Nt(e.ns.e("label")),onKeydown:t[4]||(t[4]=ur(()=>{},["stop"]))},[Hn(e.$slots,"default",{},()=>[Fn(aa(e.label),1)])],34)],42,nf)}var of=Xn(rf,[["render",af]]);const lf=Er(Oi(ki({},Co),{name:{type:String,default:""}})),hf=In({name:"ElRadioButton",props:lf,setup(e,{emit:t}){const i=$n("radio"),{radioRef:r,isGroup:n,focus:s,size:a,disabled:o,tabIndex:l,modelValue:h,radioGroup:d}=xo(e,t),f=Ft(()=>({backgroundColor:(d==null?void 0:d.fill)||"",borderColor:(d==null?void 0:d.fill)||"",boxShadow:d!=null&&d.fill?`-1px 0 0 0 ${d.fill}`:"",color:(d==null?void 0:d.textColor)||""}));return{ns:i,isGroup:n,size:a,disabled:o,tabIndex:l,modelValue:h,focus:s,activeStyle:f,radioRef:r}}}),df=["aria-checked","aria-disabled","tabindex"],ff=["value","name","disabled"];function uf(e,t,i,r,n,s){return wr(),Nn("label",{class:Nt([e.ns.b("button"),e.ns.is("active",e.modelValue===e.label),e.ns.is("disabled",e.disabled),e.ns.is("focus",e.focus),e.ns.bm("button",e.size)]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[4]||(t[4]=go(ur(a=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[to(ve("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=a=>e.modelValue=a),class:Nt(e.ns.be("button","original-radio")),value:e.label,type:"radio",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=a=>e.focus=!0),onBlur:t[2]||(t[2]=a=>e.focus=!1)},null,42,ff),[[co,e.modelValue]]),ve("span",{class:Nt(e.ns.be("button","inner")),style:gr(e.modelValue===e.label?e.activeStyle:{}),onKeydown:t[3]||(t[3]=ur(()=>{},["stop"]))},[Hn(e.$slots,"default",{},()=>[Fn(aa(e.label),1)])],38)],42,df)}var Eo=Xn(hf,[["render",uf]]);const cf=Er({size:So,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},textColor:{type:String,default:""}}),gf=wo,pf=In({name:"ElRadioGroup",props:cf,emits:gf,setup(e,t){const i=$n("radio"),r=Ei(),{formItem:n}=Qd(),s=o=>{t.emit(Un,o),Rn(()=>t.emit("change",o))},a=o=>{if(!r.value)return;const l=o.target,h=l.nodeName==="INPUT"?"[type=radio]":"[role=radio]",d=r.value.querySelectorAll(h),f=d.length,u=Array.from(d).indexOf(l),g=r.value.querySelectorAll("[role=radio]");let c=null;switch(o.code){case Fi.left:case Fi.up:o.stopPropagation(),o.preventDefault(),c=u===0?f-1:u-1;break;case Fi.right:case Fi.down:o.stopPropagation(),o.preventDefault(),c=u===f-1?0:u+1;break}c!==null&&(g[c].click(),g[c].focus())};return Ln(()=>{const o=r.value.querySelectorAll("[type=radio]"),l=o[0];!Array.from(o).some(h=>h.checked)&&l&&(l.tabIndex=0)}),Ba(_o,br(Oi(ki({},rh(e)),{changeEvent:s}))),Zi(()=>e.modelValue,()=>n==null?void 0:n.validate("change").catch(o=>void 0)),{ns:i,radioGroupRef:r,handleKeydown:a}}});function vf(e,t,i,r,n,s){return wr(),Nn("div",{ref:"radioGroupRef",class:Nt(e.ns.b("group")),role:"radiogroup",onKeydown:t[0]||(t[0]=(...a)=>e.handleKeydown&&e.handleKeydown(...a))},[Hn(e.$slots,"default")],34)}var To=Xn(pf,[["render",vf]]);Vd(of,{RadioButton:Eo,RadioGroup:To});const Rc=vo(To),kc=vo(Eo);var mf=Math.PI/180;function _f(){return typeof window!="undefined"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const je=typeof global!="undefined"?global:typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"?self:{},U={_global:je,version:"8.3.3",isBrowser:_f(),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle(e){return U.angleDeg?e*mf:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return U.DD.isDragging},isDragReady(){return!!U.DD.node},document:je.document,_injectGlobal(e){je.Konva=e}},vt=e=>{U[e.prototype.getClassName()]=e};U._injectGlobal(U);class Ot{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Ot(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){var i=Math.cos(t),r=Math.sin(t),n=this.m[0]*i+this.m[2]*r,s=this.m[1]*i+this.m[3]*r,a=this.m[0]*-r+this.m[2]*i,o=this.m[1]*-r+this.m[3]*i;return this.m[0]=n,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){var r=this.m[0]+this.m[2]*i,n=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=n,this.m[2]=s,this.m[3]=a,this}multiply(t){var i=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,r=-this.m[1]*t,n=-this.m[2]*t,s=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}setAbsolutePosition(t,i){var r=this.m[0],n=this.m[1],s=this.m[2],a=this.m[3],o=this.m[4],l=this.m[5],h=(r*(i-l)-n*(t-o))/(r*a-n*s),d=(t-o-s*h)/r;return this.translate(d,h)}decompose(){var t=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],s=this.m[4],a=this.m[5],o=t*n-i*r;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){var h=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/h):-Math.acos(t/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(t*r+i*n)/o,l.skewY=0}else if(r!=0||n!=0){var d=Math.sqrt(r*r+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-r/d):-Math.acos(r/d)),l.scaleX=o/d,l.scaleY=d,l.skewX=0,l.skewY=(t*r+i*n)/o}return l.rotation=b._getRotation(l.rotation),l}}var bf="[object Array]",yf="[object Number]",Sf="[object String]",Cf="[object Boolean]",wf=Math.PI/180,xf=180/Math.PI,Dr="#",Ef="",Tf="0",Pf="Konva warning: ",Ns="Konva error: ",Af="rgb(",Nr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Mf=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Bi=[];const Rf=typeof requestAnimationFrame!="undefined"&&requestAnimationFrame||function(e){setTimeout(e,60)},b={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===bf},_isNumber(e){return Object.prototype.toString.call(e)===yf&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===Sf},_isBoolean(e){return Object.prototype.toString.call(e)===Cf},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;var t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){Bi.push(e),Bi.length===1&&Rf(function(){const t=Bi;Bi=[],t.forEach(function(i){i()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var i=b.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace(Dr,Ef);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){for(var e=(Math.random()*16777215<<0).toString(16);e.length<6;)e=Tf+e;return Dr+e},getRGB(e){var t;return e in Nr?(t=Nr[e],{r:t[0],g:t[1],b:t[2]}):e[0]===Dr?this._hexToRgb(e.substring(1)):e.substr(0,4)===Af?(t=Mf.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",b._namedColorToRBA(e)||b._hex3ColorToRGBA(e)||b._hex6ColorToRGBA(e)||b._rgbColorToRGBA(e)||b._rgbaColorToRGBA(e)||b._hslColorToRGBA(e)},_namedColorToRBA(e){var t=Nr[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];var t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];var t=e.split(/ *, */).map((i,r)=>i.slice(-1)==="%"?r===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),r=Number(i[0])/360,n=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(n===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+n):a=s+n-s*n;const h=2*s-a,d=[0,0,0];for(let f=0;f<3;f++)o=r+1/3*-(f-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,d[f]=l*255;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){var t={};for(var i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*wf},radToDeg(e){return e*xf},_degToRad(e){return b.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),b.degToRad(e)},_radToDeg(e){return b.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),b.radToDeg(e)},_getRotation(e){return U.angleDeg?b.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(Ns+e)},error(e){console.error(Ns+e)},warn(e){!U.showWarnings||console.warn(Pf+e)},each(e,t){for(var i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,r,n,s){var a,o,l,h=(e-i)*(e-i)+(t-r)*(t-r);if(h==0)a=e,o=t,l=(n-i)*(n-i)+(s-r)*(s-r);else{var d=((n-e)*(i-e)+(s-t)*(r-t))/h;d<0?(a=e,o=t,l=(e-n)*(e-n)+(t-s)*(t-s)):d>1?(a=i,o=r,l=(i-n)*(i-n)+(r-s)*(r-s)):(a=e+d*(i-e),o=t+d*(r-t),l=(a-n)*(a-n)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(e,t,i){var r=b.cloneObject(e),n=Number.MAX_VALUE;return t.forEach(function(s,a){if(!(!i&&a===t.length-1)){var o=t[(a+1)%t.length],l=b._getProjectionToSegment(s.x,s.y,o.x,o.y,e.x,e.y),h=l[0],d=l[1],f=l[2];f<n&&(r.x=h,r.y=d,n=f)}}),r},_prepareArrayForTween(e,t,i){var r,n=[],s=[];if(e.length>t.length){var a=t;t=e,e=a}for(r=0;r<e.length;r+=2)n.push({x:e[r],y:e[r+1]});for(r=0;r<t.length;r+=2)s.push({x:t[r],y:t[r+1]});var o=[];return s.forEach(function(l){var h=b._getProjectionToLine(l,n,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(e){var t;e.visitedByCircularReferenceRemoval=!0;for(var i in e)if(!!(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object")){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||b._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(b._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999}};function be(e){return b._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||b._isBoolean(e)?e:Object.prototype.toString.call(e)}function Po(e){return e>255?255:e<0?0:Math.round(e)}function R(){if(U.isUnminified)return function(e,t){return b._isNumber(e)||b.warn(be(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Ao(e){if(U.isUnminified)return function(t,i){let r=b._isNumber(t),n=b._isArray(t)&&t.length==e;return!r&&!n&&b.warn(be(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function Vn(){if(U.isUnminified)return function(e,t){var i=b._isNumber(e),r=e==="auto";return i||r||b.warn(be(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function ei(){if(U.isUnminified)return function(e,t){return b._isString(e)||b.warn(be(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function Mo(){if(U.isUnminified)return function(e,t){const i=b._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||r||b.warn(be(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function kf(){if(U.isUnminified)return function(e,t){return b._isArray(e)?e.forEach(function(i){b._isNumber(i)||b.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):b.warn(be(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.'),e}}function $t(){if(U.isUnminified)return function(e,t){var i=e===!0||e===!1;return i||b.warn(be(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function Of(e){if(U.isUnminified)return function(t,i){return b.isObject(t)||b.warn(be(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}var ni="get",si="set";const p={addGetterSetter(e,t,i,r,n){p.addGetter(e,t,i),p.addSetter(e,t,r,n),p.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){var r=ni+b._capitalize(t);e.prototype[r]=e.prototype[r]||function(){var n=this.attrs[t];return n===void 0?i:n}},addSetter(e,t,i,r){var n=si+b._capitalize(t);e.prototype[n]||p.overWriteSetter(e,t,i,r)},overWriteSetter(e,t,i,r){var n=si+b._capitalize(t);e.prototype[n]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,t)),this._setAttr(t,s),r&&r.call(this),this}},addComponentsGetterSetter(e,t,i,r,n){var s=i.length,a=b._capitalize,o=ni+a(t),l=si+a(t),h,d;e.prototype[o]=function(){var u={};for(h=0;h<s;h++)d=i[h],u[d]=this.getAttr(t+a(d));return u};var f=Of(i);e.prototype[l]=function(u){var g=this.attrs[t],c;r&&(u=r.call(this,u)),f&&f.call(this,u,t);for(c in u)!u.hasOwnProperty(c)||this._setAttr(t+a(c),u[c]);return this._fireChangeEvent(t,g,u),n&&n.call(this),this},p.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var i=b._capitalize(t),r=si+i,n=ni+i;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(e,t,i,r){b.error("Adding deprecated "+t);var n=ni+b._capitalize(t),s=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[n]=function(){b.error(s);var a=this.attrs[t];return a===void 0?i:a},p.addSetter(e,t,r,function(){b.error(s)}),p.addOverloadedGetterSetter(e,t)},backCompat(e,t){b.each(t,function(i,r){var n=e.prototype[r],s=ni+b._capitalize(i),a=si+b._capitalize(i);function o(){n.apply(this,arguments),b.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}e.prototype[i]=o,e.prototype[s]=o,e.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function If(e){var t=[],i=e.length,r=b,n,s;for(n=0;n<i;n++)s=e[n],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),t.push(s);return t}var Fs=",",Lf="(",Gf=")",Df="([",Nf="])",Ff=";",Bf="()",Hf="=",Bs=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],zf=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Wf=100;class Tr{constructor(t){this.canvas=t,this._context=t._canvas.getContext("2d"),U.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){var r=this.traceArr,n=r.length,s="",a,o,l,h;for(a=0;a<n;a++)o=r[a],l=o.method,l?(h=o.args,s+=l,t?s+=Bf:b._isArray(h[0])?s+=Df+h.join(Fs)+Nf:(i&&(h=h.map(d=>typeof d=="number"?Math.floor(d):d)),s+=Lf+h.join(Fs)+Gf)):(s+=o.property,t||(s+=Hf+o.val)),s+=Ff;return s}clearTrace(){this.traceArr=[]}_trace(t){var i=this.traceArr,r;i.push(t),r=i.length,r>=Wf&&i.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){var i=t.getLineCap();i&&this.setAttr("lineCap",i)}_applyOpacity(t){var i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){var i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,r,n,s,a){this._context.arc(t,i,r,n,s,a)}arcTo(t,i,r,n,s){this._context.arcTo(t,i,r,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,r,n,s,a){this._context.bezierCurveTo(t,i,r,n,s,a)}clearRect(t,i,r,n){this._context.clearRect(t,i,r,n)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,i){var r=arguments;if(r.length===2)return this._context.createImageData(t,i);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,r,n){return this._context.createLinearGradient(t,i,r,n)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,r,n,s,a){return this._context.createRadialGradient(t,i,r,n,s,a)}drawImage(t,i,r,n,s,a,o,l,h){var d=arguments,f=this._context;d.length===3?f.drawImage(t,i,r):d.length===5?f.drawImage(t,i,r,n,s):d.length===9&&f.drawImage(t,i,r,n,s,a,o,l,h)}ellipse(t,i,r,n,s,a,o,l){this._context.ellipse(t,i,r,n,s,a,o,l)}isPointInPath(t,i){return this._context.isPointInPath(t,i)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,i,r,n){this._context.fillRect(t,i,r,n)}strokeRect(t,i,r,n){this._context.strokeRect(t,i,r,n)}fillText(t,i,r,n){n?this._context.fillText(t,i,r,n):this._context.fillText(t,i,r)}measureText(t){return this._context.measureText(t)}getImageData(t,i,r,n){return this._context.getImageData(t,i,r,n)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,r,n){this._context.rect(t,i,r,n)}putImageData(t,i,r){this._context.putImageData(t,i,r)}quadraticCurveTo(t,i,r,n){this._context.quadraticCurveTo(t,i,r,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,r,n,s,a){this._context.setTransform(t,i,r,n,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,r,n){this._context.strokeText(t,i,r,n)}transform(t,i,r,n,s,a){this._context.transform(t,i,r,n,s,a)}translate(t,i){this._context.translate(t,i)}_enableTrace(){var t=this,i=Bs.length,r=this.setAttr,n,s,a=function(o){var l=t[o],h;t[o]=function(){return s=If(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:s}),h}};for(n=0;n<i;n++)a(Bs[n]);t.setAttr=function(){r.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;var r=!i||i==="source-over";r||this.setAttr("globalCompositeOperation",i)}}zf.forEach(function(e){Object.defineProperty(Tr.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Uf extends Tr{_fillColor(t){var i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){var i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){var i=t.fill(),r=t.getFillPriority();if(i&&r==="color"){this._fillColor(t);return}var n=t.getFillPatternImage();if(n&&r==="pattern"){this._fillPattern(t);return}var s=t.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(t);return}var a=t.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):n?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){var i=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,r.x,r.y);if(n){for(var a=0;a<n.length;a+=2)s.addColorStop(n[a],n[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var i=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var i,r,n,s=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,o=(n=t.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),d=l.x*h,f=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(d),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*d),this.setAttr("shadowOffsetY",o.y*f)}}class Yf extends Tr{_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var i=t.getStrokeScaleEnabled();if(!i){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}var Hi;function $f(){if(Hi)return Hi;var e=b.createCanvasElement(),t=e.getContext("2d");return Hi=function(){var i=U._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/r}(),Hi}class Pr{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=t||{},r=i.pixelRatio||U.pixelRatio||$f();this.pixelRatio=r,this._canvas=b.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(n){return b.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}p.addGetterSetter(Pr,"pixelRatio",void 0,R());class qe extends Pr{constructor(t={width:0,height:0}){super(t);this.context=new Uf(this),this.setSize(t.width,t.height)}}class Kn extends Pr{constructor(t={width:0,height:0}){super(t);this.hitCanvas=!0,this.context=new Yf(this),this.setSize(t.width,t.height)}}const st={get isDragging(){var e=!1;return st._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){var e;return st._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];st._dragElements.forEach((i,r)=>{const{node:n}=i,s=n.getStage();s.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=b._getFirstPointerId(e));const a=s._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=n.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(n.startDrag({evt:e}),!n.isDragging()))return}n._setDragPosition(e,i),t.push(n)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){st._dragElements.forEach(t=>{const{node:i}=t,r=i.getStage();if(e&&r.setPointersPositions(e),!r._changedPointerPositions.find(a=>a.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(st.justDragged=!0,U._mouseListenClick=!1,U._touchListenClick=!1,U._pointerListenClick=!1,t.dragStatus="stopped");const s=t.node.getLayer()||t.node instanceof U.Stage&&t.node;s&&s.batchDraw()})},_endDragAfter(e){st._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&st._dragElements.delete(i)})}};U.isBrowser&&(window.addEventListener("mouseup",st._endDragBefore,!0),window.addEventListener("touchend",st._endDragBefore,!0),window.addEventListener("mousemove",st._drag),window.addEventListener("touchmove",st._drag),window.addEventListener("mouseup",st._endDragAfter,!1),window.addEventListener("touchend",st._endDragAfter,!1));var er="absoluteOpacity",zi="allEventListeners",ie="absoluteTransform",Hs="absoluteScale",ai="canvas",Xf="Change",Vf="children",Kf="konva",ln="listening",zs="mouseenter",Ws="mouseleave",Us="set",Ys="Shape",ir=" ",$s="stage",ge="transform",jf="Stage",hn="visible",qf=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ir);let Jf=1;class k{constructor(t){this._id=Jf++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===ge||t===ie)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){var r=this._cache.get(t),n=t===ge||t===ie,s=r===void 0||n&&r.dirty===!0;return s&&(r=i.call(this),this._cache.set(t,r)),r}_calculate(t,i,r){if(!this._attachedDepsListeners.get(t)){const n=i.map(s=>s+"Change.konva").join(ir);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(ai)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ie&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(ai),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var i=t||{},r={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(i.width||r.width),s=Math.ceil(i.height||r.height),a=i.pixelRatio,o=i.x===void 0?r.x:i.x,l=i.y===void 0?r.y:i.y,h=i.offset||0,d=i.drawBorder||!1,f=i.hitCanvasPixelRatio||1;if(!n||!s){b.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}n+=h*2,s+=h*2,o-=h,l-=h;var u=new qe({pixelRatio:a,width:n,height:s}),g=new qe({pixelRatio:a,width:0,height:0}),c=new Kn({pixelRatio:f,width:n,height:s}),y=u.getContext(),m=c.getContext();return c.isCache=!0,u.isCache=!0,this._cache.delete(ai),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(u.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),y.save(),m.save(),y.translate(-o,-l),m.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(er),this._clearSelfAndDescendantCache(Hs),this.drawScene(u,this),this.drawHit(c,this),this._isUnderCache=!1,y.restore(),m.restore(),d&&(y.save(),y.beginPath(),y.rect(0,0,n,s),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(ai,{scene:u,filter:g,hit:c,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(ai)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n,s,a,o,l=this.getAbsoluteTransform(i);return r.forEach(function(h){var d=l.point(h);n===void 0&&(n=a=d.x,s=o=d.y),n=Math.min(n,d.x),s=Math.min(s,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),{x:n,y:s,width:a-n,height:o-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()}_drawCachedHitCanvas(t){var i=this._getCanvasCache(),r=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),i=this._getCanvasCache(),r=i.scene,n=i.filter,s=n.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var d=r.pixelRatio;n.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/d,r.getHeight()/d),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){b.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(f){b.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return n}return r}on(t,i){if(this._cache&&this._cache.delete(zi),arguments.length===3)return this._delegate.apply(this,arguments);var r=t.split(ir),n=r.length,s,a,o,l,h;for(s=0;s<n;s++)a=r[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){var r=(t||"").split(ir),n=r.length,s,a,o,l,h,d;if(this._cache&&this._cache.delete(zi),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<n;s++)if(o=r[s],l=o.split("."),h=l[0],d=l[1],h)this.eventListeners[h]&&this._off(h,d,i);else for(a in this.eventListeners)this._off(a,d,i);return this}dispatchEvent(t){var i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(r){i.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,r){var n=this;this.on(t,function(s){for(var a=s.target.findAncestors(i,!0,n),o=0;o<a.length;o++)s=b.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),st._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ie),this._clearSelfAndDescendantCache(er),this._clearSelfAndDescendantCache(Hs),this._clearSelfAndDescendantCache($s),this._clearSelfAndDescendantCache(hn),this._clearSelfAndDescendantCache(ln)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(t){var i="get"+b._capitalize(t);return b._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),i=[];t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var i,r;if(!t)return this;for(i in t)i!==Vf&&(r=Us+b._capitalize(i),b._isFunction(this[r])?this[r](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(ln,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(hn,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),n=!1;st._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(n=!0)});var s=!i&&!U.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),i=this,r=0,n,s,a,o;function l(h){for(n=[],s=h.length,a=0;a<s;a++)o=h[a],r++,o.nodeType!==Ys&&(n=n.concat(o.getChildren().slice())),o._id===i._id&&(a=s);n.length>0&&n[0].getDepth()<=t&&l(n)}return i.nodeType!==jf&&l(i.getStage().getChildren()),r}getDepth(){for(var t=0,i=this.parent;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ge),this._clearSelfAndDescendantCache(ie)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(t){let i=!1,r=this.parent;for(;r;){if(r.isCached()){i=!0;break}r=r.parent}i&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),s=new Ot,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(ge);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(ge),this._clearSelfAndDescendantCache(ie),this}_setTransform(t){var i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var i=t.x,r=t.y,n=this.x(),s=this.y();return i!==void 0&&(n+=i),r!==void 0&&(s+=r),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(t,i){var r=[],n=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(r.unshift(this);n&&(!i||n._id!==i._id);)r.unshift(n),n=n.parent;for(s=r.length,a=0;a<s;a++)t(r[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return b.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return b.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return b.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return b.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return b.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&b.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(er,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},i=this.getAttrs(),r,n,s,a,o;t.attrs={};for(r in i)n=i[r],o=b.isObject(n)&&!b._isPlainObject(n)&&!b._isArray(n),!o&&(s=typeof this[r]=="function"&&this[r],delete i[r],a=s?s.call(this):null,i[r]=n,a!==n&&(t.attrs[r]=n));return t.className=this.getClassName(),b._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,r){var n=[];i&&this._isMatch(t)&&n.push(this);for(var s=this.parent;s;){if(s===r)return n;s._isMatch(t)&&n.push(s),s=s.parent}return n}isAncestorOf(t){return!1}findAncestor(t,i,r){return this.findAncestors(t,i,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var i=t.replace(/ /g,"").split(","),r=i.length,n,s;for(n=0;n<r;n++)if(s=i[n],b.isValidSelector(s)||(b.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),b.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),b.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache($s,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,i={},r){return i.target=i.target||this,r?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ie,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var i;if(t)return i=new Ot,this._eachAncestorReverse(function(n){var s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;i=this._cache.get(ie)||new Ot,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var r=this.transformsEnabled();if(r==="all")i.multiply(this.getTransform());else if(r==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(n-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(t){for(var i=this;i;)i._isUnderCache&&(t=i),i=i.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ge,this._getTransform)}_getTransform(){var t,i,r=this._cache.get(ge)||new Ot;r.reset();var n=this.x(),s=this.y(),a=U.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,d=this.attrs.skewY||0,f=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return(n!==0||s!==0)&&r.translate(n,s),a!==0&&r.rotate(a),(h!==0||d!==0)&&r.skew(h,d),(o!==1||l!==1)&&r.scale(o,l),(f!==0||u!==0)&&r.translate(-1*f,-1*u),r.dirty=!1,r}clone(t){var i=b.cloneObject(this.attrs),r,n,s,a,o;for(r in t)i[r]=t[r];var l=new this.constructor(i);for(r in this.eventListeners)for(n=this.eventListeners[r],s=n.length,a=0;a<s;a++)o=n[a],o.name.indexOf(Kf)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(t){t=t||{};var i=this.getClientRect(),r=this.getStage(),n=t.x!==void 0?t.x:i.x,s=t.y!==void 0?t.y:i.y,a=t.pixelRatio||1,o=new qe({width:t.width||i.width||(r?r.width():0),height:t.height||i.height||(r?r.height():0),pixelRatio:a}),l=o.getContext();return l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var i=t.mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(i,r);return t.callback&&t.callback(n),n}toImage(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var i=t.callback;delete t.callback,b._urlToImage(this.toDataURL(t),function(r){i(r)})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():U.dragDistance}_off(t,i,r){var n=this.eventListeners[t],s,a,o;for(s=0;s<n.length;s++)if(a=n[s].name,o=n[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!r||r===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,i,r){this._fire(t+Xf,{oldVal:i,newVal:r})}addName(t){if(!this.hasName(t)){var i=this.name(),r=i?i+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const i=this.name();if(!i)return!1;var r=(i||"").split(/\s/g);return r.indexOf(t)!==-1}removeName(t){var i=(this.name()||"").split(/\s/g),r=i.indexOf(t);return r!==-1&&(i.splice(r,1),this.name(i.join(" "))),this}setAttr(t,i){var r=this[Us+b._capitalize(t)];return b._isFunction(r)?r.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(U.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){var r=this.attrs[t];r===i&&!b.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,i),this._requestDraw())}_setComponentAttr(t,i,r){var n;r!==void 0&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=r,this._fireChangeEvent(t,n,r))}_fireAndBubble(t,i,r){i&&this.nodeType===Ys&&(i.target=this);var n=(t===zs||t===Ws)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!n){this._fire(t,i);var s=(t===zs||t===Ws)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,i,r):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){let i=this._cache.get(zi);if(!i){i={};let n=Object.getPrototypeOf(this);for(;n;){if(!n.eventListeners){n=Object.getPrototypeOf(n);continue}for(var r in n.eventListeners){const s=n.eventListeners[r],a=i[r]||[];i[r]=s.concat(a)}n=Object.getPrototypeOf(n)}this._cache.set(zi,i)}return i[t]}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const r=this._getProtoListeners(t);if(r)for(var n=0;n<r.length;n++)r[n].handler.call(this,i);const s=this.eventListeners[t];if(s)for(var n=0;n<s.length;n++)s[n].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var i=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition(),s=r._getPointerById(i)||r._changedPointerPositions[0]||n;st._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){st._dragElements.has(this._id)||this._createDragElement(t);const r=st._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const r=this.getStage()._getPointerById(i.pointerId);if(!!r){var n={x:r.x-i.offset.x,y:r.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,n,t);a?n=a:b.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}stopDrag(t){const i=st._dragElements.get(this._id);i&&(i.dragStatus="stopped"),st._endDragBefore(t),st._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=st._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var i=t.evt.button!==void 0,r=!i||U.dragButtons.indexOf(t.evt.button)>=0;if(!!r&&!this.isDragging()){var n=!1;st._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const i=st._dragElements.get(this._id),r=i&&i.dragStatus==="dragging",n=i&&i.dragStatus==="ready";r?this.stopDrag():n&&st._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const r={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return b.haveIntersection(r,this.getClientRect())}static create(t,i){return b._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){var r=k.prototype.getClassName.call(t),n=t.children,s,a,o;i&&(t.attrs.container=i),U[r]||(b.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=U[r];if(s=new l(t.attrs),n)for(a=n.length,o=0;o<a;o++)s.add(k._createNode(n[o]));return s}}k.prototype.nodeType="Node";k.prototype._attrsAffectingSize=[];k.prototype.eventListeners={};k.prototype.on.call(k.prototype,qf,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ge),this._clearSelfAndDescendantCache(ie)});k.prototype.on.call(k.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(hn)});k.prototype.on.call(k.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ln)});k.prototype.on.call(k.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(er)});const ut=p.addGetterSetter;ut(k,"zIndex");ut(k,"absolutePosition");ut(k,"position");ut(k,"x",0,R());ut(k,"y",0,R());ut(k,"globalCompositeOperation","source-over",ei());ut(k,"opacity",1,R());ut(k,"name","",ei());ut(k,"id","",ei());ut(k,"rotation",0,R());p.addComponentsGetterSetter(k,"scale",["x","y"]);ut(k,"scaleX",1,R());ut(k,"scaleY",1,R());p.addComponentsGetterSetter(k,"skew",["x","y"]);ut(k,"skewX",0,R());ut(k,"skewY",0,R());p.addComponentsGetterSetter(k,"offset",["x","y"]);ut(k,"offsetX",0,R());ut(k,"offsetY",0,R());ut(k,"dragDistance",null,R());ut(k,"width",0,R());ut(k,"height",0,R());ut(k,"listening",!0,$t());ut(k,"preventDefault",!0,$t());ut(k,"filters",null,function(e){return this._filterUpToDate=!1,e});ut(k,"visible",!0,$t());ut(k,"transformsEnabled","all",ei());ut(k,"size");ut(k,"dragBoundFunc");ut(k,"draggable",!1,$t());p.backCompat(k,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class It extends k{constructor(){super(...arguments);this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[];var r=[];return i.forEach(function(n){t(n)&&r.push(n)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){var r=[];return this._descendants(n=>{const s=n._isMatch(t);return s&&r.push(n),!!(s&&i)}),r}_descendants(t){let i=!1;const r=this.getChildren();for(const n of r){if(i=t(n),i)return!0;if(!!n.hasChildren()&&(i=n._descendants(t),i))return!0}return!1}toObject(){var t=k.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){for(var i=t.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){var i=k.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){i.add(r.clone())}),i}getAllIntersections(t){var i=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(t)&&i.push(r)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,r){i.index=r}),this._requestDraw()}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas(),s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=n&&n.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",n,i);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;var r=this.getLayer(),n=t||r&&r.hitCanvas,s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,i);return this}_drawChildren(t,i,r){var n,s=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const d=r===this;if(h){s.save();var f=this.getAbsoluteTransform(r),u=f.getMatrix();if(s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),s.beginPath(),l)l.call(this,s,this);else{var g=this.clipX(),c=this.clipY();s.rect(g,c,a,o)}s.clip(),u=f.copy().invert().getMatrix(),s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var y=!d&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";y&&(s.save(),s._applyGlobalCompositeOperation(this)),(n=this.children)===null||n===void 0||n.forEach(function(m){m[t](i,r)}),y&&s.restore(),h&&s.restore()}getClientRect(t){var i;t=t||{};var r=t.skipTransform,n=t.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},d=this;(i=this.children)===null||i===void 0||i.forEach(function(y){if(!!y.visible()){var m=y.getClientRect({relativeTo:d,skipShadow:t.skipShadow,skipStroke:t.skipStroke});m.width===0&&m.height===0||(s===void 0?(s=m.x,a=m.y,o=m.x+m.width,l=m.y+m.height):(s=Math.min(s,m.x),a=Math.min(a,m.y),o=Math.max(o,m.x+m.width),l=Math.max(l,m.y+m.height)))}});for(var f=this.find("Shape"),u=!1,g=0;g<f.length;g++){var c=f[g];if(c._isVisible(this)){u=!0;break}}return u&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,n)}}p.addComponentsGetterSetter(It,"clip",["x","y","width","height"]);p.addGetterSetter(It,"clipX",void 0,R());p.addGetterSetter(It,"clipY",void 0,R());p.addGetterSetter(It,"clipWidth",void 0,R());p.addGetterSetter(It,"clipHeight",void 0,R());p.addGetterSetter(It,"clipFunc");const Ai=new Map,Ro=U._global.PointerEvent!==void 0;function Fr(e){return Ai.get(e)}function jn(e){return{evt:e,pointerId:e.pointerId}}function ko(e,t){return Ai.get(e)===t}function Oo(e,t){bi(e),t.getStage()&&(Ai.set(e,t),Ro&&t._fire("gotpointercapture",jn(new PointerEvent("gotpointercapture"))))}function bi(e,t){const i=Ai.get(e);if(!i)return;const r=i.getStage();r&&r.content,Ai.delete(e),Ro&&i._fire("lostpointercapture",jn(new PointerEvent("lostpointercapture")))}var Qf="Stage",Zf="string",Xs="px",tu="mouseout",Io="mouseleave",Lo="mouseover",Go="mouseenter",Do="mousemove",No="mousedown",Fo="mouseup",fi="pointermove",ui="pointerdown",$e="pointerup",ci="pointercancel",eu="lostpointercapture",Wi="pointerout",Ui="pointerleave",Yi="pointerover",$i="pointerenter",dn="contextmenu",Bo="touchstart",Ho="touchend",zo="touchmove",Wo="touchcancel",fn="wheel",iu=5,ru=[[Go,"_pointerenter"],[No,"_pointerdown"],[Do,"_pointermove"],[Fo,"_pointerup"],[Io,"_pointerleave"],[Bo,"_pointerdown"],[zo,"_pointermove"],[Ho,"_pointerup"],[Wo,"_pointercancel"],[Lo,"_pointerover"],[fn,"_wheel"],[dn,"_contextmenu"],[ui,"_pointerdown"],[fi,"_pointermove"],[$e,"_pointerup"],[ci,"_pointercancel"],[eu,"_lostpointercapture"]];const Br={mouse:{[Wi]:tu,[Ui]:Io,[Yi]:Lo,[$i]:Go,[fi]:Do,[ui]:No,[$e]:Fo,[ci]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Wi]:"touchout",[Ui]:"touchleave",[Yi]:"touchover",[$i]:"touchenter",[fi]:zo,[ui]:Bo,[$e]:Ho,[ci]:Wo,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Wi]:Wi,[Ui]:Ui,[Yi]:Yi,[$i]:$i,[fi]:fi,[ui]:ui,[$e]:$e,[ci]:ci,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},gi=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",We=e=>{const t=gi(e);if(t==="pointer")return U.pointerEventsEnabled&&Br.pointer;if(t==="touch")return Br.touch;if(t==="mouse")return Br.mouse};function Vs(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&b.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const nu="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",rr=[];class Ar extends It{constructor(t){super(Vs(t));this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),rr.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Vs(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",r=t.getType()==="FastLayer";i||r||b.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Zf){if(t.charAt(0)==="."){var i=t.slice(1);t=document.getElementsByClassName(i)[0]}else{var r;t.charAt(0)!=="#"?r=t:r=t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t=this.children,i=t.length,r;for(r=0;r<i;r++)t[r].clear();return this}clone(t){return t||(t={}),t.container=typeof document!="undefined"&&document.createElement("div"),It.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&b._isInDocument(t)&&this.container().removeChild(t);var i=rr.indexOf(this);return i>-1&&rr.splice(i,1),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(b.warn(nu),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t=t||{},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var i=new qe({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),r=i.getContext()._context,n=this.children;return(t.x||t.y)&&r.translate(-1*t.x,-1*t.y),n.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(t);r.drawImage(a._canvas,t.x,t.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(t){if(!t)return null;var i=this.children,r=i.length,n=r-1,s;for(s=n;s>=0;s--){const a=i[s].getIntersection(t);if(a)return a}return null}_resizeDOM(){var t=this.width(),i=this.height();this.content&&(this.content.style.width=t+Xs,this.content.style.height=i+Xs),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(r=>{r.setSize({width:t,height:i}),r.draw()})}add(t,...i){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(t);var n=this.children.length;return n>iu&&b.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),U.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return ko(t,this)}setPointerCapture(t){Oo(t,this)}releaseCapture(t){bi(t)}getLayers(){return this.children}_bindContentEvents(){!U.isBrowser||ru.forEach(([t,i])=>{this.content.addEventListener(t,r=>{this[i](r)})})}_pointerenter(t){this.setPointersPositions(t);const i=We(t.type);this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=We(t.type);this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=We(t.type),r=gi(t.type);if(!!i){this.setPointersPositions(t);var n=this._getTargetShape(r),s=!st.isDragging||U.hitOnDragEnabled;n&&s?(n._fireAndBubble(i.pointerout,{evt:t}),n._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const i=We(t.type),r=gi(t.type);if(!!i){this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(st.justDragged=!1,U["_"+r+"ListenClick"]=!0,!(a&&a.isListening()))return;U.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[r+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:t,pointerId:s.id}),n=!0;const l=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&l&&t.preventDefault()}),n||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const i=We(t.type),r=gi(t.type);if(!i)return;st.isDragging&&st.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);var n=!st.isDragging||U.hitOnDragEnabled;if(!n)return;var s={};let a=!1;var o=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const h=Fr(l.id)||this.getIntersection(l),d=l.id,f={evt:t,pointerId:d};var u=o!==h;if(u&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},f),h),o._fireAndBubble(i.pointerleave,Object.assign({},f),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,u&&(h._fireAndBubble(i.pointerover,Object.assign({},f),o),h._fireAndBubble(i.pointerenter,Object.assign({},f),o),this[r+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},f))):o&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:d}),this[r+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=We(t.type),r=gi(t.type);if(!i)return;this.setPointersPositions(t);const n=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Fr(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const d=l.id,f={evt:t,pointerId:d};let u=!1;U["_"+r+"InDblClickWindow"]?(u=!0,clearTimeout(this[r+"DblTimeout"])):st.justDragged||(U["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){U["_"+r+"InDblClickWindow"]=!1},U.dblClickWindow),h&&h.isListening()?(o=!0,this[r+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},f)),U["_"+r+"ListenClick"]&&n&&n===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},f)),u&&s&&s===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},f)))):(this[r+"ClickEndShape"]=null,U["_"+r+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:d}),u&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:d}))}),o||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),U["_"+r+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(dn,{evt:t}):this._fire(dn,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(fn,{evt:t}):this._fire(fn,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=Fr(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble($e,jn(t)),bi(t.pointerId)}_lostpointercapture(t){bi(t.pointerId)}setPointersPositions(t){var i=this._getContentPosition(),r=null,n=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(r=(t.clientX-i.left)/i.scaleX,n=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:r,y:n},this._pointerPositions=[{x:r,y:n,id:b._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:n,id:b._getFirstPointerId(t)}])}_setPointerPosition(t){b.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new qe({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Kn({pixelRatio:1,width:this.width(),height:this.height()}),!!U.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return b.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Ar.prototype.nodeType=Qf;vt(Ar);p.addGetterSetter(Ar,"container");var Uo="hasShadow",Yo="shadowRGBA",$o="patternImage",Xo="linearGradient",Vo="radialGradient";let Xi;function Hr(){return Xi||(Xi=b.createCanvasElement().getContext("2d"),Xi)}const yi={};function su(e){e.fill()}function au(e){e.stroke()}function ou(e){e.fill()}function lu(e){e.stroke()}function hu(){this._clearCache(Uo)}function du(){this._clearCache(Yo)}function fu(){this._clearCache($o)}function uu(){this._clearCache(Xo)}function cu(){this._clearCache(Vo)}class A extends k{constructor(t){super(t);let i;for(;i=b.getRandomColor(),!(i&&!(i in yi)););this.colorKey=i,yi[i]=this}getContext(){return b.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return b.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Uo,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache($o,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var t=Hr();const i=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const r=new Ot;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(U.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=r.getMatrix();i.setTransform({a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]})}return i}}_getLinearGradient(){return this._getCache(Xo,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var i=Hr(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(r.x,r.y,n.x,n.y),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}_getRadialGradient(){return this._getCache(Vo,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var i=Hr(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}getShadowRGBA(){return this._getCache(Yo,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=b.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var i=this.getStage(),r=i.bufferHitCanvas,n;return r.getContext().clear(),this.drawHit(r,null,!0),n=r.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,n[3]>0}destroy(){return k.prototype.destroy.call(this),delete yi[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const n=t||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(n&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&s&&o&&l)}setStrokeHitEnabled(t){b.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const i=t.skipTransform,r=t.relativeTo,n=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+a,l=n.height+a,h=!t.skipShadow&&this.hasShadow(),d=h?this.shadowOffsetX():0,f=h?this.shadowOffsetY():0,u=o+Math.abs(d),g=l+Math.abs(f),c=h&&this.shadowBlur()||0,y=u+c*2,m=g+c*2;let C=0;Math.round(a/2)!==a/2&&(C=1);const x={width:y+C,height:m+C,x:-Math.round(a/2+c)+Math.min(d,0)+n.x,y:-Math.round(a/2+c)+Math.min(f,0)+n.y};return i?x:this._transformedRect(x,r)}drawScene(t,i){var r=this.getLayer(),n=t||r.getCanvas(),s=n.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,d,f,u=n.isCache,g=i===this;if(!this.isVisible()&&!g)return this;if(a){s.save();var c=this.getAbsoluteTransform(i).getMatrix();return s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!u){h=this.getStage(),d=h.bufferCanvas,f=d.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var y=this.getAbsoluteTransform(i).getMatrix();f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),o.call(this,f,this),f.restore();var m=d.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(d._canvas,0,0,d.width/m,d.height/m)}else{if(s._applyLineJoin(this),!g){var y=this.getAbsoluteTransform(i).getMatrix();s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(t,i,r=!1){if(!this.shouldDrawHit(i,r))return this;var n=this.getLayer(),s=t||n.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||b.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var d=this.getAbsoluteTransform(i).getMatrix();return a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var u=this.getAbsoluteTransform(i).getMatrix();a.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var i=this._getCanvasCache(),r=this._getCachedSceneCanvas(),n=i.hit,s=n.getContext(),a=n.getWidth(),o=n.getHeight(),l,h,d,f,u,g;s.clear(),s.drawImage(r._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,d=h.length,f=b._hexToRgb(this.colorKey),u=0;u<d;u+=4)g=h[u+3],g>t?(h[u]=f.r,h[u+1]=f.g,h[u+2]=f.b,h[u+3]=255):h[u+3]=0;s.putImageData(l,0,0)}catch(c){b.error("Unable to draw hit graph from cached scene canvas. "+c.message)}return this}hasPointerCapture(t){return ko(t,this)}setPointerCapture(t){Oo(t,this)}releaseCapture(t){bi(t)}}A.prototype._fillFunc=su;A.prototype._strokeFunc=au;A.prototype._fillFuncHit=ou;A.prototype._strokeFuncHit=lu;A.prototype._centroid=!1;A.prototype.nodeType="Shape";vt(A);A.prototype.eventListeners={};A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",hu);A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",du);A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",fu);A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",uu);A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",cu);p.addGetterSetter(A,"stroke",void 0,Mo());p.addGetterSetter(A,"strokeWidth",2,R());p.addGetterSetter(A,"fillAfterStrokeEnabled",!1);p.addGetterSetter(A,"hitStrokeWidth","auto",Vn());p.addGetterSetter(A,"strokeHitEnabled",!0,$t());p.addGetterSetter(A,"perfectDrawEnabled",!0,$t());p.addGetterSetter(A,"shadowForStrokeEnabled",!0,$t());p.addGetterSetter(A,"lineJoin");p.addGetterSetter(A,"lineCap");p.addGetterSetter(A,"sceneFunc");p.addGetterSetter(A,"hitFunc");p.addGetterSetter(A,"dash");p.addGetterSetter(A,"dashOffset",0,R());p.addGetterSetter(A,"shadowColor",void 0,ei());p.addGetterSetter(A,"shadowBlur",0,R());p.addGetterSetter(A,"shadowOpacity",1,R());p.addComponentsGetterSetter(A,"shadowOffset",["x","y"]);p.addGetterSetter(A,"shadowOffsetX",0,R());p.addGetterSetter(A,"shadowOffsetY",0,R());p.addGetterSetter(A,"fillPatternImage");p.addGetterSetter(A,"fill",void 0,Mo());p.addGetterSetter(A,"fillPatternX",0,R());p.addGetterSetter(A,"fillPatternY",0,R());p.addGetterSetter(A,"fillLinearGradientColorStops");p.addGetterSetter(A,"strokeLinearGradientColorStops");p.addGetterSetter(A,"fillRadialGradientStartRadius",0);p.addGetterSetter(A,"fillRadialGradientEndRadius",0);p.addGetterSetter(A,"fillRadialGradientColorStops");p.addGetterSetter(A,"fillPatternRepeat","repeat");p.addGetterSetter(A,"fillEnabled",!0);p.addGetterSetter(A,"strokeEnabled",!0);p.addGetterSetter(A,"shadowEnabled",!0);p.addGetterSetter(A,"dashEnabled",!0);p.addGetterSetter(A,"strokeScaleEnabled",!0);p.addGetterSetter(A,"fillPriority","color");p.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]);p.addGetterSetter(A,"fillPatternOffsetX",0,R());p.addGetterSetter(A,"fillPatternOffsetY",0,R());p.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]);p.addGetterSetter(A,"fillPatternScaleX",1,R());p.addGetterSetter(A,"fillPatternScaleY",1,R());p.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]);p.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]);p.addGetterSetter(A,"fillLinearGradientStartPointX",0);p.addGetterSetter(A,"strokeLinearGradientStartPointX",0);p.addGetterSetter(A,"fillLinearGradientStartPointY",0);p.addGetterSetter(A,"strokeLinearGradientStartPointY",0);p.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]);p.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]);p.addGetterSetter(A,"fillLinearGradientEndPointX",0);p.addGetterSetter(A,"strokeLinearGradientEndPointX",0);p.addGetterSetter(A,"fillLinearGradientEndPointY",0);p.addGetterSetter(A,"strokeLinearGradientEndPointY",0);p.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]);p.addGetterSetter(A,"fillRadialGradientStartPointX",0);p.addGetterSetter(A,"fillRadialGradientStartPointY",0);p.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]);p.addGetterSetter(A,"fillRadialGradientEndPointX",0);p.addGetterSetter(A,"fillRadialGradientEndPointY",0);p.addGetterSetter(A,"fillPatternRotation",0);p.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var gu="#",pu="beforeDraw",vu="draw",Ko=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],mu=Ko.length;class Ge extends It{constructor(t){super(t);this.canvas=new qe,this.hitCanvas=new Kn({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){k.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=k.prototype.moveUp.call(this);if(!t)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(k.prototype.moveDown.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(k.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return k.prototype.remove.call(this),t&&t.parentNode&&b._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&b.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),k.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){b.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){b.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,b.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var i=1,r=!1;;){for(let n=0;n<mu;n++){const s=Ko[n],a=this._getIntersection({x:t.x+s.x*i,y:t.y+s.y*i}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,n=r[3];if(n===255){const s=b._rgbToHex(r[0],r[1],r[2]),a=yi[gu+s];return a?{shape:a}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire(pu,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),It.prototype.drawScene.call(this,n,i),this._fire(vu,{node:this}),this}drawHit(t,i){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),It.prototype.drawHit.call(this,n,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){b.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return b.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}Ge.prototype.nodeType="Layer";vt(Ge);p.addGetterSetter(Ge,"imageSmoothingEnabled",!0);p.addGetterSetter(Ge,"clearBeforeDraw",!0);p.addGetterSetter(Ge,"hitGraphEnabled",!0,$t());class qn extends Ge{constructor(t){super(t);this.listening(!1),b.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}qn.prototype.nodeType="FastLayer";vt(qn);class ti extends It{_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&b.throw("You may only add groups and shapes to groups.")}}ti.prototype.nodeType="Group";vt(ti);var zr=function(){return je.performance&&je.performance.now?function(){return je.performance.now()}:function(){return new Date().getTime()}}();class Bt{constructor(t,i){this.id=Bt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:zr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){var i=[];return t?t.length>0?i=t:i=[t]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(t){var i=this.layers,r=i.length,n;for(n=0;n<r;n++)if(i[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=Bt,i=t.animations,r=i.length,n;for(n=0;n<r;n++)if(i[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=zr(),Bt._addAnimation(this),this}stop(){return Bt._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var i=t.id,r=this.animations,n=r.length,s;for(s=0;s<n;s++)if(r[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){var t={},i=this.animations,r,n,s,a,o,l,h,d,f;for(a=0;a<i.length;a++)if(r=i[a],n=r.layers,s=r.func,r._updateFrameObject(zr()),l=n.length,s?f=s.call(r,r.frame)!==!1:f=!0,!!f)for(o=0;o<l;o++)h=n[o],h._id!==void 0&&(t[h._id]=h);for(d in t)!t.hasOwnProperty(d)||t[d].batchDraw()}static _animationLoop(){var t=Bt;t.animations.length?(t._runFrames(),b.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,b.requestAnimFrame(this._animationLoop))}}Bt.animations=[];Bt.animIdCounter=0;Bt.animRunning=!1;var _u={node:1,duration:1,easing:1,onFinish:1,yoyo:1},bu=1,Ks=2,js=3,yu=0,qs=["fill","stroke","shadowColor"];class Su{constructor(t,i,r,n,s,a,o){this.prop=t,this.propFunc=i,this.begin=n,this._pos=n,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(t){var i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Ks,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=js,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;this.state===Ks?this.setTime(t):this.state===js&&this.setTime(this.duration-t)}pause(){this.state=bu,this.fire("onPause")}getTimer(){return new Date().getTime()}}class bt{constructor(t){var i=this,r=t.node,n=r._id,s,a=t.easing||Si.Linear,o=!!t.yoyo,l;typeof t.duration=="undefined"?s=.3:t.duration===0?s=.001:s=t.duration,this.node=r,this._id=yu++;var h=r.getLayer()||(r instanceof U.Stage?r.getLayers():null);h||b.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Bt(function(){i.tween.onEnterFrame()},h),this.tween=new Su(l,function(d){i._tweenFunc(d)},a,0,1,s*1e3,o),this._addListeners(),bt.attrs[n]||(bt.attrs[n]={}),bt.attrs[n][this._id]||(bt.attrs[n][this._id]={}),bt.tweens[n]||(bt.tweens[n]={});for(l in t)_u[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){var r=this.node,n=r._id,s,a,o,l,h,d,f,u;if(o=bt.tweens[n][t],o&&delete bt.attrs[n][o][t],s=r.getAttr(t),b._isArray(i))if(a=[],h=Math.max(i.length,s.length),t==="points"&&i.length!==s.length&&(i.length>s.length?(f=s,s=b._prepareArrayForTween(s,i,r.closed())):(d=i,i=b._prepareArrayForTween(i,s,r.closed()))),t.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-s[l]);else{var g=b.colorToRGBA(s[l]);u=b.colorToRGBA(i[l]),s[l]=g,a.push({r:u.r-g.r,g:u.g-g.g,b:u.b-g.b,a:u.a-g.a})}else for(l=0;l<h;l++)a.push(i[l]-s[l]);else qs.indexOf(t)!==-1?(s=b.colorToRGBA(s),u=b.colorToRGBA(i),a={r:u.r-s.r,g:u.g-s.g,b:u.b-s.b,a:u.a-s.a}):a=i-s;bt.attrs[n][this._id][t]={start:s,diff:a,end:i,trueEnd:d,trueStart:f},bt.tweens[n][t]=this._id}_tweenFunc(t){var i=this.node,r=bt.attrs[i._id][this._id],n,s,a,o,l,h,d,f;for(n in r){if(s=r[n],a=s.start,o=s.diff,f=s.end,b._isArray(a))if(l=[],d=Math.max(a.length,f.length),n.indexOf("fill")===0)for(h=0;h<d;h++)h%2===0?l.push((a[h]||0)+o[h]*t):l.push("rgba("+Math.round(a[h].r+o[h].r*t)+","+Math.round(a[h].g+o[h].g*t)+","+Math.round(a[h].b+o[h].b*t)+","+(a[h].a+o[h].a*t)+")");else for(h=0;h<d;h++)l.push((a[h]||0)+o[h]*t);else qs.indexOf(n)!==-1?l="rgba("+Math.round(a.r+o.r*t)+","+Math.round(a.g+o.g*t)+","+Math.round(a.b+o.b*t)+","+(a.a+o.a*t)+")":l=a+o*t;i.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,i=bt.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,i=bt.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t=this.node._id,i=this._id,r=bt.tweens[t],n;this.pause();for(n in r)delete bt.tweens[t][n];delete bt.attrs[t][i]}}bt.attrs={};bt.tweens={};k.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()};var i=new bt(e);i.play()};const Si={BackEaseIn(e,t,i,r){var n=1.70158;return i*(e/=r)*e*((n+1)*e-n)+t},BackEaseOut(e,t,i,r){var n=1.70158;return i*((e=e/r-1)*e*((n+1)*e+n)+1)+t},BackEaseInOut(e,t,i,r){var n=1.70158;return(e/=r/2)<1?i/2*(e*e*(((n*=1.525)+1)*e-n))+t:i/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+t},ElasticEaseIn(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r)===1?t+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s))+t)},ElasticEaseOut(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r)===1?t+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/s)+i+t)},ElasticEaseInOut(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r/2)===2?t+i:(s||(s=r*(.3*1.5)),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),e<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s))+t:n*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s)*.5+i+t)},BounceEaseOut(e,t,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,r){return i-Si.BounceEaseOut(r-e,0,i,r)+t},BounceEaseInOut(e,t,i,r){return e<r/2?Si.BounceEaseIn(e*2,0,i,r)*.5+t:Si.BounceEaseOut(e*2-r,0,i,r)*.5+i*.5+t},EaseIn(e,t,i,r){return i*(e/=r)*e+t},EaseOut(e,t,i,r){return-i*(e/=r)*(e-2)+t},EaseInOut(e,t,i,r){return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,r){return i*(e/=r)*e*e*e*e+t},StrongEaseOut(e,t,i,r){return i*((e=e/r-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,r){return i*e/r+t}},Js=b._assign(U,{Util:b,Transform:Ot,Node:k,Container:It,Stage:Ar,stages:rr,Layer:Ge,FastLayer:qn,Group:ti,DD:st,Shape:A,shapes:yi,Animation:Bt,Tween:bt,Easings:Si,Context:Tr,Canvas:Pr});class he extends A{_sceneFunc(t){var i=U.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,r),t.arc(0,0,this.innerRadius(),i,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),r=this.clockwise(),n=U.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(n,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),l=Math.sin(Math.min(n,Math.PI/2)),h=s*(s>0?t:i),d=a*i,f=o*(o>0?t:i),u=l*(l>0?i:t);return{x:Math.round(h),y:Math.round(r?-1*u:f),width:Math.round(d-h),height:Math.round(u-f)}}}he.prototype._centroid=!0;he.prototype.className="Arc";he.prototype._attrsAffectingSize=["innerRadius","outerRadius"];vt(he);p.addGetterSetter(he,"innerRadius",0,R());p.addGetterSetter(he,"outerRadius",0,R());p.addGetterSetter(he,"angle",0,R());p.addGetterSetter(he,"clockwise",!1,$t());function un(e,t,i,r,n,s,a){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),h=a*o/(o+l),d=a*l/(o+l),f=i-h*(n-e),u=r-h*(s-t),g=i+d*(n-e),c=r+d*(s-t);return[f,u,g,c]}function Qs(e,t){var i=e.length,r=[],n,s;for(n=2;n<i-2;n+=2)s=un(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(e[n]),r.push(e[n+1]),r.push(s[2]),r.push(s[3]));return r}class de extends A{constructor(t){super(t);this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var i=this.points(),r=i.length,n=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!r){if(t.beginPath(),t.moveTo(i[0],i[1]),n!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||t.quadraticCurveTo(o[l-2],o[l-1],i[r-2],i[r-1])}else if(a)for(h=2;h<r;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<r;h+=2)t.lineTo(i[h],i[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Qs(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),i=t.length,r=this.tension(),n=un(t[i-2],t[i-1],t[0],t[1],t[2],t[3],r),s=un(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],r),a=Qs(t,r),o=[n[2],n[3]].concat(a).concat([s[0],s[1],t[i-2],t[i-1],s[2],s[3],n[0],n[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);return{x:i,y:n,width:r-i,height:s-n}}}de.prototype.className="Line";de.prototype._attrsAffectingSize=["points","bezier","tension"];vt(de);p.addGetterSetter(de,"closed",!1);p.addGetterSetter(de,"bezier",!1);p.addGetterSetter(de,"tension",0,R());p.addGetterSetter(de,"points",[],kf());class ht extends A{constructor(t){super(t);this.dataArray=[],this.pathLength=0,this.dataArray=ht.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength;this.on("dataChange.konva",function(){this.dataArray=ht.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(t){var i=this.dataArray;t.beginPath();for(var r=!1,n=0;n<i.length;n++){var s=i[n].command,a=i[n].points;switch(s){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],h=a[2],d=a[3],f=a[4],u=a[5],g=a[6],c=a[7],y=h>d?h:d,m=h>d?1:h/d,C=h>d?d/h:1;t.translate(o,l),t.rotate(g),t.scale(m,C),t.arc(0,0,y,f,f+u,1-c),t.scale(1/m,1/C),t.rotate(-g),t.translate(-o,-l);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(h){if(h.command==="A"){var d=h.points[4],f=h.points[5],u=h.points[4]+f,g=Math.PI/180;if(Math.abs(d-u)<g&&(g=Math.abs(d-u)),f<0)for(let c=d-g;c>u;c-=g){const y=ht.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],c,0);t.push(y.x,y.y)}else for(let c=d+g;c<u;c+=g){const y=ht.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],c,0);t.push(y.x,y.y)}}else if(h.command==="C")for(let c=0;c<=1;c+=.01){const y=ht.getPointOnCubicBezier(c,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);t.push(y.x,y.y)}else t=t.concat(h.points)});for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],isNaN(a)||(i=Math.min(i,a),r=Math.max(r,a)),isNaN(o)||(n=Math.min(n,o),s=Math.max(s,o));return{x:Math.round(i),y:Math.round(n),width:Math.round(r-i),height:Math.round(s-n)}}getLength(){return this.pathLength}getPointAtLength(t){var i,r=0,n=this.dataArray.length;if(!n)return null;for(;r<n&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===n)return i=this.dataArray[r-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return i=this.dataArray[r].points.slice(0,2),{x:i[0],y:i[1]};var s=this.dataArray[r],a=s.points;switch(s.command){case"L":return ht.getPointOnLine(t,s.start.x,s.start.y,a[0],a[1]);case"C":return ht.getPointOnCubicBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return ht.getPointOnQuadraticBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],l=a[1],h=a[2],d=a[3],f=a[4],u=a[5],g=a[6];return f+=u*t/s.pathLength,ht.getPointOnEllipticalArc(o,l,h,d,f,g)}return null}static getLineLength(t,i,r,n){return Math.sqrt((r-t)*(r-t)+(n-i)*(n-i))}static getPointOnLine(t,i,r,n,s,a,o){a===void 0&&(a=i),o===void 0&&(o=r);var l=(s-r)/(n-i+1e-8),h=Math.sqrt(t*t/(1+l*l));n<i&&(h*=-1);var d=l*h,f;if(n===i)f={x:a,y:o+d};else if((o-r)/(a-i+1e-8)===l)f={x:a+h,y:o+d};else{var u,g,c=this.getLineLength(i,r,n,s),y=(a-i)*(n-i)+(o-r)*(s-r);y=y/(c*c),u=i+y*(n-i),g=r+y*(s-r);var m=this.getLineLength(a,o,u,g),C=Math.sqrt(t*t-m*m);h=Math.sqrt(C*C/(1+l*l)),n<i&&(h*=-1),d=l*h,f={x:u+h,y:g+d}}return f}static getPointOnCubicBezier(t,i,r,n,s,a,o,l,h){function d(m){return m*m*m}function f(m){return 3*m*m*(1-m)}function u(m){return 3*m*(1-m)*(1-m)}function g(m){return(1-m)*(1-m)*(1-m)}var c=l*d(t)+a*f(t)+n*u(t)+i*g(t),y=h*d(t)+o*f(t)+s*u(t)+r*g(t);return{x:c,y}}static getPointOnQuadraticBezier(t,i,r,n,s,a,o){function l(g){return g*g}function h(g){return 2*g*(1-g)}function d(g){return(1-g)*(1-g)}var f=a*l(t)+n*h(t)+i*d(t),u=o*l(t)+s*h(t)+r*d(t);return{x:f,y:u}}static getPointOnEllipticalArc(t,i,r,n,s,a){var o=Math.cos(a),l=Math.sin(a),h={x:r*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*o-h.y*l),y:i+(h.x*l+h.y*o)}}static parsePathData(t){if(!t)return[];var i=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)i=i.replace(new RegExp(r[n],"g"),"|"+r[n]);var s=i.split("|"),a=[],o=[],l=0,h=0,d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(n=1;n<s.length;n++){var u=s[n],g=u.charAt(0);for(u=u.slice(1),o.length=0;f=d.exec(u);)o.push(f[0]);for(var c=[],y=0,m=o.length;y<m;y++){if(o[y]==="00"){c.push(0,0);continue}var C=parseFloat(o[y]);isNaN(C)?c.push(0):c.push(C)}for(;c.length>0&&!isNaN(c[0]);){var x=null,w=[],E=l,F=h,G,I,D,B,W,z,K,$,ot,xt;switch(g){case"l":l+=c.shift(),h+=c.shift(),x="L",w.push(l,h);break;case"L":l=c.shift(),h=c.shift(),w.push(l,h);break;case"m":var j=c.shift(),q=c.shift();if(l+=j,h+=q,x="M",a.length>2&&a[a.length-1].command==="z"){for(var tt=a.length-2;tt>=0;tt--)if(a[tt].command==="M"){l=a[tt].points[0]+j,h=a[tt].points[1]+q;break}}w.push(l,h),g="l";break;case"M":l=c.shift(),h=c.shift(),x="M",w.push(l,h),g="L";break;case"h":l+=c.shift(),x="L",w.push(l,h);break;case"H":l=c.shift(),x="L",w.push(l,h);break;case"v":h+=c.shift(),x="L",w.push(l,h);break;case"V":h=c.shift(),x="L",w.push(l,h);break;case"C":w.push(c.shift(),c.shift(),c.shift(),c.shift()),l=c.shift(),h=c.shift(),w.push(l,h);break;case"c":w.push(l+c.shift(),h+c.shift(),l+c.shift(),h+c.shift()),l+=c.shift(),h+=c.shift(),x="C",w.push(l,h);break;case"S":I=l,D=h,G=a[a.length-1],G.command==="C"&&(I=l+(l-G.points[2]),D=h+(h-G.points[3])),w.push(I,D,c.shift(),c.shift()),l=c.shift(),h=c.shift(),x="C",w.push(l,h);break;case"s":I=l,D=h,G=a[a.length-1],G.command==="C"&&(I=l+(l-G.points[2]),D=h+(h-G.points[3])),w.push(I,D,l+c.shift(),h+c.shift()),l+=c.shift(),h+=c.shift(),x="C",w.push(l,h);break;case"Q":w.push(c.shift(),c.shift()),l=c.shift(),h=c.shift(),w.push(l,h);break;case"q":w.push(l+c.shift(),h+c.shift()),l+=c.shift(),h+=c.shift(),x="Q",w.push(l,h);break;case"T":I=l,D=h,G=a[a.length-1],G.command==="Q"&&(I=l+(l-G.points[0]),D=h+(h-G.points[1])),l=c.shift(),h=c.shift(),x="Q",w.push(I,D,l,h);break;case"t":I=l,D=h,G=a[a.length-1],G.command==="Q"&&(I=l+(l-G.points[0]),D=h+(h-G.points[1])),l+=c.shift(),h+=c.shift(),x="Q",w.push(I,D,l,h);break;case"A":B=c.shift(),W=c.shift(),z=c.shift(),K=c.shift(),$=c.shift(),ot=l,xt=h,l=c.shift(),h=c.shift(),x="A",w=this.convertEndpointToCenterParameterization(ot,xt,l,h,K,$,B,W,z);break;case"a":B=c.shift(),W=c.shift(),z=c.shift(),K=c.shift(),$=c.shift(),ot=l,xt=h,l+=c.shift(),h+=c.shift(),x="A",w=this.convertEndpointToCenterParameterization(ot,xt,l,h,K,$,B,W,z);break}a.push({command:x||g,points:w,start:{x:E,y:F},pathLength:this.calcLength(E,F,x||g,w)})}(g==="z"||g==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,i,r,n){var s,a,o,l,h=ht;switch(r){case"L":return h.getLineLength(t,i,n[0],n[1]);case"C":for(s=0,a=h.getPointOnCubicBezier(0,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=h.getPointOnCubicBezier(l,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=h.getPointOnQuadraticBezier(0,t,i,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=h.getPointOnQuadraticBezier(l,t,i,n[0],n[1],n[2],n[3]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var d=n[4],f=n[5],u=n[4]+f,g=Math.PI/180;if(Math.abs(d-u)<g&&(g=Math.abs(d-u)),a=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],d,0),f<0)for(l=d-g;l>u;l-=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=d+g;l<u;l+=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,i,r,n,s,a,o,l,h){var d=h*(Math.PI/180),f=Math.cos(d)*(t-r)/2+Math.sin(d)*(i-n)/2,u=-1*Math.sin(d)*(t-r)/2+Math.cos(d)*(i-n)/2,g=f*f/(o*o)+u*u/(l*l);g>1&&(o*=Math.sqrt(g),l*=Math.sqrt(g));var c=Math.sqrt((o*o*(l*l)-o*o*(u*u)-l*l*(f*f))/(o*o*(u*u)+l*l*(f*f)));s===a&&(c*=-1),isNaN(c)&&(c=0);var y=c*o*u/l,m=c*-l*f/o,C=(t+r)/2+Math.cos(d)*y-Math.sin(d)*m,x=(i+n)/2+Math.sin(d)*y+Math.cos(d)*m,w=function(W){return Math.sqrt(W[0]*W[0]+W[1]*W[1])},E=function(W,z){return(W[0]*z[0]+W[1]*z[1])/(w(W)*w(z))},F=function(W,z){return(W[0]*z[1]<W[1]*z[0]?-1:1)*Math.acos(E(W,z))},G=F([1,0],[(f-y)/o,(u-m)/l]),I=[(f-y)/o,(u-m)/l],D=[(-1*f-y)/o,(-1*u-m)/l],B=F(I,D);return E(I,D)<=-1&&(B=Math.PI),E(I,D)>=1&&(B=0),a===0&&B>0&&(B=B-2*Math.PI),a===1&&B<0&&(B=B+2*Math.PI),[C,x,o,l,G,B,d,a]}}ht.prototype.className="Path";ht.prototype._attrsAffectingSize=["data"];vt(ht);p.addGetterSetter(ht,"data");class De extends de{_sceneFunc(t){super._sceneFunc(t);var i=Math.PI*2,r=this.points(),n=r,s=this.tension()!==0&&r.length>4;s&&(n=this.getTensionPoints());var a=this.pointerLength(),o=r.length,l,h;if(s){const u=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],r[o-2],r[o-1]],g=ht.calcLength(n[n.length-4],n[n.length-3],"C",u),c=ht.getPointOnQuadraticBezier(Math.min(1,1-a/g),u[0],u[1],u[2],u[3],u[4],u[5]);l=r[o-2]-c.x,h=r[o-1]-c.y}else l=r[o-2]-r[o-4],h=r[o-1]-r[o-3];var d=(Math.atan2(h,l)+i)%i,f=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[o-2],r[o-1]),t.rotate(d),t.moveTo(0,0),t.lineTo(-a,f/2),t.lineTo(-a,-f/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),s?(l=(n[0]+n[2])/2-r[0],h=(n[1]+n[3])/2-r[1]):(l=r[2]-r[0],h=r[3]-r[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-a,f/2),t.lineTo(-a,-f/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x-i,y:t.y-i,width:t.width+i*2,height:t.height+i*2}}}De.prototype.className="Arrow";vt(De);p.addGetterSetter(De,"pointerLength",10,R());p.addGetterSetter(De,"pointerWidth",10,R());p.addGetterSetter(De,"pointerAtBeginning",!1);p.addGetterSetter(De,"pointerAtEnding",!0);class ii extends A{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}ii.prototype._centroid=!0;ii.prototype.className="Circle";ii.prototype._attrsAffectingSize=["radius"];vt(ii);p.addGetterSetter(ii,"radius",0,R());class ye extends A{_sceneFunc(t){var i=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),i!==r&&t.scale(1,r/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}ye.prototype.className="Ellipse";ye.prototype._centroid=!0;ye.prototype._attrsAffectingSize=["radiusX","radiusY"];vt(ye);p.addComponentsGetterSetter(ye,"radius",["x","y"]);p.addGetterSetter(ye,"radiusX",0,R());p.addGetterSetter(ye,"radiusY",0,R());class Xt extends A{constructor(t){super(t);this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),r=this.getHeight(),n=this.attrs.image;let s;if(n){const a=this.attrs.cropWidth,o=this.attrs.cropHeight;a&&o?s=[n,this.cropX(),this.cropY(),a,o,0,0,i,r]:s=[n,0,0,i,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)),n&&t.drawImage.apply(t,s)}_hitFunc(t){var i=this.width(),r=this.height();t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i;return(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var t,i;return(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(t,i,r=null){var n=b.createImageElement();n.onload=function(){var s=new Xt({image:n});i(s)},n.onerror=r,n.crossOrigin="Anonymous",n.src=t}}Xt.prototype.className="Image";vt(Xt);p.addGetterSetter(Xt,"image");p.addComponentsGetterSetter(Xt,"crop",["x","y","width","height"]);p.addGetterSetter(Xt,"cropX",0,R());p.addGetterSetter(Xt,"cropY",0,R());p.addGetterSetter(Xt,"cropWidth",0,R());p.addGetterSetter(Xt,"cropHeight",0,R());var jo=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],Cu="Change.konva",wu="none",cn="up",gn="right",pn="down",vn="left",xu=jo.length;class Jn extends ti{constructor(t){super(t);this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var i=this,r,n=function(){i._sync()};for(r=0;r<xu;r++)t.on(jo[r]+Cu,n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),i=this.getTag(),r,n,s,a,o,l,h;if(t&&i){switch(r=t.width(),n=t.height(),s=i.pointerDirection(),a=i.pointerWidth(),h=i.pointerHeight(),o=0,l=0,s){case cn:o=r/2,l=-1*h;break;case gn:o=r+a,l=n/2;break;case pn:o=r/2,l=n+h;break;case vn:o=-1*a,l=n/2;break}i.setAttrs({x:-1*o,y:-1*l,width:r,height:n}),t.setAttrs({x:-1*o,y:-1*l})}}}Jn.prototype.className="Label";vt(Jn);class Ne extends A{_sceneFunc(t){var i=this.width(),r=this.height(),n=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,h=0,d=0,f=0;typeof o=="number"?l=h=d=f=Math.min(o,i/2,r/2):(l=Math.min(o[0]||0,i/2,r/2),h=Math.min(o[1]||0,i/2,r/2),f=Math.min(o[2]||0,i/2,r/2),d=Math.min(o[3]||0,i/2,r/2)),t.beginPath(),t.moveTo(l,0),n===cn&&(t.lineTo((i-s)/2,0),t.lineTo(i/2,-1*a),t.lineTo((i+s)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),n===gn&&(t.lineTo(i,(r-a)/2),t.lineTo(i+s,r/2),t.lineTo(i,(r+a)/2)),t.lineTo(i,r-f),t.arc(i-f,r-f,f,0,Math.PI/2,!1),n===pn&&(t.lineTo((i+s)/2,r),t.lineTo(i/2,r+a),t.lineTo((i-s)/2,r)),t.lineTo(d,r),t.arc(d,r-d,d,Math.PI/2,Math.PI,!1),n===vn&&(t.lineTo(0,(r+a)/2),t.lineTo(-1*s,r/2),t.lineTo(0,(r-a)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,i=0,r=this.pointerWidth(),n=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===cn?(i-=n,o+=n):s===pn?o+=n:s===vn?(t-=r*1.5,a+=r):s===gn&&(a+=r*1.5),{x:t,y:i,width:a,height:o}}}Ne.prototype.className="Tag";vt(Ne);p.addGetterSetter(Ne,"pointerDirection",wu);p.addGetterSetter(Ne,"pointerWidth",0,R());p.addGetterSetter(Ne,"pointerHeight",0,R());p.addGetterSetter(Ne,"cornerRadius",0,Ao(4));class Mi extends A{_sceneFunc(t){var i=this.cornerRadius(),r=this.width(),n=this.height();if(t.beginPath(),!i)t.rect(0,0,r,n);else{let s=0,a=0,o=0,l=0;typeof i=="number"?s=a=o=l=Math.min(i,r/2,n/2):(s=Math.min(i[0]||0,r/2,n/2),a=Math.min(i[1]||0,r/2,n/2),l=Math.min(i[2]||0,r/2,n/2),o=Math.min(i[3]||0,r/2,n/2)),t.moveTo(s,0),t.lineTo(r-a,0),t.arc(r-a,a,a,Math.PI*3/2,0,!1),t.lineTo(r,n-l),t.arc(r-l,n-l,l,0,Math.PI/2,!1),t.lineTo(o,n),t.arc(o,n-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,s),t.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)}}Mi.prototype.className="Rect";vt(Mi);p.addGetterSetter(Mi,"cornerRadius",0,Ao(4));class Fe extends A{_sceneFunc(t){const i=this._getPoints();t.beginPath(),t.moveTo(i[0].x,i[0].y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,r=[];for(var n=0;n<t;n++)r.push({x:i*Math.sin(n*2*Math.PI/t),y:-1*i*Math.cos(n*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var i=t[0].x,r=t[0].y,n=t[0].x,s=t[0].y;return t.forEach(a=>{i=Math.min(i,a.x),r=Math.max(r,a.x),n=Math.min(n,a.y),s=Math.max(s,a.y)}),{x:i,y:n,width:r-i,height:s-n}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Fe.prototype.className="RegularPolygon";Fe.prototype._centroid=!0;Fe.prototype._attrsAffectingSize=["radius"];vt(Fe);p.addGetterSetter(Fe,"radius",0,R());p.addGetterSetter(Fe,"sides",0,R());var Zs=Math.PI*2;class Be extends A{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Zs,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Zs,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Be.prototype.className="Ring";Be.prototype._centroid=!0;Be.prototype._attrsAffectingSize=["innerRadius","outerRadius"];vt(Be);p.addGetterSetter(Be,"innerRadius",0,R());p.addGetterSetter(Be,"outerRadius",0,R());class Zt extends A{constructor(t){super(t);this._updated=!0,this.anim=new Bt(()=>{var i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+0],l=s[n+1],h=s[n+2],d=s[n+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,d),t.closePath(),t.fillStrokeShape(this)),f)if(a){var u=a[i],g=r*2;t.drawImage(f,o,l,h,d,u[g+0],u[g+1],h,d)}else t.drawImage(f,o,l,h,d,0,0,h,d)}_hitFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+2],l=s[n+3];if(t.beginPath(),a){var h=a[i],d=r*2;t.rect(h[d+0],h[d+1],o,l)}else t.rect(0,0,o,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),i=this.animation(),r=this.animations(),n=r[i],s=n.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}Zt.prototype.className="Sprite";vt(Zt);p.addGetterSetter(Zt,"animation");p.addGetterSetter(Zt,"animations");p.addGetterSetter(Zt,"frameOffsets");p.addGetterSetter(Zt,"image");p.addGetterSetter(Zt,"frameIndex",0,R());p.addGetterSetter(Zt,"frameRate",17,R());p.backCompat(Zt,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Se extends A{_sceneFunc(t){var i=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var s=1;s<n*2;s++){var a=s%2===0?r:i,o=a*Math.sin(s*Math.PI/n),l=-1*a*Math.cos(s*Math.PI/n);t.lineTo(o,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Se.prototype.className="Star";Se.prototype._centroid=!0;Se.prototype._attrsAffectingSize=["innerRadius","outerRadius"];vt(Se);p.addGetterSetter(Se,"numPoints",5,R());p.addGetterSetter(Se,"innerRadius",0,R());p.addGetterSetter(Se,"outerRadius",0,R());function qo(e){return Array.from(e)}var Vi="auto",Eu="center",oi="justify",Tu="Change.konva",Pu="2d",ta="-",Jo="left",Au="text",Mu="Text",Ru="top",ku="bottom",ea="middle",Qo="normal",Ou="px ",Ki=" ",Iu="right",Lu="word",Gu="char",Du="none",Wr="\u2026",Zo=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Nu=Zo.length;function Fu(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!r&&(t=`"${t}"`),t}).join(", ")}var ji;function Ur(){return ji||(ji=b.createCanvasElement().getContext(Pu),ji)}function Bu(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Hu(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function zu(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class pt extends A{constructor(t){super(zu(t));this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Nu;i++)this.on(Zo[i]+Tu,this._setTextData);this._setTextData()}_sceneFunc(t){var i=this.textArr,r=i.length;if(!!this.text()){var n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),d=this.getWidth(),f=this.letterSpacing(),u=this.fill(),g=this.textDecoration(),c=g.indexOf("underline")!==-1,y=g.indexOf("line-through")!==-1,m,C=0,C=a/2,x=0,w=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",ea),t.setAttr("textAlign",Jo),o===ea?l=(this.getHeight()-r*a-n*2)/2:o===ku&&(l=this.getHeight()-r*a-n*2),t.translate(n,l+n),m=0;m<r;m++){var x=0,w=0,E=i[m],F=E.text,G=E.width,I=E.lastInParagraph,D,B,W;if(t.save(),h===Iu?x+=d-G-n*2:h===Eu&&(x+=(d-G-n*2)/2),c&&(t.save(),t.beginPath(),t.moveTo(x,C+w+Math.round(s/2)),D=F.split(" ").length-1,B=D===0,W=h===oi&&I&&!B?d-n*2:G,t.lineTo(x+Math.round(W),C+w+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),y&&(t.save(),t.beginPath(),t.moveTo(x,C+w),D=F.split(" ").length-1,B=D===0,W=h===oi&&I&&!B?d-n*2:G,t.lineTo(x+Math.round(W),C+w),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),f!==0||h===oi){D=F.split(" ").length-1;for(var z=qo(F),K=0;K<z.length;K++){var $=z[K];$===" "&&!I&&h===oi&&(x+=(d-n*2-G)/D),this._partialTextX=x,this._partialTextY=C+w,this._partialText=$,t.fillStrokeShape(this),x+=this.measureSize($).width+f}}else this._partialTextX=x,this._partialTextY=C+w,this._partialText=F,t.fillStrokeShape(this);t.restore(),r>1&&(C+=a)}}}_hitFunc(t){var i=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var i=b._isString(t)?t:t==null?"":t+"";return this._setAttr(Au,i),this}getWidth(){var t=this.attrs.width===Vi||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===Vi||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return b.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i=Ur(),r=this.fontSize(),n;return i.save(),i.font=this._getContextFont(),n=i.measureText(t),i.restore(),{width:n.width,height:r}}_getContextFont(){return this.fontStyle()+Ki+this.fontVariant()+Ki+(this.fontSize()+Ou)+Fu(this.fontFamily())}_addTextLine(t){this.align()===oi&&(t=t.trim());var i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){var i=this.letterSpacing(),r=t.length;return Ur().measureText(t).width+(r?i*(r-1):0)}_setTextData(){var t=this.text().split(`
`),i=+this.fontSize(),r=0,n=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==Vi&&s!==void 0,l=a!==Vi&&a!==void 0,h=this.padding(),d=s-h*2,f=a-h*2,u=0,g=this.wrap(),c=g!==Du,y=g!==Gu&&c,m=this.ellipsis();this.textArr=[],Ur().font=this._getContextFont();for(var C=m?this._getTextWidth(Wr):0,x=0,w=t.length;x<w;++x){var E=t[x],F=this._getTextWidth(E);if(o&&F>d)for(;E.length>0;){for(var G=0,I=E.length,D="",B=0;G<I;){var W=G+I>>>1,z=E.slice(0,W+1),K=this._getTextWidth(z)+C;K<=d?(G=W+1,D=z,B=K):I=W}if(D){if(y){var $,ot=E[D.length],xt=ot===Ki||ot===ta;xt&&B<=d?$=D.length:$=Math.max(D.lastIndexOf(Ki),D.lastIndexOf(ta))+1,$>0&&(G=$,D=D.slice(0,G),B=this._getTextWidth(D))}if(D=D.trimRight(),this._addTextLine(D),r=Math.max(r,B),u+=n,!c||l&&u+n>f){var j=this.textArr[this.textArr.length-1];if(j&&m){var q=this._getTextWidth(j.text+Wr)<d;q||(j.text=j.text.slice(0,j.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(j.text+Wr)}break}if(E=E.slice(G),E=E.trimLeft(),E.length>0&&(F=this._getTextWidth(E),F<=d)){this._addTextLine(E),u+=n,r=Math.max(r,F);break}}else break}else this._addTextLine(E),u+=n,r=Math.max(r,F);if(l&&u+n>f)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=i,this.textWidth=r}getStrokeScaleEnabled(){return!0}}pt.prototype._fillFunc=Bu;pt.prototype._strokeFunc=Hu;pt.prototype.className=Mu;pt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];vt(pt);p.overWriteSetter(pt,"width",Vn());p.overWriteSetter(pt,"height",Vn());p.addGetterSetter(pt,"fontFamily","Arial");p.addGetterSetter(pt,"fontSize",12,R());p.addGetterSetter(pt,"fontStyle",Qo);p.addGetterSetter(pt,"fontVariant",Qo);p.addGetterSetter(pt,"padding",0,R());p.addGetterSetter(pt,"align",Jo);p.addGetterSetter(pt,"verticalAlign",Ru);p.addGetterSetter(pt,"lineHeight",1,R());p.addGetterSetter(pt,"wrap",Lu);p.addGetterSetter(pt,"ellipsis",!1,$t());p.addGetterSetter(pt,"letterSpacing",0,R());p.addGetterSetter(pt,"text","",ei());p.addGetterSetter(pt,"textDecoration","");var Wu="",tl="normal";function el(e){e.fillText(this.partialText,0,0)}function il(e){e.strokeText(this.partialText,0,0)}class wt extends A{constructor(t){super(t);this.dummyCanvas=b.createCanvasElement(),this.dataArray=[],this.dataArray=ht.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=ht.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var i=this.textDecoration(),r=this.fill(),n=this.fontSize(),s=this.glyphInfo;i==="underline"&&t.beginPath();for(var a=0;a<s.length;a++){t.save();var o=s[a].p0;t.translate(o.x,o.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),i==="underline"&&(a===0&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}i==="underline"&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var i=this.glyphInfo;if(i.length>=1){var r=i[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<i.length;n++){var s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return b.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return pt.prototype.setText.call(this,t)}_getContextFont(){return pt.prototype._getContextFont.call(this)}_getTextSize(t){var i=this.dummyCanvas,r=i.getContext("2d");r.save(),r.font=this._getContextFont();var n=r.measureText(t);return r.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,i=this._getTextSize(this.attrs.text),r=this.letterSpacing(),n=this.align(),s=this.kerningFunc();this.textWidth=i.width,this.textHeight=i.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var o=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(o+=t.dataArray[l].pathLength);var h=0;n==="center"&&(h=Math.max(0,o/2-a/2)),n==="right"&&(h=Math.max(0,o-a));for(var d=qo(this.text()),f=this.text().split(" ").length-1,u,g,c,y=-1,m=0,C=function(){m=0;for(var K=t.dataArray,$=y+1;$<K.length;$++){if(K[$].pathLength>0)return y=$,K[$];K[$].command==="M"&&(u={x:K[$].points[0],y:K[$].points[1]})}return{}},x=function(K){var $=t._getTextSize(K).width+r;K===" "&&n==="justify"&&($+=(o-a)/f);var ot=0,xt=0;for(g=void 0;Math.abs($-ot)/$>.01&&xt<20;){xt++;for(var j=ot;c===void 0;)c=C(),c&&j+c.pathLength<$&&(j+=c.pathLength,c=void 0);if(c==={}||u===void 0)return;var q=!1;switch(c.command){case"L":ht.getLineLength(u.x,u.y,c.points[0],c.points[1])>$?g=ht.getPointOnLine($,u.x,u.y,c.points[0],c.points[1],u.x,u.y):c=void 0;break;case"A":var tt=c.points[4],mt=c.points[5],et=c.points[4]+mt;m===0?m=tt+1e-8:$>ot?m+=Math.PI/180*mt/Math.abs(mt):m-=Math.PI/360*mt/Math.abs(mt),(mt<0&&m<et||mt>=0&&m>et)&&(m=et,q=!0),g=ht.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,c.points[6]);break;case"C":m===0?$>c.pathLength?m=1e-8:m=$/c.pathLength:$>ot?m+=($-ot)/c.pathLength/2:m=Math.max(m-(ot-$)/c.pathLength/2,0),m>1&&(m=1,q=!0),g=ht.getPointOnCubicBezier(m,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);break;case"Q":m===0?m=$/c.pathLength:$>ot?m+=($-ot)/c.pathLength:m-=(ot-$)/c.pathLength,m>1&&(m=1,q=!0),g=ht.getPointOnQuadraticBezier(m,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3]);break}g!==void 0&&(ot=ht.getLineLength(u.x,u.y,g.x,g.y)),q&&(q=!1,c=void 0)}},w="C",E=t._getTextSize(w).width+r,F=h/E-1,G=0;G<F&&(x(w),!(u===void 0||g===void 0));G++)u=g;for(var I=0;I<d.length&&(x(d[I]),!(u===void 0||g===void 0));I++){var D=ht.getLineLength(u.x,u.y,g.x,g.y),B=0;if(s)try{B=s(d[I-1],d[I])*this.fontSize()}catch{B=0}u.x+=B,g.x+=B,this.textWidth+=B;var W=ht.getPointOnLine(B+D/2,u.x,u.y,g.x,g.y),z=Math.atan2(g.y-u.y,g.x-u.x);this.glyphInfo.push({transposeX:W.x,transposeY:W.y,text:d[I],rotation:z,p0:u,p1:g}),u=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(d){t.push(d.p0.x),t.push(d.p0.y),t.push(d.p1.x),t.push(d.p1.y)});for(var i=t[0]||0,r=t[0]||0,n=t[1]||0,s=t[1]||0,a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);var h=this.fontSize();return{x:i-h/2,y:n-h/2,width:r-i+h,height:s-n+h}}}wt.prototype._fillFunc=el;wt.prototype._strokeFunc=il;wt.prototype._fillFuncHit=el;wt.prototype._strokeFuncHit=il;wt.prototype.className="TextPath";wt.prototype._attrsAffectingSize=["text","fontSize","data"];vt(wt);p.addGetterSetter(wt,"data");p.addGetterSetter(wt,"fontFamily","Arial");p.addGetterSetter(wt,"fontSize",12,R());p.addGetterSetter(wt,"fontStyle",tl);p.addGetterSetter(wt,"align","left");p.addGetterSetter(wt,"letterSpacing",0,R());p.addGetterSetter(wt,"textBaseline","middle");p.addGetterSetter(wt,"fontVariant",tl);p.addGetterSetter(wt,"text",Wu);p.addGetterSetter(wt,"textDecoration",null);p.addGetterSetter(wt,"kerningFunc",null);var rl="tr-konva",Uu=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(e=>e+`.${rl}`).join(" "),ia="nodesRect",Yu=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],$u={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Xu="ontouchstart"in U._global;function Vu(e,t){if(e==="rotater")return"crosshair";t+=b.degToRad($u[e]||0);var i=(b.radToDeg(t)%360+360)%360;return b._inRange(i,315+22.5,360)||b._inRange(i,0,22.5)?"ns-resize":b._inRange(i,45-22.5,45+22.5)?"nesw-resize":b._inRange(i,90-22.5,90+22.5)?"ew-resize":b._inRange(i,135-22.5,135+22.5)?"nwse-resize":b._inRange(i,180-22.5,180+22.5)?"ns-resize":b._inRange(i,225-22.5,225+22.5)?"nesw-resize":b._inRange(i,270-22.5,270+22.5)?"ew-resize":b._inRange(i,315-22.5,315+22.5)?"nwse-resize":(b.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var cr=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],ra=1e8;function Ku(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function nl(e,t,i){const r=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),n=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:r,y:n})}function ju(e,t){const i=Ku(e);return nl(e,t,i)}function qu(e,t,i){let r=t;for(let n=0;n<e.length;n++){const s=U.getAngle(e[n]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<i&&(r=s)}return r}class at extends ti{constructor(t){super(t);this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Uu,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return b.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return rl+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const n=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=r._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");r.on(s,n),r.on(Yu.map(a=>a+`.${this._getEventNamespace()}`).join(" "),n),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,n),this._proxyDrag(r)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,r=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!i)return;const n=t.getAbsolutePosition(),s=n.x-i.x,a=n.y-i.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(r)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(ia),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(ia,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),r){var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(r),a=t.getAbsolutePosition(r),o=n.x*s.x-t.offsetX()*s.x,l=n.y*s.y-t.offsetY()*s.y;const h=(U.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),d={x:a.x+o*Math.cos(h)+l*Math.sin(-h),y:a.y+l*Math.cos(h)+o*Math.sin(h),width:n.width*s.x,height:n.height*s.y,rotation:h};return nl(d,-U.getAngle(i),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-ra,y:-ra,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const d=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],u=h.getAbsoluteTransform();f.forEach(function(g){var c=u.point(g);i.push(c)})});const r=new Ot;r.rotate(-U.getAngle(this.rotation()));var n,s,a,o;i.forEach(function(h){var d=r.point(h);n===void 0&&(n=a=d.x,s=o=d.y),n=Math.min(n,d.x),s=Math.min(s,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),r.invert();const l=r.point({x:n,y:s});return{x:l.x,y:l.y,width:a-n,height:o-s,rotation:U.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),cr.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var i=new Mi({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Xu?10:"auto"}),r=this;i.on("mousedown touchstart",function(n){r._handleMouseDown(n)}),i.on("dragstart",n=>{i.stopDrag(),n.cancelBubble=!0}),i.on("dragend",n=>{n.cancelBubble=!0}),i.on("mouseenter",()=>{var n=U.getAngle(this.rotation()),s=Vu(t,n);i.getStage().content&&(i.getStage().content.style.cursor=s),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){var t=new A({name:"back",width:0,height:0,draggable:!0,sceneFunc(i){var r=this.getParent(),n=r.padding();i.beginPath(),i.rect(-n,-n,this.width()+n*2,this.height()+n*2),i.moveTo(this.width()/2,-n),r.rotateEnabled()&&i.lineTo(this.width()/2,-r.rotateAnchorOffset()*b._sign(this.height())-n),i.fillStrokeShape(this)},hitFunc:(i,r)=>{if(!!this.shouldOverdrawWholeArea()){var n=this.padding();i.beginPath(),i.rect(-n,-n,r.width()+n*2,r.height()+n*2),i.fillStrokeShape(r)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var i=this._getNodeRect(),r=i.width,n=i.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/s),this.cos=Math.abs(r/s),typeof window!="undefined"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t,target:l})})}_handleMouseMove(t){var i,r,n,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),s.setAbsolutePosition(l);const d=s.getAbsolutePosition();if(!(h.x===d.x&&h.y===d.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();i=s.x()-f.width/2,r=-s.y()+f.height/2;let K=Math.atan2(-r,i)+Math.PI/2;f.height<0&&(K-=Math.PI);var u=U.getAngle(this.rotation());const $=u+K,ot=U.getAngle(this.rotationSnapTolerance()),j=qu(this.rotationSnaps(),$,ot)-f.rotation,q=ju(f,j);this._fitNodesInto(q,t);return}var g=this.keepRatio()||t.shiftKey,x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(g){var c=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(c.x-s.x(),2)+Math.pow(c.y-s.y(),2));var y=this.findOne(".top-left").x()>c.x?-1:1,m=this.findOne(".top-left").y()>c.y?-1:1;i=n*this.cos*y,r=n*this.sin*m,this.findOne(".top-left").x(c.x-i),this.findOne(".top-left").y(c.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var c=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(s.x()-c.x,2)+Math.pow(c.y-s.y(),2));var y=this.findOne(".top-right").x()<c.x?-1:1,m=this.findOne(".top-right").y()>c.y?-1:1;i=n*this.cos*y,r=n*this.sin*m,this.findOne(".top-right").x(c.x+i),this.findOne(".top-right").y(c.y-r)}var C=s.position();this.findOne(".top-left").y(C.y),this.findOne(".bottom-right").x(C.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var c=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(c.x-s.x(),2)+Math.pow(s.y()-c.y,2));var y=c.x<s.x()?-1:1,m=s.y()<c.y?-1:1;i=n*this.cos*y,r=n*this.sin*m,s.x(c.x-i),s.y(c.y+r)}C=s.position(),this.findOne(".top-left").x(C.x),this.findOne(".bottom-right").y(C.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var c=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(s.x()-c.x,2)+Math.pow(s.y()-c.y,2));var y=this.findOne(".bottom-right").x()<c.x?-1:1,m=this.findOne(".bottom-right").y()<c.y?-1:1;i=n*this.cos*y,r=n*this.sin*m,this.findOne(".bottom-right").x(c.x+i),this.findOne(".bottom-right").y(c.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),E=this.findOne(".bottom-right"),F=w.x(),G=w.y(),I=this.getWidth()-E.x(),D=this.getHeight()-E.y();E.move({x:-F,y:-G}),w.move({x:I,y:D})}var B=this.findOne(".top-left").getAbsolutePosition();i=B.x,r=B.y;var W=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),z=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:r,width:W,height:z,rotation:U.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window!="undefined"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var i=this.getNode();this._fire("transformend",{evt:t,target:i}),i&&this._nodes.forEach(r=>{r._fire("transformend",{evt:t,target:r})}),this._movingAnchorName=null}}_fitNodesInto(t,i){var r=this._getNodeRect();const n=1;if(b._inRange(t.width,-this.padding()*2-n,n)){this.update();return}if(b._inRange(t.height,-this.padding()*2-n,n)){this.update();return}const s=this.flipEnabled();var a=new Ot;if(a.rotate(U.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=a.point({x:-this.padding()*2,y:0});if(t.x+=f.x,t.y+=f.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=a.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=a.point({x:0,y:-this.padding()*2});if(t.x+=f.x,t.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=a.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,t);f?t=f:b.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new Ot;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/o,r.height/o);const h=new Ot;h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.width/o,t.height/o);const d=h.multiply(l.invert());this._nodes.forEach(f=>{var u;const g=f.getParent().getAbsoluteTransform(),c=f.getTransform().copy();c.translate(f.offsetX(),f.offsetY());const y=new Ot;y.multiply(g.copy().invert()).multiply(d).multiply(g).multiply(c);const m=y.decompose();f.setAttrs(m),this._fire("transform",{evt:i,target:f}),f._fire("transform",{evt:i,target:f}),(u=f.getLayer())===null||u===void 0||u.batchDraw()}),this.rotation(b._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t,i=this._getNodeRect();this.rotation(b._getRotation(i.rotation));var r=i.width,n=i.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(h=>{h.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:n/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:n,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:n,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*b._sign(n)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ti.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return k.prototype.toObject.call(this)}}function Ju(e){return e instanceof Array||b.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){cr.indexOf(t)===-1&&b.warn("Unknown anchor name: "+t+". Available names are: "+cr.join(", "))}),e||[]}at.prototype.className="Transformer";vt(at);p.addGetterSetter(at,"enabledAnchors",cr,Ju);p.addGetterSetter(at,"flipEnabled",!0,$t());p.addGetterSetter(at,"resizeEnabled",!0);p.addGetterSetter(at,"anchorSize",10,R());p.addGetterSetter(at,"rotateEnabled",!0);p.addGetterSetter(at,"rotationSnaps",[]);p.addGetterSetter(at,"rotateAnchorOffset",50,R());p.addGetterSetter(at,"rotationSnapTolerance",5,R());p.addGetterSetter(at,"borderEnabled",!0);p.addGetterSetter(at,"anchorStroke","rgb(0, 161, 255)");p.addGetterSetter(at,"anchorStrokeWidth",1,R());p.addGetterSetter(at,"anchorFill","white");p.addGetterSetter(at,"anchorCornerRadius",0,R());p.addGetterSetter(at,"borderStroke","rgb(0, 161, 255)");p.addGetterSetter(at,"borderStrokeWidth",1,R());p.addGetterSetter(at,"borderDash");p.addGetterSetter(at,"keepRatio",!0);p.addGetterSetter(at,"centeredScaling",!1);p.addGetterSetter(at,"ignoreStroke",!1);p.addGetterSetter(at,"padding",0,R());p.addGetterSetter(at,"node");p.addGetterSetter(at,"nodes");p.addGetterSetter(at,"boundBoxFunc");p.addGetterSetter(at,"anchorDragBoundFunc");p.addGetterSetter(at,"shouldOverdrawWholeArea",!1);p.addGetterSetter(at,"useSingleNodeRotation",!0);p.backCompat(at,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class fe extends A{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,U.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}fe.prototype.className="Wedge";fe.prototype._centroid=!0;fe.prototype._attrsAffectingSize=["radius"];vt(fe);p.addGetterSetter(fe,"radius",0,R());p.addGetterSetter(fe,"angle",0,R());p.addGetterSetter(fe,"clockwise",!1);p.backCompat(fe,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function na(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Qu=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Zu=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function tc(e,t){var i=e.data,r=e.width,n=e.height,s,a,o,l,h,d,f,u,g,c,y,m,C,x,w,E,F,G,I,D,B,W,z,K,$=t+t+1,ot=r-1,xt=n-1,j=t+1,q=j*(j+1)/2,tt=new na,mt=null,et=tt,lt=null,_t=null,Et=Qu[t],Ut=Zu[t];for(o=1;o<$;o++)et=et.next=new na,o===j&&(mt=et);for(et.next=tt,f=d=0,a=0;a<n;a++){for(E=F=G=I=u=g=c=y=0,m=j*(D=i[d]),C=j*(B=i[d+1]),x=j*(W=i[d+2]),w=j*(z=i[d+3]),u+=q*D,g+=q*B,c+=q*W,y+=q*z,et=tt,o=0;o<j;o++)et.r=D,et.g=B,et.b=W,et.a=z,et=et.next;for(o=1;o<j;o++)l=d+((ot<o?ot:o)<<2),u+=(et.r=D=i[l])*(K=j-o),g+=(et.g=B=i[l+1])*K,c+=(et.b=W=i[l+2])*K,y+=(et.a=z=i[l+3])*K,E+=D,F+=B,G+=W,I+=z,et=et.next;for(lt=tt,_t=mt,s=0;s<r;s++)i[d+3]=z=y*Et>>Ut,z!==0?(z=255/z,i[d]=(u*Et>>Ut)*z,i[d+1]=(g*Et>>Ut)*z,i[d+2]=(c*Et>>Ut)*z):i[d]=i[d+1]=i[d+2]=0,u-=m,g-=C,c-=x,y-=w,m-=lt.r,C-=lt.g,x-=lt.b,w-=lt.a,l=f+((l=s+t+1)<ot?l:ot)<<2,E+=lt.r=i[l],F+=lt.g=i[l+1],G+=lt.b=i[l+2],I+=lt.a=i[l+3],u+=E,g+=F,c+=G,y+=I,lt=lt.next,m+=D=_t.r,C+=B=_t.g,x+=W=_t.b,w+=z=_t.a,E-=D,F-=B,G-=W,I-=z,_t=_t.next,d+=4;f+=r}for(s=0;s<r;s++){for(F=G=I=E=g=c=y=u=0,d=s<<2,m=j*(D=i[d]),C=j*(B=i[d+1]),x=j*(W=i[d+2]),w=j*(z=i[d+3]),u+=q*D,g+=q*B,c+=q*W,y+=q*z,et=tt,o=0;o<j;o++)et.r=D,et.g=B,et.b=W,et.a=z,et=et.next;for(h=r,o=1;o<=t;o++)d=h+s<<2,u+=(et.r=D=i[d])*(K=j-o),g+=(et.g=B=i[d+1])*K,c+=(et.b=W=i[d+2])*K,y+=(et.a=z=i[d+3])*K,E+=D,F+=B,G+=W,I+=z,et=et.next,o<xt&&(h+=r);for(d=s,lt=tt,_t=mt,a=0;a<n;a++)l=d<<2,i[l+3]=z=y*Et>>Ut,z>0?(z=255/z,i[l]=(u*Et>>Ut)*z,i[l+1]=(g*Et>>Ut)*z,i[l+2]=(c*Et>>Ut)*z):i[l]=i[l+1]=i[l+2]=0,u-=m,g-=C,c-=x,y-=w,m-=lt.r,C-=lt.g,x-=lt.b,w-=lt.a,l=s+((l=a+j)<xt?l:xt)*r<<2,u+=E+=lt.r=i[l],g+=F+=lt.g=i[l+1],c+=G+=lt.b=i[l+2],y+=I+=lt.a=i[l+3],lt=lt.next,m+=D=_t.r,C+=B=_t.g,x+=W=_t.b,w+=z=_t.a,E-=D,F-=B,G-=W,I-=z,_t=_t.next,d+=r}}const ec=function(t){var i=Math.round(this.blurRadius());i>0&&tc(t,i)};p.addGetterSetter(k,"blurRadius",0,R(),p.afterSetFilter);const ic=function(e){var t=this.brightness()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=4)i[n]+=t,i[n+1]+=t,i[n+2]+=t};p.addGetterSetter(k,"brightness",0,R(),p.afterSetFilter);const rc=function(e){var t=Math.pow((this.contrast()+100)/100,2),i=e.data,r=i.length,n=150,s=150,a=150,o;for(o=0;o<r;o+=4)n=i[o],s=i[o+1],a=i[o+2],n/=255,n-=.5,n*=t,n+=.5,n*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,n=n<0?0:n>255?255:n,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,i[o]=n,i[o+1]=s,i[o+2]=a};p.addGetterSetter(k,"contrast",0,R(),p.afterSetFilter);const nc=function(e){var t=this.embossStrength()*10,i=this.embossWhiteLevel()*255,r=this.embossDirection(),n=this.embossBlend(),s=0,a=0,o=e.data,l=e.width,h=e.height,d=l*4,f=h;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:b.error("Unknown emboss direction: "+r)}do{var u=(f-1)*d,g=s;f+g<1&&(g=0),f+g>h&&(g=0);var c=(f-1+g)*l*4,y=l;do{var m=u+(y-1)*4,C=a;y+C<1&&(C=0),y+C>l&&(C=0);var x=c+(y-1+C)*4,w=o[m]-o[x],E=o[m+1]-o[x+1],F=o[m+2]-o[x+2],G=w,I=G>0?G:-G,D=E>0?E:-E,B=F>0?F:-F;if(D>I&&(G=E),B>I&&(G=F),G*=t,n){var W=o[m]+G,z=o[m+1]+G,K=o[m+2]+G;o[m]=W>255?255:W<0?0:W,o[m+1]=z>255?255:z<0?0:z,o[m+2]=K>255?255:K<0?0:K}else{var $=i-G;$<0?$=0:$>255&&($=255),o[m]=o[m+1]=o[m+2]=$}}while(--y)}while(--f)};p.addGetterSetter(k,"embossStrength",.5,R(),p.afterSetFilter);p.addGetterSetter(k,"embossWhiteLevel",.5,R(),p.afterSetFilter);p.addGetterSetter(k,"embossDirection","top-left",null,p.afterSetFilter);p.addGetterSetter(k,"embossBlend",!1,null,p.afterSetFilter);function Yr(e,t,i,r,n){var s=i-t,a=n-r,o;return s===0?r+a/2:a===0?r:(o=(e-t)/s,o=a*o+r,o)}const sc=function(e){var t=e.data,i=t.length,r=t[0],n=r,s,a=t[1],o=a,l,h=t[2],d=h,f,u,g=this.enhance();if(g!==0){for(u=0;u<i;u+=4)s=t[u+0],s<r?r=s:s>n&&(n=s),l=t[u+1],l<a?a=l:l>o&&(o=l),f=t[u+2],f<h?h=f:f>d&&(d=f);n===r&&(n=255,r=0),o===a&&(o=255,a=0),d===h&&(d=255,h=0);var c,y,m,C,x,w,E,F,G;for(g>0?(y=n+g*(255-n),m=r-g*(r-0),x=o+g*(255-o),w=a-g*(a-0),F=d+g*(255-d),G=h-g*(h-0)):(c=(n+r)*.5,y=n+g*(n-c),m=r+g*(r-c),C=(o+a)*.5,x=o+g*(o-C),w=a+g*(a-C),E=(d+h)*.5,F=d+g*(d-E),G=h+g*(h-E)),u=0;u<i;u+=4)t[u+0]=Yr(t[u+0],r,n,m,y),t[u+1]=Yr(t[u+1],a,o,w,x),t[u+2]=Yr(t[u+2],h,d,G,F)}};p.addGetterSetter(k,"enhance",0,R(),p.afterSetFilter);const ac=function(e){var t=e.data,i=t.length,r,n;for(r=0;r<i;r+=4)n=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=n,t[r+1]=n,t[r+2]=n};p.addGetterSetter(k,"hue",0,R(),p.afterSetFilter);p.addGetterSetter(k,"saturation",0,R(),p.afterSetFilter);p.addGetterSetter(k,"luminance",0,R(),p.afterSetFilter);const oc=function(e){var t=e.data,i=t.length,r=1,n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=r*n*Math.cos(s*Math.PI/180),h=r*n*Math.sin(s*Math.PI/180),d=.299*r+.701*l+.167*h,f=.587*r-.587*l+.33*h,u=.114*r-.114*l-.497*h,g=.299*r-.299*l-.328*h,c=.587*r+.413*l+.035*h,y=.114*r-.114*l+.293*h,m=.299*r-.3*l+1.25*h,C=.587*r-.586*l-1.05*h,x=.114*r+.886*l-.2*h,w,E,F,G;for(o=0;o<i;o+=4)w=t[o+0],E=t[o+1],F=t[o+2],G=t[o+3],t[o+0]=d*w+f*E+u*F+a,t[o+1]=g*w+c*E+y*F+a,t[o+2]=m*w+C*E+x*F+a,t[o+3]=G},lc=function(e){var t=e.data,i=t.length,r=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=r*n*Math.cos(s*Math.PI/180),l=r*n*Math.sin(s*Math.PI/180),h=.299*r+.701*o+.167*l,d=.587*r-.587*o+.33*l,f=.114*r-.114*o-.497*l,u=.299*r-.299*o-.328*l,g=.587*r+.413*o+.035*l,c=.114*r-.114*o+.293*l,y=.299*r-.3*o+1.25*l,m=.587*r-.586*o-1.05*l,C=.114*r+.886*o-.2*l,x,w,E,F;for(a=0;a<i;a+=4)x=t[a+0],w=t[a+1],E=t[a+2],F=t[a+3],t[a+0]=h*x+d*w+f*E,t[a+1]=u*x+g*w+c*E,t[a+2]=y*x+m*w+C*E,t[a+3]=F};p.addGetterSetter(k,"hue",0,R(),p.afterSetFilter);p.addGetterSetter(k,"saturation",0,R(),p.afterSetFilter);p.addGetterSetter(k,"value",0,R(),p.afterSetFilter);const hc=function(e){var t=e.data,i=t.length,r;for(r=0;r<i;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};var dc=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,d,f,u=0,g=0,c=0,y=0,m,C=Math.sqrt(o*o+l*l);d=s-o,f=a-l,m=Math.sqrt(d*d+f*f),C=m>C?m:C;var x=a,w=s,E,F,G=360/w*Math.PI/180,I,D;for(F=0;F<w;F+=1)for(I=Math.sin(F*G),D=Math.cos(F*G),E=0;E<x;E+=1)d=Math.floor(o+C*E/x*D),f=Math.floor(l+C*E/x*I),h=(f*s+d)*4,u=r[h+0],g=r[h+1],c=r[h+2],y=r[h+3],h=(F+E*s)*4,n[h+0]=u,n[h+1]=g,n[h+2]=c,n[h+3]=y},fc=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,d,f,u,g,c=0,y=0,m=0,C=0,x,w=Math.sqrt(o*o+l*l);d=s-o,f=a-l,x=Math.sqrt(d*d+f*f),w=x>w?x:w;var E=a,F=s,G,I,D=i.polarRotation||0,B,W;for(d=0;d<s;d+=1)for(f=0;f<a;f+=1)u=d-o,g=f-l,G=Math.sqrt(u*u+g*g)*E/w,I=(Math.atan2(g,u)*180/Math.PI+360+D)%360,I=I*F/360,B=Math.floor(I),W=Math.floor(G),h=(W*s+B)*4,c=r[h+0],y=r[h+1],m=r[h+2],C=r[h+3],h=(f*s+d)*4,n[h+0]=c,n[h+1]=y,n[h+2]=m,n[h+3]=C};const uc=function(e){var t=e.width,i=e.height,r,n,s,a,o,l,h,d,f,u,g=Math.round(this.kaleidoscopePower()),c=Math.round(this.kaleidoscopeAngle()),y=Math.floor(t*(c%360)/360);if(!(g<1)){var m=b.createCanvasElement();m.width=t,m.height=i;var C=m.getContext("2d").getImageData(0,0,t,i);dc(e,C,{polarCenterX:t/2,polarCenterY:i/2});for(var x=t/Math.pow(2,g);x<=8;)x=x*2,g-=1;x=Math.ceil(x);var w=x,E=0,F=w,G=1;for(y+x>t&&(E=w,F=0,G=-1),n=0;n<i;n+=1)for(r=E;r!==F;r+=G)s=Math.round(r+y)%t,f=(t*n+s)*4,o=C.data[f+0],l=C.data[f+1],h=C.data[f+2],d=C.data[f+3],u=(t*n+r)*4,C.data[u+0]=o,C.data[u+1]=l,C.data[u+2]=h,C.data[u+3]=d;for(n=0;n<i;n+=1)for(w=Math.floor(x),a=0;a<g;a+=1){for(r=0;r<w+1;r+=1)f=(t*n+r)*4,o=C.data[f+0],l=C.data[f+1],h=C.data[f+2],d=C.data[f+3],u=(t*n+w*2-r-1)*4,C.data[u+0]=o,C.data[u+1]=l,C.data[u+2]=h,C.data[u+3]=d;w*=2}fc(C,e,{polarRotation:0})}};p.addGetterSetter(k,"kaleidoscopePower",2,R(),p.afterSetFilter);p.addGetterSetter(k,"kaleidoscopeAngle",0,R(),p.afterSetFilter);function qi(e,t,i){var r=(i*e.width+t)*4,n=[];return n.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),n}function li(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function cc(e){for(var t=[0,0,0],i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function gc(e,t){var i=qi(e,0,0),r=qi(e,e.width-1,0),n=qi(e,0,e.height-1),s=qi(e,e.width-1,e.height-1),a=t||10;if(li(i,r)<a&&li(r,s)<a&&li(s,n)<a&&li(n,i)<a){for(var o=cc([r,i,s,n]),l=[],h=0;h<e.width*e.height;h++){var d=li(o,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=d<a?0:255}return l}}function pc(e,t){for(var i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function vc(e,t,i){for(var r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,d=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,c=l+u-s;if(g>=0&&g<i&&c>=0&&c<t){var y=g*t+c,m=r[f*n+u];d+=e[y]*m}}a[h]=d===255*8?255:0}return a}function mc(e,t,i){for(var r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,d=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,c=l+u-s;if(g>=0&&g<i&&c>=0&&c<t){var y=g*t+c,m=r[f*n+u];d+=e[y]*m}}a[h]=d>=255*4?255:0}return a}function _c(e,t,i){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,d=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,c=l+u-s;if(g>=0&&g<i&&c>=0&&c<t){var y=g*t+c,m=r[f*n+u];d+=e[y]*m}}a[h]=d}return a}const bc=function(e){var t=this.threshold(),i=gc(e,t);return i&&(i=vc(i,e.width,e.height),i=mc(i,e.width,e.height),i=_c(i,e.width,e.height),pc(e,i)),e};p.addGetterSetter(k,"threshold",0,R(),p.afterSetFilter);const yc=function(e){var t=this.noise()*255,i=e.data,r=i.length,n=t/2,s;for(s=0;s<r;s+=4)i[s+0]+=n-2*n*Math.random(),i[s+1]+=n-2*n*Math.random(),i[s+2]+=n-2*n*Math.random()};p.addGetterSetter(k,"noise",.2,R(),p.afterSetFilter);const Sc=function(e){var t=Math.ceil(this.pixelSize()),i=e.width,r=e.height,n,s,a,o,l,h,d,f=Math.ceil(i/t),u=Math.ceil(r/t),g,c,y,m,C,x,w,E=e.data;if(t<=0){b.error("pixelSize value can not be <= 0");return}for(C=0;C<f;C+=1)for(x=0;x<u;x+=1){for(o=0,l=0,h=0,d=0,g=C*t,c=g+t,y=x*t,m=y+t,w=0,n=g;n<c;n+=1)if(!(n>=i))for(s=y;s<m;s+=1)s>=r||(a=(i*s+n)*4,o+=E[a+0],l+=E[a+1],h+=E[a+2],d+=E[a+3],w+=1);for(o=o/w,l=l/w,h=h/w,d=d/w,n=g;n<c;n+=1)if(!(n>=i))for(s=y;s<m;s+=1)s>=r||(a=(i*s+n)*4,E[a+0]=o,E[a+1]=l,E[a+2]=h,E[a+3]=d)}};p.addGetterSetter(k,"pixelSize",8,R(),p.afterSetFilter);const Cc=function(e){var t=Math.round(this.levels()*254)+1,i=e.data,r=i.length,n=255/t,s;for(s=0;s<r;s+=1)i[s]=Math.floor(i[s]/n)*n};p.addGetterSetter(k,"levels",.5,R(),p.afterSetFilter);const wc=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a,o;for(a=0;a<i;a+=4)o=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=o*r,t[a+1]=o*n,t[a+2]=o*s,t[a+3]=t[a+3]};p.addGetterSetter(k,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});p.addGetterSetter(k,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});p.addGetterSetter(k,"blue",0,Po,p.afterSetFilter);const xc=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<i;o+=4)l=1-a,t[o]=r*a+t[o]*l,t[o+1]=n*a+t[o+1]*l,t[o+2]=s*a+t[o+2]*l};p.addGetterSetter(k,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});p.addGetterSetter(k,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});p.addGetterSetter(k,"blue",0,Po,p.afterSetFilter);p.addGetterSetter(k,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const Ec=function(e){var t=e.data,i=t.length,r,n,s,a;for(r=0;r<i;r+=4)n=t[r+0],s=t[r+1],a=t[r+2],t[r+0]=Math.min(255,n*.393+s*.769+a*.189),t[r+1]=Math.min(255,n*.349+s*.686+a*.168),t[r+2]=Math.min(255,n*.272+s*.534+a*.131)},Tc=function(e){var t=e.data,i=e.width,r=e.height,n=i*4,s=r;do{var a=(s-1)*n,o=i;do{var l=a+(o-1)*4,h=t[l],d=t[l+1],f=t[l+2];h>127&&(h=255-h),d>127&&(d=255-d),f>127&&(f=255-f),t[l]=h,t[l+1]=d,t[l+2]=f}while(--o)}while(--s)},Pc=function(e){var t=this.threshold()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=1)i[n]=i[n]<t?0:255};p.addGetterSetter(k,"threshold",.5,R(),p.afterSetFilter);const Oc=Js.Util._assign(Js,{Arc:he,Arrow:De,Circle:ii,Ellipse:ye,Image:Xt,Label:Jn,Tag:Ne,Line:de,Path:ht,Rect:Mi,RegularPolygon:Fe,Ring:Be,Sprite:Zt,Star:Se,Text:pt,TextPath:wt,Transformer:at,Wedge:fe,Filters:{Blur:ec,Brighten:ic,Contrast:rc,Emboss:nc,Enhance:sc,Grayscale:ac,HSL:oc,HSV:lc,Invert:hc,Kaleidoscope:uc,Mask:bc,Noise:yc,Pixelate:Sc,Posterize:Cc,RGB:wc,RGBA:xc,Sepia:Ec,Solarize:Tc,Threshold:Pc}});export{kc as E,Oc as K,Rc as a,wr as b,Nn as c,se as d,bh as e,ve as f,Mc as g,Ln as o,Ei as r,Zi as w};
