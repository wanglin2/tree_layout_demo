import{K as O,r as T,w as G,o as K,E as V,a as F,b as H,c as X,d as Y,e as q,f as z,g as Q}from"./vendor.cbf8cafe.js";const U=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const o of d)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function f(d){const o={};return d.integrity&&(o.integrity=d.integrity),d.referrerpolicy&&(o.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?o.credentials="include":d.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(d){if(d.ep)return;d.ep=!0;const o=f(d);fetch(d.href,o)}};U();const B=20,w=50,N=800;let E=null;const Z=h=>{let c=new O.Stage({container:h.value,width:N,height:N});E=new O.Layer,c.add(E),$(c)},$=h=>{let c=new O.Layer;h.add(c);for(let f=0;f<N;f+=w/2){let u=new O.Line({points:[f,0,f,N],stroke:"rgba(0,0,0,0.1)",strokeWidth:1});c.add(u);let d=new O.Line({points:[0,f,N,f],stroke:"rgba(0,0,0,0.1)",strokeWidth:1});c.add(d)}c.draw()},W=(h,c,f,u,d,o)=>{if(o==="mind"){let a=u||30,_=d||20,x=new O.Rect({x:h,y:c-_/2,width:a,height:_,fill:"#fff",stroke:"black",strokeWidth:2});E.add(x);let i=new O.Text({x:h,y:c,text:f,fontSize:14});i.offsetX(-(a-i.width())/2),i.offsetY(i.height()/2),E.add(i)}else{let a=new O.Circle({x:h,y:c,radius:10,fill:"#fff",stroke:"black",strokeWidth:2});E.add(a)}E.draw()},D=(h,c)=>{let f=new O.Line({points:[h.x,h.y,c.x,c.y],stroke:"black",strokeWidth:2,lineCap:"round",lineJoin:"round"});E.add(f),E.draw()},j=(h,c)=>{let f=new O.Line({points:[h.x+h.width,h.y,c.x-w/2,h.y,c.x-w/2,c.y,c.x,c.y],stroke:"black",strokeWidth:2,lineCap:"round",lineJoin:"round"});E.add(f),E.draw()},M=h=>{h.left_child&&(D(h,h.left_child),M(h.left_child)),h.right_child&&(D(h,h.right_child),M(h.right_child)),W(h.x,h.y,h.name,h.width,h.height)},R=(h,c)=>{h.children.forEach(f=>{c==="mind"?j(h,f):D(h,f),R(f,c)}),W(h.x,h.y,h.name,h.width,h.height,c)},A=h=>{h.x*=w,h.x+=w,h.y*=w,h.y+=w,h.children.forEach(c=>{A(c)})},v=()=>{E.removeChildren()},ee={name:"0",left_child:{name:"0-1"},right_child:{name:"0-2",left_child:{name:"0-2-1",left_child:{name:"0-2-1-1",left_child:{name:"0-2-1-1-1"}}}}},S={name:"0",children:[{name:"0-1",children:[{name:"0-1-1",children:[{name:"0-1-1-1",children:[{name:"0-1-1-1-1",children:[{name:"0-1-1-1-1",children:[]},{name:"0-1-1-1-1-2",children:[]}]},{name:"0-1-1-1-2",children:[]}]},{name:"0-1-1-2",children:[]}]},{name:"0-1-2",children:[]}]},{name:"0-2",children:[{name:"0-2-1",children:[{name:"0-2-1-1",children:[]},{name:"0-2-1-2",children:[]}]},{name:"0-2-2",children:[{name:"0-2-2-1",children:[]}]}]}]},J={name:"Q",children:[{name:"G0",children:[]},{name:"G",children:[{name:"C",width:50,height:70,children:[{name:"B",width:20,height:50,children:[{name:"A",children:[]}]}]},{name:"F",children:[{name:"D",children:[]},{name:"E",width:150,height:60,children:[]},{name:"E2",children:[]}]}]},{name:"H",children:[]},{name:"H2",width:100,height:40,children:[]},{name:"P",children:[{name:"I",width:100,height:50,children:[]},{name:"O",children:[{name:"J",children:[]},{name:"K",width:100,height:60,children:[]},{name:"L",children:[]},{name:"M",children:[]},{name:"N",children:[]}]}]},{name:"P2",children:[]}]},ne={name:"",children:[{name:"",children:[{name:"",children:[{name:"",children:[]},{name:"",children:[]}]},{name:"",children:[{name:"",children:[]},{name:"",children:[]}]}]},{name:"",children:[{name:"",children:[{name:"",children:[]},{name:"",children:[]}]},{name:"",children:[{name:"",children:[]},{name:"",children:[]}]}]},{name:"",children:[]},{name:"",children:[{name:"",children:[{name:"",children:[]},{name:"",children:[]}]},{name:"",children:[{name:"",children:[]},{name:"",children:[]}]}]}]},I=h=>JSON.parse(JSON.stringify(h)),te=()=>{const h=I(ee);let c=w;const f=(u,d)=>{u.left_child&&f(u.left_child,d+1),u.x=c,u.y=d*w+w,c+=w,u.right_child&&f(u.right_child,d+1)};f(h,0),M(h)},ie=()=>{const h=I(S),c=[],f=(u,d=0)=>{c[d]===void 0&&(c[d]=0),u.x=c[d],u.y=d,c[d]+=1,u.children.forEach(o=>{f(o,d+1)})};f(h),A(h),R(h)},le=()=>{class h{constructor(a,_=0){this.x=-1,this.y=_,this.tree=a,this.children=a.children.map(x=>new h(x,_+1)),this.mod=0}}const c=(o,a=0,_={},x={})=>{o.children.forEach(e=>{c(e,a+1,_,x)}),o.y=a;let i,n=o.children.length;n<=0?(i=_[a]||0,o.x=i):n===1?i=o.children[0].x-1:i=(o.children[0].x+o.children[1].x)/2,x[a]=Math.max(x[a]||0,(_[a]||0)-i),n>0&&(o.x=i+x[a]),_[a]===void 0&&(_[a]=0),_[a]+=2,o.mod=x[a]},f=(o,a=0)=>{o.x=o.x+a,a+=o.mod,o.children.forEach(_=>{f(_,a)})},u=o=>(c(o),f(o),o);let d=new h(I(S));d=u(d),A(d),R(d)},re=()=>{class h{constructor(n,e=0){this.x=-1,this.y=e,this.tree=n,this.children=n.children.map(t=>new h(t,e+1)),this.mod=0}}const c=i=>i.thread?i.thread:i.children.length>0?i.children[i.children.length-1]:null,f=i=>i.thread?i.thread:i.children.length>0?i.children[0]:null,u=(i,n,e=null,t=0,l=0,r=null,s=null)=>{let m=i.x+t-(n.x+l);(e===null||m>e)&&(e=m),r===null&&(r=i),s===null&&(s=n);let g=f(r),b=c(i),y=f(n),p=c(s);return b&&y?(t+=i.mod,l+=n.mod,u(b,y,e,t,l,g,p)):[b,y,e,t,l,r,s]},d=(i,n)=>{let[e,t,l,r,s,m,g]=u(i,n);return l+=1,l+=(n.x+l+i.x)%2,n.mod=l,n.x+=l,n.children.length>0&&(s+=l),t&&!e?(m.thread=t,m.mod=s-r):e&&!t&&(g.thread=e,g.mod=r-s),(i.x+n.x)/2},o=(i,n=0)=>(i.x+=n,i.children.forEach(e=>{o(e,n+i.mod)}),i),a=(i,n=0)=>{if(i.children.length===0)return i.x=0,i;if(i.children.length===1)return i.x=a(i.children[0],n+1).x,i;let e=a(i.children[0],n+1),t=a(i.children[1],n+1);return i.x=d(e,t),i},_=i=>o(a(i));let x=new h(I(S));x=_(x),A(x),R(x)},he=()=>{class h{constructor(n,e=null,t=0,l=1){this.name=n.name,this.x=-1,this.y=t,this.children=n.children.map((r,s)=>new h(r,this,t+1,s+1)),this.parent=e,this.thread=null,this.mod=0,this.ancestor=this,this.change=this.shift=0,this._lmost_sibling=null,this.number=l}right(){return this.thread||(this.children.length>0?this.children[this.children.length-1]:null)}left(){return this.thread||(this.children.length>0?this.children[0]:null)}left_brother(){let n=null;if(this.parent)for(let e=0;e<this.parent.children.length;e++){let t=this.parent.children[e];if(t===this)return n;n=t}return n}get_lmost_sibling(){return!this._lmost_sibling&&this.parent&&this!==this.parent.children[0]&&(this._lmost_sibling=this.parent.children[0]),this._lmost_sibling}get leftmost_sibling(){return this.get_lmost_sibling()}}const c=(i,n=1)=>{if(i.children.length===0)i.leftmost_sibling?i.x=i.left_brother().x+n:i.x=0;else{let e=i.children[0];i.children.forEach(r=>{c(r),e=f(r,n,e)}),d(i);let t=(i.children[0].x+i.children[i.children.length-1].x)/2,l=i.left_brother();l?(i.x=l.x+n,i.mod=i.x-t):i.x=t}return i},f=(i,n,e)=>{let t=i.left_brother();if(t){let l=i,r=i,s=t,m=i.leftmost_sibling,g=l.mod,b=r.mod,y=s.mod,p=m.mod;for(;s.right()&&l.left();){s=s.right(),l=l.left(),m=m.left(),r=r.right(),r.ancestor=i;let L=s.x+y+n-(l.x+g);if(L>0){let k=o(s,i,e);u(k,i,L),g+=L,b+=L}g+=l.mod,b+=r.mod,y+=s.mod,p+=m.mod}s.right()&&!r.right()?(r.thread=s.right(),r.mod+=y-b):(l.left()&&!m.left()&&(m.thread=l.left(),m.mod+=g-p),e=i)}return e},u=(i,n,e)=>{let t=n.number-i.number,l=e/t;n.shift+=e,n.change-=l,i.change+=l,n.x+=e,n.mod+=e},d=i=>{let n=0,e=0;for(let t=i.children.length-1;t>=0;t--){let l=i.children[t];l.x+=e,l.mod+=e,n+=l.change,e+=l.shift+n}},o=(i,n,e)=>n.parent.children.includes(i.ancestor)?i.ancestor:e,a=(i,n=0,e=0)=>{i.x+=n,i.y=e,i.children.forEach(t=>{a(t,n+i.mod,e+1)})},_=i=>{let n=c(i);return console.log(n),a(n),n};let x=new h(I(J));x=_(x),A(x),R(x)},se=()=>{class h{constructor(e,t=null,l=0,r=1){this.name=e.name,this.x=-1,this.y=l,this.children=e.children.map((s,m)=>new h(s,this,l+1,m+1)),this.parent=t,this.thread=null,this.mod=0,this.ancestor=this,this.change=this.shift=0,this._lmost_sibling=null,this.number=r}right(){return this.thread||(this.children.length>0?this.children[this.children.length-1]:null)}left(){return this.thread||(this.children.length>0?this.children[0]:null)}left_brother(){let e=null;if(this.parent)for(let t=0;t<this.parent.children.length;t++){let l=this.parent.children[t];if(l===this)return e;e=l}return e}get_lmost_sibling(){return!this._lmost_sibling&&this.parent&&this!==this.parent.children[0]&&(this._lmost_sibling=this.parent.children[0]),this._lmost_sibling}get leftmost_sibling(){return this.get_lmost_sibling()}}const c=(n,e=1)=>{if(n.children.length===0)n.leftmost_sibling?n.x=n.left_brother().x+e:n.x=0;else{let t=n.children[0];n.children.forEach(s=>{c(s),t=f(s,t,e)}),d(n);let l=(n.children[0].x+n.children[n.children.length-1].x)/2,r=n.left_brother();r?(n.x=r.x+e,n.mod=n.x-l):n.x=l}return n},f=(n,e,t)=>{let l=n.left_brother();if(l){let r=n,s=n,m=l,g=n.leftmost_sibling,b=n.mod,y=n.mod,p=m.mod,L=g.mod;for(;m.right()&&r.left();){m=m.right(),r=r.left(),g=g.left(),s=s.right(),s.ancestor=n;let k=m.x+p-(r.x+b)+t;if(k>0){let C=o(m,n,e);u(C,n,k),b=b+k,y=y+k}p+=m.mod,b+=r.mod,L+=g.mod,y+=s.mod}m.right()&&!s.right()?(s.thread=m.right(),s.mod+=p-y):(r.left()&&!g.left()&&(g.thread=r.left(),g.mod+=b-L),e=n)}return e},u=(n,e,t)=>{let l=e.number-n.number;e.change-=t/l,e.shift+=t,n.change+=t/l,e.x+=t,e.mod+=t},d=n=>{let e=0,t=0;for(let l=n.children.length-1;l>=0;l--){let r=n.children[l];r.x+=e,r.mod+=e,t+=r.change,e+=r.shift+t}},o=(n,e,t)=>e.parent.children.includes(n.ancestor)?n.ancestor:t,a=(n,e=0,t=0,l=null)=>(n.x+=e,n.y=t,(l===null||n.x<l)&&(l=n.x),n.children.forEach(r=>{l=a(r,e+n.mod,t+1,l)}),l),_=(n,e)=>{n.x+=e,n.children.forEach(t=>{_(t,e)})},x=n=>{let e=c(n),t=a(e);return t<0&&_(e,-t),e};let i=new h(I(ne));i=x(i),A(i),R(i)},P=()=>{class h{constructor(t,l=null,r=0,s=1){this.name=t.name,this.width=t.width||30,this.height=t.height||20,this.y=-1,this.x=r,this.children=t.children.map((m,g)=>new h(m,this,r+1,g+1)),this.parent=l,this.thread=null,this.mod=0,this.ancestor=this,this.change=this.shift=0,this._lmost_sibling=null,this.number=s,this.minY=0,this.maxY=0,this.offset=0}right(){return this.thread||(this.children.length>0?this.children[this.children.length-1]:null)}left(){return this.thread||(this.children.length>0?this.children[0]:null)}left_brother(){let t=null;if(this.parent)for(let l=0;l<this.parent.children.length;l++){let r=this.parent.children[l];if(r===this)return t;t=r}return t}get_lmost_sibling(){return!this._lmost_sibling&&this.parent&&this!==this.parent.children[0]&&(this._lmost_sibling=this.parent.children[0]),this._lmost_sibling}get leftmost_sibling(){return this.get_lmost_sibling()}}const c=e=>{if(e.children.length===0)e.leftmost_sibling?e.y=e.left_brother().y+B:e.y=50;else{let t=e.children[0];e.children.forEach(s=>{c(s),t=f(s,t)}),d(e);let l=(e.children[0].y+e.children[e.children.length-1].y)/2,r=e.left_brother();r?(e.y=r.y+B,e.mod=e.y-l):e.y=l}return e},f=(e,t)=>{let l=e.left_brother();if(l){let r=e,s=e,m=l,g=e.leftmost_sibling,b=r.mod,y=s.mod,p=m.mod,L=g.mod;for(;m.right()&&r.left();){m=m.right(),r=r.left(),g=g.left(),s=s.right(),s.ancestor=e;let k=m.y+p+B-(r.y+b);if(k>0){let C=o(m,e,t);u(C,e,k),b+=k,y+=k}b+=r.mod,y+=s.mod,p+=m.mod,L+=g.mod}m.right()&&!s.right()?(s.thread=m.right(),s.mod+=p-y):(r.left()&&!g.left()&&(g.thread=r.left(),g.mod+=b-L),t=e)}return t},u=(e,t,l)=>{let r=t.number-e.number,s=l/r;t.shift+=l,t.change-=s,e.change+=s,t.y+=l,t.mod+=l},d=e=>{let t=0,l=0;for(let r=e.children.length-1;r>=0;r--){let s=e.children[r];s.y+=l,s.mod+=l,t+=s.change,l+=s.shift+t}},o=(e,t,l)=>t.parent.children.includes(e.ancestor)?e.ancestor:l,a=(e,t=0,l=0,r=0)=>{e.y+=t,e.x=l*w+r+w,e.children.forEach(s=>{a(s,t+e.mod,l+1,r+e.width)})},_=e=>{let t=e.y-e.height/2,l=e.y+e.height/2;if(e.children.length>0){let r=1/0,s=-1/0;e.children.forEach(m=>{_(m),m.minY<r&&(r=m.minY),m.maxY>s&&(s=m.maxY)}),e.minY=t<r?t:r,e.maxY=l>s?l:s}else e.minY=t,e.maxY=l;if(e.left_brother()&&e.minY<e.left_brother().maxY+B){let r=e.left_brother().maxY-e.minY+B;e.offset=r,e.y+=r,e.minY+=r,e.maxY+=r}},x=(e,t=0)=>{e.y+=t,e.children.forEach(s=>{x(s,t+e.offset)});let l=e.children.length;if(l<=0)return;let r=(e.children[0].y+e.children[l-1].y)/2;e.y=r},i=e=>{let t=c(e);return a(t),_(t),x(t),console.log(t),t};let n=new h(I(J));n=i(n),R(n,"mind")};const ce={class:"container"},oe={setup(h){const c=T(null),f=T("\u601D\u7EF4\u5BFC\u56FE");return G(f,()=>{switch(v(),f.value){case"\u601D\u7EF4\u5BFC\u56FE":P();break;case"\u7B97\u6CD51":te();break;case"\u7B97\u6CD52":ie();break;case"\u7B97\u6CD53":le();break;case"\u7B97\u6CD54":re();break;case"\u590D\u523B\u7248":he();break;case"\u539F\u7248":se();break}}),K(()=>{Z(c),P()}),(u,d)=>{const o=V,a=F;return H(),X("div",ce,[Y(a,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=_=>f.value=_),style:{"margin-bottom":"10px"}},{default:q(()=>[Y(o,{label:"\u601D\u7EF4\u5BFC\u56FE"}),Y(o,{label:"\u7B97\u6CD51"}),Y(o,{label:"\u7B97\u6CD52"}),Y(o,{label:"\u7B97\u6CD53"}),Y(o,{label:"\u7B97\u6CD54"}),Y(o,{label:"\u590D\u523B\u7248"}),Y(o,{label:"\u539F\u7248"})]),_:1},8,["modelValue"]),z("div",{class:"drawBox",ref_key:"drawBox",ref:c},null,512)])}}};Q(oe).mount("#app");
